<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
<meta content="IE-edge,chrome=1" http-equiv="X-UA-Compatable">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="Prmise,RxJs,JavaScript,ES6, ุฌุงูุง ุงุณฺฉุฑูพุช,ุขููุฒุด">
<meta name="author" content="Sadra Isapanah Amlashi | ุตุฏุฑุง ุนุณ ูพูุงู ุงููุด">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script>
    (function(b,l,e,g,h,f){1!==parseInt(e.msDoNotTrack||b.doNotTrack||e.doNotTrack,10)&&b.addEventListener("load",function(){var r=(new Date).getTime();b.galite=b.galite||{};var m=new XMLHttpRequest,n="https://www.google-analytics.com/collect?cid="+(l.uid=l.uid||Math.random()+"."+Math.random())+"&v=1&tid="+galite.UA+"&dl="+f(h.location.href)+"&ul=en-us&de=UTF-8",a=function(b){var d="",c;for(c in b){if(void 0===b[c])return!1;d+=f(b[c])}return d},p={dt:[h.title],sd:[g.colorDepth,"-bit"],sr:[g.availHeight,
        "x",g.availWidth],vp:[innerWidth,"x",innerHeight],dr:[h.referrer]},k;for(k in p){var q=k+"="+a(p[k]);q&&(n+="&"+q)}a=function(b,d){var c="",a;for(a in d)c+="&"+a+"="+f(d[a]);return function(){var a=n+c+(galite.anonymizeIp?"&aip=1":"")+"&t="+f(b)+"&z="+(new Date).getTime();if(e.sendBeacon)e.sendBeacon(a);else try{m.open("GET",a,!1),m.send()}catch(t){(new Image).src=a}}};setTimeout(a("pageview",null),100);b.addEventListener("unload",a("timing",{utc:"JS Dependencies",utv:"unload",utt:(new Date).getTime()-
    r}))})})(window,localStorage,navigator,screen,document,encodeURIComponent);

    var galite = galite || {};
    galite.UA = 'UA-107934487-1'; // Insert your tracking code here
</script>

<meta name="twitter:card" content="summary">

<meta property="og:type" content="website">
<meta property="og:url" content="http://isapanah.com/2017/js-promise">


<meta name="description" content="ุฏุฑ ุงู ูพุณุช ูุตุฏ ุฏุงุฑู ุจู ุณุงุฏูโุชุฑู ุฑูุด ููฺฉู ุฑุงุฌุน ุจู Promiseูุง ู ุงูฺฉู ูุงูุนุง ฺุทูุฑ ุจุงุฏ ุงุฒุดูู ุงุณุชูุงุฏู ฺฉุฑุฏ ุตุญุจุช ฺฉูู.">
<meta property="og:description" content="ุฏุฑ ุงู ูพุณุช ูุตุฏ ุฏุงุฑู ุจู ุณุงุฏูโุชุฑู ุฑูุด ููฺฉู ุฑุงุฌุน ุจู Promiseูุง ู ุงูฺฉู ูุงูุนุง ฺุทูุฑ ุจุงุฏ ุงุฒุดูู ุงุณุชูุงุฏู ฺฉุฑุฏ ุตุญุจุช ฺฉูู.">
<meta name="twitter:description" content="ุฏุฑ ุงู ูพุณุช ูุตุฏ ุฏุงุฑู ุจู ุณุงุฏูโุชุฑู ุฑูุด ููฺฉู ุฑุงุฌุน ุจู Promiseูุง ู ุงูฺฉู ูุงูุนุง ฺุทูุฑ ุจุงุฏ ุงุฒุดูู ุงุณุชูุงุฏู ฺฉุฑุฏ ุตุญุจุช ฺฉูู.">




<title>Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู | ุตุฏุฑุง ุงููุด</title>
<meta property="twitter:title" content="Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู | ุตุฏุฑุง ุงููุด">
<meta property="og:site_name" content="Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู | ุตุฏุฑุง ุงููุด">
<meta property="og:title" content="Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู | ุตุฏุฑุง ุงููุด">



<meta property="twitter:image" content="http://isapanah.com/assets/img/post/2017-11-27/js-promise-cover.png" />
<meta property="og:image" content="http://isapanah.com/assets/img/post/2017-11-27/js-promise-cover.png" />


<link rel="alternative" href="/site-map.xml" title="ูุจูุงฺฏ ุตุฏุฑุง ุงููุด" type="application/atom+xml">
<link rel="short icon" type="image/x-icon" href="http://isapanah.com/assets/img/base/favicon.png">
<link rel="stylesheet" type="text/css" href="http://isapanah.com/assets/css/styles.css">

    </head>

    <body dir="rtl" lang="Farsi" >
        <!-- Header -->
<header class="header-rtl">
    <nav class="nav-wrap">
        <a href="/" class="nav-logo">ูุจูุงฺฏ ุตุฏุฑุง ุงููุด</a>
        <ul class="navigation">

            <li><a href="/">ุงุฏุฏุงุดุชโูุง</a></li>
            <li><a href="/list/items">ููุถูุนุงุช</a></li>
            <li><a href="/about">ุฏุฑุจุงุฑู</a></li>
            <li><a href="http://cv.isapanah.com/">ุฑุฒููู</a></li>
            <li><a href="https://sadra.github.io/english">English</a></li>

        </ul>
    </nav>
</header>
<!-- /Header -->

        <div class="content">

    <div class="blog-post-container">

        <div class="post-title-container">
            <h1 class="post-title">Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู</h1>
        </div>

        <div class="post_created">

            <div class="author_avatar">
                <img src="/assets/img/base/avatar.jpg" alt="ุตุฏุฑุง ุงููุด" id="avatar-img" />
            </div>

            <div class="post_info">
                <p> <a href="/about">ุตุฏุฑุง ุงููุด</a> </p>
                <small>ุชูุณุนู ุฏููุฏู</small><br/>
                <small>ุฏูุดูุจู 06 ุขุฐุฑ 1396</small>
            </div>

        </div>

        
        <div class="post-cover">
            <img src="http://isapanah.com/assets/img/post/2017-11-27/js-promise-cover.png" alt="Promise ุชุงุจุญุงู ูฺููุช ุงููุฏุฑ ุขุณูู ูุจูุฏู">
        </div>
        

        <div class="post-content">
            <h2 id="ููุฏูู">ููุฏูู</h2>

<p>ุฎู ููุช ูพุด ุฏุฑ ุญู ุงูุฌุงู ฺฉ ูพุฑูฺู ุฏุฑ NodeJs ูุงุฒ ูพุฏุง ฺฉุฑุฏู ฺฉู ฺูุฏุชุง ูุชุฏ ุฑู ุจุตูุฑุช ูุชูุงู ู nested ุงุณุชูุงุฏู ฺฉููุ ู ูุชุฏ ูุง ูู ุจู ุงู ุตูุฑุช ุจูุฏ ฺฉู ุจุงุฏ ุตุจุฑ ูฺฉุฑุฏู ุชุง ุฏุงุฎู ุชุฑู ูุชุฏ ุงูุฌุงู ุจุดู ู ุจุนุฏ ูุชุฏ ุฎุงุฑุฌ ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฌู ูุชุฏ ุฏุงุฎู ูุธูู ุฎูุฏุด ุฑู ุงูุฌุงู ุจุฏูุ ู ุงู ุชูุงู ุชุง ุขุฎุฑู ูุชุฏ ุฎุงุฑุฌ ุงุฏุงูู ุฏุงุดุช. (ุชุง ุฌุง ฺฉู ุงุฏู ูุงุฏ ุชุง ด ูุฑุญูู ูุณุช ุดุฏู ุจูุฏ.)</p>

<p><img src="/assets/img/post/2017-11-27/js-promise-nested-blocks.jpg" alt="Nested Blocks" /></p>

<p>ุฌุฏุง ุงุฒ ุงู ููุฑุฏุ ูุดฺฉู ุฏฺฏู ุง ฺฉู ูุฌูุฏ ุฏุงุดุชู ุงู ุจูุฏ ฺฉู ุงููุง ุงู ูุชุฏโูุง Async ุจูุฏูุ ู ุฏููุง ุงูฺฉู ููฺฉู ุจูุฏ ูุชุฌู sucessfull ุง failed ุจุดู. ุฎูุงุตู ุจู ูุฑ ฺฉุซุงูุช ฺฉู ุจูุฏ ฺฉุงุฑู ุงูุฌุงู ุฏุงุฏู.
ฺูุฏ ููุช ุจุนุฏ <a href="http://moshtaghi.ir/">ููุฏ</a> ุจูู ฺฏูุช ฺฉู ูุชูู ุงุฒ <strong>Promise</strong> ุจุฑุง ุงู ูุนุถู ุงุณุชูุงุฏู ฺฉู. ู ุงูุฌูุฑ ุจูุฏ ฺฉู ุฒูุฏฺฏ ุฒุจุง ูโุดูุฏ!</p>

<p><img src="/assets/img/post/2017-11-27/js-promise-yeah.gif" alt="Yes" /></p>

<p>ุงุฒ ฺูุฏุชุง ุงุฒ ุฏูุณุชุงู ุดูุฏู ฺฉู ูููุฒ ูพุฑุงูุณ ุฑู ุฏุฑฺฉ ูฺฉุฑุฏู ู ููุฏููู ฺฉู ูุฑูุด ุจุง ฺุฒุง ุฏฺฏู ูุซู Callback ฺู. ุฏุฑ ุงู ูพุณุช ูุตุฏ ุฏุงุฑู ุจู ุณุงุฏูโุชุฑู ุฑูุด ููฺฉู ุฑุงุฌุน ุจู Promiseูุง ู ุงูฺฉู ูุงูุนุง ฺุทูุฑ ุจุงุฏ ุงุฒุดูู ุงุณุชูุงุฏู ฺฉุฑุฏ ุตุญุจุช ฺฉูู. ูพุณ ุญุฑู ุฑู ฺฉูุชุงู ฺฉูู ู ุจุฑู ุณุฑ ุงุตู ูุทูุจ.</p>

<p>ุฏุฑ ุงุฏุงูู ููุฑุณุช ุงุฒ ุณุฑูุตู ูุทุงูุจ ฺฉู ูุฎูุงู ุฏุฑ ุงู ูพุณุช ุตุญุจุช ฺฉูู ุจุง ููฺฉ ุจู ูููู ุชุชุฑ ูุฑุงุฑ ุฏุงุฏู.</p>

<ul>
  <li><a href="#subject">ุดุฑุญ</a></li>
  <li><a href="#how-to-create-a-Promise">ุณุงุฎุชู ฺฉ Promise</a></li>
  <li><a href="#how-to-user-promise">ุงุณุชูุงุฏู ุงุฒ Promise</a></li>
  <li><a href="#chain-of-promises">ุฒูุฌุฑู Promiseูุง</a></li>
  <li><a href="#asynchronous-promise">ูพุฑุงูุณโูุง Asynchronous ูุณุชูุฏ</a></li>
  <li><a href="#promises-in-variety-of-js">ูพุฑุงูุณ ุฏุฑ ES5ุ ES6, ES7</a>
    <ul>
      <li><a href="#promise-in-es5">ES5 - ุฏุฑ ุงฺฉุซุฑ ูุฑูุฑฺฏุฑูุง ูพุดุชุจุงู ูุดู</a></li>
      <li><a href="#promise-in-es6">ES6 - ุฏุฑ ูุฑูุฑฺฏุฑูุง ูุฏุฑูุ ู NodeJs v6 ูพุดุชุจุงู ูุดู</a></li>
      <li><a href="#promise-in-es7">ES7 - ุงุณุชูุงุฏู ุงุฒ Async Await ุณูุชฺฉุณ ุฑู ูุงุจู ุฎููุฏู ูฺฉูู</a></li>
    </ul>
  </li>
  <li><a href="#when-and-why-promises">ฺุฑุง ู ฺู ูููุน ุงุฒ Promise ุงุณุชูุงุฏู ฺฉููุ</a></li>
  <li><a href="#callback">ุฏูุง ูุจู ุงุฒ ูพุฑุงูุณ: Callback</a></li>
  <li><a href="#scape-from-callback-hell">ูุฑุงุฑ ุงุฒ Callback Hell</a></li>
  <li><a href="#observable">ุนุถู ุฌุฏุฏ ุงู ุฎุงููุงุฏู: Observables</a></li>
  <li><a href="#conclusion">ูุชุฌูโฺฏุฑ</a></li>
</ul>

<h2 id="subject">ุดุฑุญ</h2>

<p>ุจุฒุงุฑู ููู ุงูู ฺฉุงุฑุ ูพุฑุงูุณ ุฑู ุจุง ุทุฑุญ ฺฉ ูุซุงู ุจุฑุงุชูู ุณุงุฏู ฺฉูู:</p>

<blockquote>
  <p>ูุฑุถ ฺฉูุฏ ู <strong>ุจฺู</strong> ูุณุชุฏ. ู <strong>ูุงุฏุฑุชูู</strong> ุจูุชูู <strong>ููู ูุฏู</strong> ฺฉู ููุชู ุฏฺฏู ู <strong>ฺฏูุด ุฌุฏุฏ</strong> ุจุฑุงุชูู ุจุฎุฑู.</p>
</blockquote>

<p>ุดูุง ุงููุง ููโุฏููุฏ ฺฉู ุขุง ููุชู ุฏฺฏู ู ฺฏูุด ุจุฑุงุชูู ูุฎุฑู ุง ููุ ุซุงูุง ุงูฺฉู ุขุง ูุงูุนุง ูุงุฏุฑุชูู ุจุฑุง ุดูุง ู ฺฏูุด ุฌุฏุฏ ูุฎุฑูุ ุซุงูุซุง ููฺฉูู ุงุตูุง ุงูู ููุชู ุงุฒ ุฏุณุชุชูู ูุงุฑุงุญุช ุจุงุดู ู ฺฉูุง ุจุฎุงู ุฎุฑุฏ ฺฏูุด ุจุดู!</p>

<p>ุงู ฺฉุงููโุชุฑู ูุซุงู ุจูุฏ ฺฉู ุงุฒ Promise ูโุชููุณุชู ุจุฒูู. ูุฑ ูพุฑุงูุณ ณูุถุนุช ุฏุงุฑู:</p>

<ol>
  <li>ูพุฑุงูุณ ุฏุฑ ุญุงู ุจุฑุฑุณู <strong>Pending</strong>: ุดูุง ููโุฏููุฏ ฺฉู ุขุง ููุชู ุฏฺฏู ุจุฑุงุชูู ฺฏูุด ูุฎุฑู ุง ูู.</li>
  <li>ูพุฑุงูุณ ุญู ุดุฏู <strong>Resolved</strong>: ูุงุฏุฑุชูู ูุงูุนุง ู ฺฏูุด ุฌุฏุฏ ุจุฑุงุชูู ุฎุฑุฏู.</li>
  <li>ูพุฑุงูุณ ุฑุฏ ุดุฏู <strong>Rejected</strong>: ูุงุฏุฑุชูู ุจุฑุงุชูู ฺฏูุด ุฌุฏุฏ ูุฎุฑุฏูุ ฺูู ูุงูุนุง ุงุฒ ุฏุณุชุชูู ูุงุฑุงุญุช ุจูุฏู.</li>
</ol>

<p>ุญุงูุง ฺฉู ุจุง ููููู ู ุญุงูุชโูุง ูพุฑุงูุณ ุขุดูุง ุดุฏุฏุ ุจุฑู ุจุจูู ฺฉู ฺุฌูุฑ ูุดู ุงุฒุด ุงุณุชูุงุฏู ฺฉุฑุฏ.</p>

<h2 id="how-to-create-a-Promise">ุณุงุฎุชู ฺฉ Promise</h2>

<p>ุงุฌุงุฒู ุจุฏุฏ ุฏุฑ ููู ุงููู ูุฏูุ ฺุฒูุง ฺฉู ุจุงูุง ฺฏูุชู ุฑู ุจู ฺฉุฏ ุฌุงูุง ุงุณฺฉุฑูพุช ุชุจุฏู ฺฉูู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="cm">/* ES6 */</span>
<span class="kd">let</span> <span class="nx">isMomHappy</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">//Promise</span>
<span class="kd">let</span> <span class="nx">willGetNewPhone</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">isMomHappy</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">phone</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">brand</span><span class="p">:</span> <span class="s1">'iPhone X'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'gray'</span>
      <span class="p">};</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span> <span class="c1">//fulfilled</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">reason</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Mom is angry.'</span><span class="p">)</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span> <span class="c1">//reject</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
</div>

<p>ูฺฉุฑ ูฺฉูู ฺฉู ุฎูุฏุด ุจู ุงูุฏุงุฒู ฺฉุงู ฺฏูุง ูุณุช.</p>

<ol>
  <li>
    <p>ูุง ฺฉ ูุชุบุฑ ุจููู ุจูุงู <code class="highlighter-rouge">isMomHappy</code> ุฏุงุฑูุ ฺฉู ุจุฑุงููู ูุดุฎุต ูฺฉูู ุขุง ูุงูุงู OK ูุณุช ูุงุณู ุฎุฑุฏู ุง ูู.</p>
  </li>
  <li>
    <p>ู ูพุฑุงูุณ ูู ุจูุงู <code class="highlighter-rouge">willGetNewPhone</code> ุฏุงุฑู. ฺฉู ุงู ูพุงุฑูุณุ ูู ูุชููู ุญู <code class="highlighter-rouge">Resolved</code> ุจุดู (ูุงูุงู ุจุฑุงุช ู ฺฏูุด ุฌุฏุฏ ุจุฎุฑู)ุ ูู ูุชููู ุฑุฏ <code class="highlighter-rouge">Rejected</code> ุจุดู (ูุงูุงู ุงุฒ ุฏุณุชุช ุนุตุจุงููุ ู ุนูุฑุง ุจุฑุงุช ฺฏูุด ุฌุฏุฏ ุจุฎุฑู).</p>

    <p>ฺฉ syntax ุงุณุชุงูุฏุงุฑุฏ ุจุฑุง ููุดุชู <code class="highlighter-rouge">Promise</code> ุฌุฏุฏ ูุฌูุฏ ุฏุงุฑู ฺฉู ุจุฑ ุงุณุงุณ <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">ุฏุงฺฉูููุช MDN</a>ุ ุงู ุณูุชฺฉุณ ุงูุฌูุฑู:</p>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//Promise syntax looks like this</span>
<span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span> <span class="cm">/* executor */</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span> <span class="p">);</span>
</code></pre>
</div>

<p>ุชููุง ฺุฒูุง ฺฉู ูุงุฒูู ุจุฎุงุทุฑ ุจุณูพุงุฑู ุงู ฺฉูุ ููุช ูุชุฌู ฺฉุงุฑ ููููุชโุขูุฒูุ ุจุงุฏ ูุชุฏ <code class="highlighter-rouge">resolve(your_success_value)</code> ุฑู ูุฑุงุฎูุงู ฺฉุฑุฏูุ ู ุจู ูุฑ ุฏูู ุงฺฏู ูุชุฌู ููููุชโุขูุฒ ูุณุชุ ุจุงุฏ ูุชุฏ <code class="highlighter-rouge">reject(your_fail_value)</code> ุฑู ูุฑุงุฎูุงู ฺฉูุฏ. ูุฑุฏู ุงููุง ุจุงุฏ ุฏุฑ ุฏุงุฎู ูุชุฏ <code class="highlighter-rouge">Promise</code> ุงูุฌุงู ุจุดู.
   ููููุทูุฑ ูู ฺฉู ุฏุฑ ูุซุงู ูโุจูุฏ ุงุฒููุฌุง ฺฉู ูุงูุงู ุนุตุจุงู ุจูุฏุ ูุง ูุฌุจูุฑ ุดุฏู ุฏุฑุฎูุงุณุช ุฑู ุฑุฏ ฺฉุฑุฏู ู ุจุง ูุฑูุงุฎูุงู ูุชุฏ <code class="highlighter-rouge">reject(reason)</code> ู ูพุงุณ ฺฉุฑุฏู ููุฏุงุฑ reason ุงู ููููู ุฑู ุจู ุณุฑุงูุฌุงู ุจุฑุณููู. ุงูุจุชูุ ุงฺฏุฑูู ูุงูุงู ุงูฺฉ ุจูุฏ ู ฺฏูุด ุฌุฏุฏ ุฑู ุฎุฑุฏุ ุจุง ูุฑุงุฎูุงู ูุชุฏ <code class="highlighter-rouge">resolve</code> ุจู ููุฑุงู ููุฏุงุฑ JSON ุงุฒ ูุดุฎุตุงุช ฺฏูุด ุฎุฑุฏุงุฑ ุดุฏูุ ูุชุฌู <strong>ููู</strong> ุฑู ุงุนูุงู ูโฺฉุฑุฏู.</p>

<h2 id="how-to-user-promise">ุงุณุชูุงุฏู ุงุฒ Promise</h2>

<p>ุญุงูุง ฺฉู ูููุฏู ฺุทูุฑ ูุดู ู ูพุฑุงูุณ ุณุงุฎุชูุ ุจูุชุฑู ูุญูู ุงุณุชูุงุฏู ฺฉุฑุฏู ุงุฒุด ุฑู ูู ุงุฏ ุจฺฏุฑู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="cm">/* ES6 */</span>
<span class="p">...</span>
<span class="c1">// call our promise</span>
<span class="kd">let</span> <span class="nx">askMom</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">willGetNewPhone</span>
		<span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fulfilled</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//yay, you got a new phone</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fulfilled</span><span class="p">);</span>
			<span class="c1">//output: { brand: 'iPhone X', color: 'gray' }</span>
		<span class="p">}).</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//oops, mom don't buy it</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
			<span class="c1">//output: 'Mom is angry.'</span>
		<span class="p">});</span>
<span class="p">}</span>

<span class="nx">askMom</span><span class="p">();</span>
</code></pre>
</div>

<p>ุฏุฑ ุงูุฌุง ูุง ูุชุฏ <code class="highlighter-rouge">askMom</code> ุฑู ูุฑุงุฎูู ูฺฉูู. ู ุฏุฑ ุฏุงุฎู ุงููุ ูุชุฏ ูพุฑุงูุณ ฺฉู ุณุงุฎุชู ุจูุฏูุ ุนู <code class="highlighter-rouge">willGetNewPhone</code>ุ ุฑู ุตุฏุง ูุฒูู.</p>

<p>ูุง ูุฎูุงู ููุช ฺฉู ูพุฑุงูุณ ุจูููู ุฌูุงุจ ูุฏู ุจุชููู ุงฺฉุดู ููุงุณุจ ุฑู ูุดูู ุจุฏู. ุจุฑุง ููุงูุน ฺฉู ูพุงุณุฎ <strong>resolve</strong> ูุณุช ูุชุฏ <code class="highlighter-rouge">then</code> ุงุณุชูุงุฏู ูุดูุ ู ุจุฑุง ููุงูุน ฺฉู ูพุงุณุฎ <strong>reject</strong> ูุณุชุ ูุชุฏ <code class="highlighter-rouge">catch</code> ุตุฏุง ูุดู.</p>

<p>ุฏุฑ ุงู ูุซุงูุ ุฏุฑ ุฏุงุฎู <code class="highlighter-rouge">.then</code> ูุง ูุชุฏ <code class="highlighter-rouge">function(fulfilled) {โฆ}</code> ุฑู ุฏุงุฑู. ููุฏุงุฑ ุงู ูุชุบุฑู <code class="highlighter-rouge">fulfilled</code> ฺูุ ุฏููุง ูููู ฺุฒู ฺฉู ุดูุง ุฏุฑ ูุชุฏ <code class="highlighter-rouge">resolve(your-success_value)</code> ูพุงุณ ฺฉุฑุฏู. ฺฉู ุฏุฑ ุงูุฌุง ูููู ูุดุฎุตุงุช ฺฏูุด ุฌุฏุฏู ุณุช.</p>

<p>ูููุทูุฑ ุฏุฑ ุฏุงุฎู <code class="highlighter-rouge">.catchโ</code> ูู ูุชุฏ <code class="highlighter-rouge">function(error) {โฆ}</code> ุฑู ุฏุงุฑู. ฺฉู ููุฏุงุฑ <code class="highlighter-rouge">error</code> ุจุฑุงุจุฑ ุจุง ููุฏุงุฑ ูุณุช ฺฉู ูุง ุจุง <code class="highlighter-rouge">reject(your_fail_value)</code> ูพุงุณุด ฺฉุฑุฏู. ุฏุฑ ุงู ูุซุงู ููุฏุงุฑ error ุจุฑุงุจุฑ ุจูุฏ ุจุง ุฏูู ุฑุฌฺฉุช ุดุฏู ุฏุฑุฎูุงุณุช.</p>

<p>ุงุฌุงุฒู ุจุฏุฏ ฺฉุฏูุง ฺฉู ุชุง ุงูุงู ุฒุฏู ุฑู ุงุฌุฑุง ฺฉูู ู ูุชุฌู ฺฉุงุฑ ุฑู ุจุจูู.
ุงุฌุฑุง ุฏูู ุงุฒ <a href="https://jsbin.com/luceriy/4/edit?js,console">ุงู ููฺฉ</a>.</p>

<p><img src="/assets/img/post/2017-11-27/js-promise-mom-promise-demo.gif" alt="Mom Promise Demo" /></p>

<h2 id="chain-of-promises">ุฒูุฌุฑู Promiseูุง</h2>

<p>ูพุฑุงูุณโูุง ูุงุจูุช ุฒูุฌุฑู (ูุชูุงู) ุดุฏู ุฑู ุฏุงุฑูุฏ.</p>

<p>ุจุฑุง ูุซุงูุ ูุฑุถ ฺฉูุฏ ุดูุง ูููู ฺฉูุฏฺฉ ูุซุงู ูุจู ูุณุชุฏ. ุญุงูุง ุจู ุฏูุณุชุชูู <strong>ููู ูโุฏุฏ</strong> ฺฉู ููุช ูุงูุงู ูุงุณุชูู ฺฏูุด ุฌุฏุฏ ุฑู ุฎุฑุฏุ ุจูุด <strong>ูุดูู ุจุฏุฏ.</strong></p>

<p>ุฎุจุ ูพุณ ุจุฑู ูพุฑุงูุณ ุจุนุฏ ุฑู ุจููุณู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">...</span>

<span class="c1">// 2nd promise</span>
<span class="kd">let</span> <span class="nx">showNewPhone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span>
		<span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">){</span>
			<span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">'Hey friend, I have a new '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">brand</span> <span class="o">+</span> <span class="s1">'.'</span><span class="p">;</span>
			<span class="nx">resolve</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p><strong>ูฺฉุงุช:</strong></p>

<p>ุฏุฑ ุงู ูุซุงู ุงุญุชูุงูุง ูุชูุฌู ุดุฏุฏ ฺฉู ูุง ุงุฒ <code class="highlighter-rouge">reject</code> ุงุณุชูุงุฏู ูฺฉุฑุฏู. ุฎุจ ุงู ูุชุฏ ู ฺุฒ optional ู ุงูุชุฎุงุจูุ ููุท ูููุน ฺฉู ูุงุฒ ูุณุช ุงุฒุด ุงุณุชูุงุฏู ฺฉูุฏ.</p>

<p>ูุง ุญุช ูุชููู ุจุง ุงุณุชูุงุฏู ุงุฒ <code class="highlighter-rouge">Promise.solve</code> ุงู ูุชุฏ ุฑู ุณุงุฏูโุชุฑ ูู ุจููุณู .</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// shorten it</span>
<span class="p">...</span>

<span class="c1">// 2nd promise</span>
<span class="kd">let</span> <span class="nx">showNewPhone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">'Hey friend, I have a new '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">brand</span> <span class="o">+</span><span class="s1">'.'</span><span class="p">;</span>
	<span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
</div>

<p>ุฎุจุ ุญุงูุง ููุช ุฒูุฌุฑ ฺฉุฑุฏู ูพุฑุงูุณโูุงุณุช. ุดูุง - ุงูู ุจฺู ุฏุงุณุชุงู - ููุท ููุช ูโุชููุฏ ุจู ุฏูุณุชุชูู ุงูู ฺฏูุด ุฌุฏุฏ ุฑู ูุดูู ุจุฏุฏ <code class="highlighter-rouge">showNewPhone</code>ุ ุจุนุฏ ุงุฒ ุงูฺฉู ูุงูุงู ุงูู ฺฏูุด ุฑู ูุงุณุชูู ุฎุฑุฏู ุจุงุดู <code class="highlighter-rouge">willGetNewPhone</code>.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">...</span>

<span class="c1">// call our promise</span>
<span class="kd">let</span> <span class="nx">askMom</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">willGetNewPhone</span>
		<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">showNewPhone</span><span class="p">)</span> <span class="c1">// chain it here</span>
		<span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fulfilled</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//yay, you got a new phone</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fulfilled</span><span class="p">);</span>
			<span class="c1">//output: 'Hey friend, I have a new gray iPhone X.'</span>
		<span class="p">}).</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//oops, mom don't buy it</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
			<span class="c1">//output: 'Mom is angry.'</span>
		<span class="p">});</span>
<span class="p">}</span>
</code></pre>
</div>

<p>ุจู ููู ุฑุงุญุช ูโุชููุฏ ูพุฑุงูุณโูุง ุฑู ุจู ููู ุฒูุฌุฑ ฺฉูุฏ.</p>

<h2 id="asynchronous-promise">ูพุฑุงูุณโูุง Asynchronous ูุณุชูุฏ</h2>

<p>ุงู ุฎู ูุงุถุญู ฺฉู ูพุฑุงูุณโูุง ุขุณูฺฉุฑูู ูุณุชู. ุงุตูุง ุงุฌุงุฒู ุจุฏุฏ ุจุฑุง ุงุซุจุงุช ุงู ููุถูุน ฺูุฏุชุง ูุงฺฏ ุจูุฏุงุฒู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// call our promise</span>
<span class="kd">let</span> <span class="nx">askMom</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'before asking Mom'</span><span class="p">);</span> <span class="c1">// log before</span>
    <span class="nx">willGetNewPhone</span>
		<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">showNewPhone</span><span class="p">)</span>
		<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">fulfilled</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fulfilled</span><span class="p">);</span>
		<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
		<span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'after asking mom'</span><span class="p">);</span> <span class="c1">// log after</span>
<span class="p">}</span>
</code></pre>
</div>

<p>ูฺฉุฑ ูโฺฉูุฏ ูุชุฌูโ ฺ ูุดูุ ุงุญุชูุงูุง ุงูุชุธุงุฑ ุฏุงุฑุฏ ููฺู ฺุฒ ุฏุฑุงูุช ฺฉูุฏ:</p>

<pre><code class="language-Log">1. before asking Mom
2. Hey friend, I have a new black Samsung phone.
3. after asking mom
</code></pre>

<p>ูู ฺุฒ ฺฉู ูุงูุนุง ุฏุฑุงูุช ูฺฉูู ุงูู:</p>

<pre><code class="language-Log">1. before asking Mom
2. after asking mom
3. Hey friend, I have a new black Samsung phone.
</code></pre>

<p><img src="/assets/img/post/2017-11-27/js-promise-chain-demo.gif" alt="Chain Demo" /></p>

<p><strong>ฺุฑุงุ ฺูู ุฒูุฏฺฏ (ุง JS) ููุชุธุฑ ูฺ ฺฉุณ ููโูููู</strong></p>

<p>ุดูุงุ ุง ุฏุฑูุงูุน ูููู ุจฺูุ ุงุฒ ุจุงุฒ ฺฉุฑุฏู ุฏุณุช ููโฺฉุดุฏ ูููุน ฺฉู ููุชุธุฑุฏ ุชุง ูุงูุงูุชูู ุจู ูููุด (ุฎุฑุฏู ููุจุงู ุฌุฏุฏ) ุนูู ฺฉููุ ุบุฑ ุงุฒ ุงููุ ุงู ูููู ฺุฒู ฺฉู ูุง ุจูุด ูฺฏู asynchronousุ ฺฉุฏ ฺฉุงููุง ุงุฌุฑุง ูุดูุ ุจุฏูู ุงูฺฉู ุณุฑูุณููู ุฑู ุจูุงฺฉ ฺฉูู ุง ููุชุธุฑ ุฌูุงุจ ุจุดู. ูุฑูููุน ุฌูุงุจ ุฑุณุฏุ ุจูุด ูุงฺฉูุด ููุงุณุจ ุฑู ูุดูู ูุฏู. ูุฑฺฉุงุฑ ฺฉู ูุฑุงุฑู ูููุน ุนูู ฺฉุฑุฏู ูุงูุงู ุจู ูููุด  ุงูุฌุงู ุจุฏุฏุ ููุท ฺฉุงูู ุจุฒุงุฑูุด ุฏุงุฎู <code class="highlighter-rouge">.then</code> ๐ .</p>

<h2 id="promises-in-variety-of-js">ูพุฑุงูุณ ุฏุฑ ES5ุ ES6, ES7</h2>

<p><b id="promise-in-es5">ES5 - ุฏุฑ ุงฺฉุซุฑ ูุฑูุฑฺฏุฑูุง ูพุดุชุจุงู ูุดู</b></p>

<p>ุณุฑูุณ ฺฉู ููุดุชู ุฏุฑ ุงฺฉุซุฑ ูุฑูุฑฺฏุฑูุง ู ุงูุจุชู ุฏุฑ NodeJs ูุงุจู ุงุณุชูุงุฏู ุงุณุช. ุงูุจุชู ุฏุฑ ES5 ุงู ุงุจุฒุงุฑ ูููุฌูุฑ ูุงุจู ุงุณุชูุงุฏู ูุณุช ู ุจุฑุง ุงุณุชูุงุฏู ุงุฒุด ุจุงุฏ ุงุฒ ูุงุจุฑุฑ <a href="http://bluebirdjs.com/docs/getting-started.html">Bluebird</a> ุงุณุชูุงุฏู ฺฉูุฏ. ุงูุจุชู ูุงุจุฑุฑ ูุนุฑูู ุฏฺฏูโุง ูู ุจุฑุง ุงูฺฉุงุฑ ูุณุช ุจู ุงุณู <a href="https://github.com/kriskowal/q">Q</a> ฺฉู ุชูุณุท Kris Kowal ุชูุณุนู ุฏุงุฏู ุดุฏู.</p>

<p><b id="promise-in-es6">ES6 - ุฏุฑ ูุฑูุฑฺฏุฑูุง ูุฏุฑูุ ู NodeJs v6 ูพุดุชุจุงู ูุดู</b></p>

<p>ุณุฑูุณ ฺฉู ููุดุชู ุจุตูุฑุช ูุชู ุฏุฑ ES6 ุงุฌุฑุง ูุดู ู ุงุญุชุงุฌ ุจู ูฺ ูุงุจุฑุฑ ุฎุงุฑุฌ ูุฌูุฏ ูุฏุงุฑู. ุงูุจุชู ูุง ุฏุฑ ES6 ูุชููู ุจุง ุงุณุชูุงุฏู ุงุฒ <code class="highlighter-rouge">fat arrow =&gt;</code> ูุงฺฉูฺฉุดูโูุง ฺฉุฏููู ุฑู ุณุงุฏูโุชุฑ ูู ุจููุณู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="cm">/* ES6 */</span>
<span class="kd">let</span> <span class="nx">isMomHappy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">//Promise</span>
<span class="kr">const</span> <span class="nx">willGetNewPhone</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">//fat arrow</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">isMomHappy</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">phone</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">brand</span><span class="p">:</span> <span class="s1">'iPhone X'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'gray'</span>
      <span class="p">};</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">reason</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Mom is angry.'</span><span class="p">)</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="kr">const</span> <span class="nx">showNewPhone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">'Hey friend, I have a new '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">brand</span> <span class="o">+</span><span class="s1">'.'</span><span class="p">;</span>
	<span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// call our promise</span>
<span class="kr">const</span> <span class="nx">askMom</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">willGetNewPhone</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">showNewPhone</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">fulfilled</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fulfilled</span><span class="p">))</span> <span class="c1">// fat arrow</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">));</span> <span class="c1">// fat arrow</span>
<span class="p">}</span>

<span class="nx">askMom</span><span class="p">();</span>
</code></pre>
</div>

<p>ุงฺฏู ุจุง ES6 ุขุดูุง ูุฏุงุฑุฏุ ุชูุฌู ฺฉูุฏ ฺฉู ูู ููู ูุชุบุฑ ูุง ฺฉู ูุงุจู ุชุบุฑ ุจูุฏูุฏ ุฑู ุจุง <code class="highlighter-rouge">let</code> ูุดุฎุต ฺฉุฑุฏู ู ุงูููุง ุฑู ูู ฺฉู immutable ู ุจุฏูู ุชุบุฑ ูุณุชูุฏ ุฑู ุจุง <code class="highlighter-rouge">const</code> ูุดุฎุต ฺฉุฑุฏู. ููู ูุงูฺฉุดููุง ูู ฺฉู ุจุตูุฑุช <code class="highlighter-rouge">function(arguments)</code> ุจูุฏ ุฑู ุจู <code class="highlighter-rouge">(argument) =&gt;</code> ุชุบุฑ ุฏุงุฏู. ุจุฑุง ุขุดูุง ุจุดุชุฑ ุจุง ES6 ูโุชููุฏ ููฺฉโูุง ุฒุฑ ุฑู ูุทุงูุนู ฺฉูุฏ:</p>

<ul>
  <li>
    <p><a href="https://strongloop.com/strongblog/es6-variable-declarations/">JavaScript ES6 Variable Declarations with let and const</a></p>
  </li>
  <li>
    <p><a href="https://strongloop.com/strongblog/an-introduction-to-javascript-es6-arrow-functions/">An introduction to Javascript ES6 arrow functions</a></p>
  </li>
</ul>

<p><b id="promise-in-es7">ES7 - ุงุณุชูุงุฏู ุงุฒ Async Await ุณูุชฺฉุณ ุฑู ูุงุจู ุฎููุฏู ูฺฉูู</b></p>

<p>ุงฺฏู ูุฑุงุฑ ุจุงุดู ุงู ุณุฑูุณ ุฑู ุจุง ES7 ุจููุณูุ ูุชููู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชฺฏ ูุง <code class="highlighter-rouge">async</code> ู <code class="highlighter-rouge">await</code> ฺฉุฏููู ุฑู ุชูุฒุชุฑ ฺฉูู. ุงูุทูุฑ ูุชููู <code class="highlighter-rouge">then</code> ู <code class="highlighter-rouge">catch</code> ุฑู ุงุฒ ฺฉุฏููู ุญุฐู ฺฉูู.</p>

<p>ูพุณ ฺุฒ ฺฉู ุฏุฑููุงุช ุจุงุฒููุณ ูฺฉูู ุฏุฑ ES7 ูุดู ุงู:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="cm">/* ES7 */</span>
<span class="kd">let</span> <span class="nx">isMomHappy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">//Promise</span>
<span class="kr">const</span> <span class="nx">willGetNewPhone</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">//fat arrow</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">isMomHappy</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">phone</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">brand</span><span class="p">:</span> <span class="s1">'iPhone X'</span><span class="p">,</span>
        <span class="na">color</span><span class="p">:</span> <span class="s1">'gray'</span>
      <span class="p">};</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">reason</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Mom is angry.'</span><span class="p">)</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="c1">//2nd promise</span>
<span class="nx">async</span> <span class="nx">showNewPhone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">'Hey friend, I have a new '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">color</span> <span class="o">+</span> <span class="s1">' '</span> <span class="o">+</span> <span class="nx">phone</span><span class="p">.</span><span class="nx">brand</span> <span class="o">+</span><span class="s1">'.'</span><span class="p">;</span>
			<span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1">//call our promise</span>
<span class="nx">async</span> <span class="nx">askMom</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="k">try</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'before asking Mom'</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">phone</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">willIGetNewPhone</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">showNewPhone</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'after asking mom'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">(</span><span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">askMom</span><span class="p">();</span>
<span class="p">})();</span>
</code></pre>
</div>

<ol>
  <li>ูุฑูููุน ฺฉู ูุงุฒ ุฏุงุดุชุฏ ู ูพุฑุงูุณ return ฺฉูุฏุ ููุท ฺฉุงูู ูุชุฏ ููุฑุฏ ูุธุฑ ุฑู ุจุง <code class="highlighter-rouge">async</code> ูุดุงูู ฺฏุฐุงุฑ ฺฉูุฏ.
ุจุฑุง ูุซุงู:
<code class="highlighter-rouge">async function showNewPhone(phone)</code></li>
  <li>ูุฑูููุน ฺฉู ุงุญุชุงุฌ ุฏุงุดุชุฏ ูพุฑุงูุณ ุฑู ูุฑุงุฎูุงู ฺฉูุฏุ ฺฉุงูู ูุจูุด ุจุง <code class="highlighter-rouge">await</code> ูุดุงููโฺฏุฐุงุฑ ฺฉูุฏ. ุจุฑุง ูุซุงู:
<code class="highlighter-rouge">let phone = await willIGetNewPhone;</code> ู <code class="highlighter-rouge">let message = await showNewPhone(phone);</code>.</li>
  <li>ู ุฏุฑ ููุงุช ุจุง ุงุณุชูุงุฏู ุงุฒ <code class="highlighter-rouge">try { ... } catch(error) { โฆ }</code> ูุชููุฏ ูุถู <strong>resolved</strong> ู <strong>rejected</strong> ูพุฑุงูุณ ุฑู ูู ููุฏู ฺฉูุฏ.</li>
</ol>

<h2 id="when-and-why-promises">ฺุฑุง ู ฺู ูููุน ุงุฒ Promise ุงุณุชูุงุฏู ฺฉููุ</h2>

<p>ูุงูุนุง ฺุฑุง ุจู ูพุฑุงูุณ ุงุญุชุงุฌ ุฏุงุฑูุ ุฏูุง ูุจู ุงุฒ ูพุฑุงูุณ ฺู ุดฺฉู ุจูุฏุ ุจุฒุงุฑุฏ ูุจู ุงุฒ ุฌูุงุจ ุฏุงุฏู ุจู ุงู ุณูุงู ูุงุ ฺฉู ุจุฑฺฏุฑุฏู ุนูุจ ู ุจุจูู ูุจูุง ุงูุถุงุน ุฑู ฺุฌูุฑ ููุฏู ูโฺฉุฑุฏู.</p>

<p><strong>ูุชุฏ ูุนููู ุจุฑุง ุฌูุน ุฏู ุนุฏุฏ</strong></p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers normally</span>
<span class="kd">function</span> <span class="nx">add</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// you get result = 3 immediately</span>
</code></pre>
</div>

<p><strong>ูุชุฏ Async ุจุฑุง ุฌูุน ุฏู ุนุฏุฏ</strong></p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers remotely</span>
<span class="c1">// get the result by calling an API</span>
<span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">getAddResultFromServer</span><span class="p">(</span><span class="s1">'http://www.example.com?num1=1&amp;num2=2'</span><span class="p">);</span>
<span class="c1">// you get result  = "undefined"</span>
</code></pre>
</div>

<p>ุงฺฏู ุดูุง ุนุฏุฏูุงุฑู ุจุง ูุชุฏ ูุนููู ุฌูุน ุจุฒูุฏุ ูููู ูุญุธู ุฌูุงุจุดู ูโฺฏุฑุฏ. ุงูุง ุจุฑุนฺฉุณุโ ููุช ูุฎูุงุฏ ุจู ฺฉ API ุฑฺฉูุฆุณุช ุจุฒูุฏ ฺฉู ุงู ุฏูุชุง ุนุฏุฏ ุฑู ุจุฑุงุชูู ุฌูุน ุจุฒููุ ุงูููููุน ุจุงุฏ ุตุจุฑ ฺฉูุฏ ุชุง ุฌูุงุจ ุจุฑฺฏุฑุฏูุโู ููโุชููุฏ ูููู ูุญุธู ุจู ุฌูุงุจุชูู ุจุฑุณุฏ.</p>

<p>ููุฑุฏ ุฏฺฏูโุง ูู ูุฌูุฏ ุฏุงุฑูุ ุงฺฏู ุดูุง ุจู ุงู ุดฺฉู ุจุฎูุงูุฏ ุฌูุงุจุชูู ุฑู ุจฺฏุฑุฏุ ูุนููู ูุณุช ฺฉู ุฌูุงุจ ุณุฑูุฑ ฺูุ ู ููฺฉูู ุญุช ุณุงุช ุฏุงู ุจุงุดูุ ุง ุณุฑุนุช ูพุงุณุฎฺฏู ุฎู ฺฉู ุจุงุดูุ ุง ูุฑ ูุดฺฉู ุฏฺฏูโุง. ู ุงูู ูู ูุฏููู ฺฉู ุดูุง ูุฑุงุฑ ูุณุช ฺฉู ุณุฑูุณุชูู ุฑู ุจูุงฺฉ ุง ูุฑุฒ ฺฉูุฏ ู ููุชุธุฑ ูุงุณุชุฏ ุชุง ุจูฺฉู ุจูุงุฎุฑู ุฌูุงุจ ุจุฑุณู.</p>

<p>ูุฑุงุฎูุงู APIูุงุ ุฏุงูููุฏ ฺฉุฑุฏู ูุงูุ ุฎูุงูุฏู ูุงู ู ฺุฒูุง ูุซู ุงูุ ููุงุฑุฏ ูุณุชูุฏ ฺฉู ุจุงุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ ูุง Async ุจุงูุงุดูู ฺฉุงุฑ ฺฉุฑุฏ.</p>

<h2 id="callback">ุฏูุง ูุจู ุงุฒ ูพุฑุงูุณ: Callback</h2>

<p>ุขุง ุญุชูุง ุจุงุฏ ุงุฒ ูพุฑุงูุณ ุจุฑุง ูุฑุงุฎูุงู ูุชุฏูุง Async ุงุณุชูุงุฏู ฺฉููุ ุฎุฑ. ูุจู ุงุฒ ูพุฑุงูุณุ ูุง ุงุฒ callback ุงุณุชูุงุฏู ูโฺฉุฑุฏู.
ูุงูฺฉุดู callback ููุท ุจุฑุง ููุงูุน ฺฉู ูุฎูุงูู ูุชุฌู ุจุงุฒฺฏุดุช ุฑู ุฏุฑุงูุช ฺฉูู ุจู ฺฉุงุฑ ูุฑู. ุงุฌุงุฒู ุจุฏุฏ ุจุง ุชูุฌู ุจู ฺุฒ ฺฉู ุญุงูุง ุฑุงุฌุน ุจู ฺฉุงูโุจฺฉ ูุฏูููุ ูุชุฏ ูุจู ุฑู ุจุงุฒููุณ ฺฉูู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers remotely</span>
<span class="c1">// get the result by calling an API</span>

<span class="kd">function</span> <span class="nx">addAsync</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use the famous jQuery getJSON callback API</span>
    <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">'http://www.example.com'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">num1</span><span class="p">:</span> <span class="nx">num1</span><span class="p">,</span>
        <span class="na">num2</span><span class="p">:</span> <span class="nx">num2</span>
    <span class="p">},</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">addAsync</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// callback</span>
    <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span> <span class="c1">// you get result = 3 here</span>
<span class="p">});</span>
</code></pre>
</div>

<p>ุฎุจุ ุจุง ุงู ุชูุตูุ ูพุณ ุฏฺฏู ุจู ูพุฑุงูุณ ฺู ุงุญุชุงุฌ ุฏุงุฑูุ</p>

<p><strong>ุงฺฏุฑ ูุฑุงุฑุจุงุดู ฺฉุณุฑ ุงฺฉุดูโูุง ูุชูุงู ุขุณูฺฉุฑูู ุงูุฌุงู ุจุฏุฏุ ฺฺฉุงุฑ ูโฺฉูุฏุ</strong></p>

<p>ุฎุจ ุจุฒุงุฑุฏ ุจุจูู ฺ ุฏุงุฑูุ ูุฑุงุฑ ุญุงูุง ุจุฌุง ุงูฺฉู ู ุจุงุฑ ุนูู ุฌูุน ุฑู ุงูุฌุงู ุจุฏูุ ณุจุงุฑ ุงูฺฉุงุฑู ุงูุฌุงู ุจุฏู. ุจุง ฺฉุฏ ุฒุฏู ูุนููู ููฺู ฺุฒ ูุดู:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers normally</span>

<span class="kd">let</span> <span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">;</span>

 <span class="kd">function</span> <span class="nx">add</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">resultA</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// you get resultA = 3 immediately</span>
<span class="nx">resultB</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// you get resultB = 6 immediately</span>
<span class="nx">resultC</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="nx">resultB</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// you get resultC = 10 immediately</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'total'</span> <span class="o">+</span> <span class="nx">resultC</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">);</span>
</code></pre>
</div>

<p>ุญุงูุง ุงฺฏู ุจุฎูุงูู ูููู ฺฉุงุฑู ุจุง callback ุงูุฌุงู ุจุฏู ฺุทูุฑุ</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers remotely</span>
<span class="c1">// get the result by calling an API</span>

<span class="kd">let</span> <span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">addAsync</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use the famous jQuery getJSON callback API</span>
    <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">'http://www.example.com'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">num1</span><span class="p">:</span> <span class="nx">num1</span><span class="p">,</span>
        <span class="na">num2</span><span class="p">:</span> <span class="nx">num2</span>
    <span class="p">},</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">addAsync</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// callback 1</span>
    <span class="nx">resultA</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span> <span class="c1">// you get result = 3 here</span>

    <span class="nx">addAsync</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// callback 2</span>
        <span class="nx">resultB</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span> <span class="c1">// you get result = 6 here</span>

        <span class="nx">addAsync</span><span class="p">(</span><span class="nx">resultB</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="c1">// callback 3</span>
            <span class="nx">resultC</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span> <span class="c1">// you get result = 10 here</span>

            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'total'</span> <span class="o">+</span> <span class="nx">resultC</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>ุงู syntax ุงุตูุง ูุฒุฑูุฑูุฏู ูุณุช. ุฎู ุฏฺฏู ุจุฎูุงู ุฎูุดุจู ุจุงุดูุ ูุซู ุงูุฑุงู ุซูุงุซู ุดุฏู! ๐ ุงูุง ุชูุณุนู ุฏููุฏูโูุง ุฎุงุฑุฌ ุจู ููฺู ฺุฒ ูฺฏู <Callback Hell="">ุ ุจุฎุงุทุฑ ุงูฺฉู ูุฑ ฺฉุงูโุจฺฉ ุฏุฑ ุฏุงุฎู ุดฺฉู ฺฉุงูโุจฺฉ ุฏฺฏูโุง ูุฑุงุฑ ฺฏุฑูุชู. ุชุตูุฑ ฺฉูุฏ ฺฉู ฑฐุชุง ฺฉุงูโุจฺฉ ุฏุงุฑุฏุ ฺฉุฏุชูู ฑฐ ุจุงุฑ ููุณุช ูโุดุฏ!</Callback></p>

<h2 id="scape-from-callback-hell">ูุฑุงุฑ ุงุฒ Callback Hell</h2>

<p>ู ุฏุฑ ุงู ูุญุธู ุจูุฏ ฺฉู ููุฑูุงู ุฏุงุณุชุงู ูุงุ Promise ูุงุฑุฏ ุดุฏ ๐จ๐ปโ๐ค. ุจุฒุงุฑุฏ ุจุจูู ฺฉุฏููู ุญุงูุง ฺุทูุฑ ูุดู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// add two numbers remotely using observable</span>

<span class="kd">let</span> <span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use ES6 fetch API, which return a promise</span>
    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com?num1=${num1}&amp;num2=${num2}`)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="p">}</span>

<span class="nx">addAsync</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">resultA</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">resultA</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">success</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">resultB</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">resultB</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">success</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">resultC</span> <span class="o">=</span> <span class="nx">success</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">resultC</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">success</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'total: '</span> <span class="o">+</span> <span class="nx">success</span><span class="p">)</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">)</span>
    <span class="p">});</span>
</code></pre>
</div>

<p>ุจุง ุงุณุชูุงุฏู ุงุฒ ูพุฑุงูุณโูุงุ ูุง ุจุฌุง callback ุงุฒ <code class="highlighter-rouge">.then</code> ฺฉูฺฉ ูโฺฏุฑู. ุฏุฑ ููู ูฺฏุงู ุงูู ูุชูุฌู ูุดู ฺฉู ฺูุฏุฑ ฺฉุฏูุงููู ุจุง ุญุฐู ฺฉุงูโุจฺฉโูุง nested ุง ุชูุฏุฑุชู ุชุฑูุชูุฒุชุฑ ุดุฏู. ุงูุจุชู ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ุณูฺฉุชุณ <code class="highlighter-rouge">asyn</code> ู <code class="highlighter-rouge">await</code> ฺฉุฏูุงููู ุจุงุฒู ุณุงุฏูโุชุฑ ู ุชุฑูุชูุฒุชุฑ ุงุฒ ฺุฒ ฺฉู ุงูุงู ูุณุช ูุดู. ุฏฺฏู ูุซุงู ุงู ุฑู ูู ูุฒุงุฑู ุจู ุนูุฏู ุฎูุฏุชูู ๐ฌ๐.</p>

<p><img src="/assets/img/post/2017-11-27/js-promise-relaxing.gif" alt="Relaxing" /></p>

<h2 id="observable">ุนุถู ุฌุฏุฏ ุงู ุฎุงููุงุฏู: Observables</h2>

<p>ูุจู ุงุฒ ุงูฺฉู ุฎู ุจุง ูพุฑุงูุณ ุญุงู ฺฉุฑุฏู ู ฺฉู ุฎูู ูุงุท ฺฉูุฏุ ุงู ุฑู ุจุงุฏ ุงุถุงูู ฺฉููุ ู ฺุฒ ูุฌูุฏ ุฏุงุฑู ฺฉู ูุถู ูุฏุฑุช ูุงูฺฉุดูโูุง async ุฑู ุงุฒ ุงู ฺฉู ูุณุช ูู ุขุณููุชุฑ ฺฉุฑุฏูุ ู ุจูุด ูฺฏู <code class="highlighter-rouge">Observable</code>.</p>

<p>ูุงุถุญุชุฑู ุชุนุฑู ฺฉู ูุชููู ุฑุงุฌุน ุจู Observabale ุจูุชูู ุจฺฏู ุงูู:</p>

<blockquote>
  <p>ูุงุจูโูุดุงูุฏู ุง Observable ฺฉ ุฌุฑุงู ุงุฒ ุฑูุฏุงุฏโูุง ุชูุจูู ฺฉู ูุชููู ูุชููู ุตูุฑ ุง ุจโููุงุช ุฑูุฏุงุฏ ุฑู ููุชุดุฑ ฺฉููุ ู ุงู ูุถู ูุชููู ูพุงุงู ุฏุงุดุชู ุง ูุฏุงุดุชู ุจุงุดู.</p>
</blockquote>

<p>ู ุงฺฏู ุจุฎูุงู ุณุงุฏูโุชุฑุด ฺฉูู:</p>

<blockquote>
  <p>ูุงูฺฉุดู Observable ุงุฒ ุฎูุฏุด ููุงุฏุฑ ุฑู ููุชุดุฑ ูฺฉููุ ู ุจุง ฺฉ <strong>Observer</strong> ุง ูุดุงูุฏูโฺฏุฑ ูุชููู ุจุดูู ู ุงู ููุฏุงุฑ ุฑู ุฑูุตูุฏ ฺฉูู. ุฏุฑ ูุชุฌู ูุฑูููุน ุงู Observabale ุงุฒ ุฎูุฏุด ฺุฒ ููุชุดุฑ ฺฉุฑุฏุ ุณุฑุน ูุชูุฌู ูุดู ู ูุชูุงุณุจ ุจุง ุงู ููุฏุงุฑุ ุฑโุงฺฉุดู ููุฑุฏูุธุฑ ุฑู ูุดูู ุจุฏู.</p>
</blockquote>

<p>ูุงูฺฉุดู ุง ููุงุฏุฑ Observable ุงุฒ ููููู  ReactiveX Programming ุงููุฏู ู ุฏุฑ ููู ุฒุจุงูโูุง ฺฉู ุงุฒ RX ูพุดุชุจุงู ูฺฉูู ูุฌูุฏ ุฏุงุฑูุ ุฏุฑ ุฌุงูุง ุงุณฺฉุฑูพุช ุจูุด ูฺฏู RxJs. ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ููฺฉโูุง ุฒุฑ ูุทุงูุจ ุฎูุจ ู ฺฉุงูู ุฏุงุฑูุฏ:</p>

<ul>
  <li><a href="http://reactivex.io/">ReactiveX</a></li>
  <li><a href="https://xgrommx.github.io/rx-book/index.html">RxJS v4.0</a></li>
  <li><a href="https://blog.pusher.com/building-realtime-applications-with-cyclejs-and-rxjs/">Building realtime applications with CycleJS and RxJS</a></li>
</ul>

<p>ู ุจุฑุง ุขุดูุง ุจุดุชุฑ ุจุง Observable ูพุดููุงุฏ ูฺฉูู ููฺฉโูุง ุฒุฑ ุฑู ูุทุงูุนู ฺฉูุฏ:</p>

<ul>
  <li><a href="http://reactivex.io/documentation/observable.html">Observable</a></li>
  <li><a href="https://xgrommx.github.io/rx-book/content/observable/index.html">Observable object</a></li>
  <li><a href="https://egghead.io/lessons/javascript-introducing-the-observable">Introducing the Observable</a></li>
  <li><a href="https://cycle.js.org/streams.html">Stream: Reactive Programming</a></li>
  <li><a href="https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87">Learning Observable By Building Observable</a></li>
</ul>

<p>ุงูุง ุจุฑฺฏุฑุฏู ุณุฑ ุจุญุซ ุฎูุฏููู. ฺฉุณุฑ ุชูุงูุชโูุง ุจู Observable ู Promise ูุฌูุฏ ุฏุงุฑู:</p>

<ul>
  <li>Observable ูุงุจูุช ูุบู ุดุฏู ุฏุงุฑู (Cancellable)</li>
  <li>Observable ุงุตููุง ุชูุจูู (Lazy)</li>
</ul>

<p>ูุชุฑุณูุ ุฏุฑ ุงุฏุงูู ู ูุซุงู ุฏุฑุจุงุฑู ุงูฺฉู ุงุฒ ุขุจุฒุฑูุจู ฺุทูุฑ ูุชููู ุงุณุชูุงุฏู ฺฉูู ุขูุฑุฏู. ุฏุฑ ูุซุงู ุฒุฑ ูู ุงุฒ ูุงุจูุชโูุง RxJs ุจุฑุง ูพุงุฏู ฺฉุฑุฏู Observable ุงุณุชูุงุฏู ฺฉุฑุฏู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">Observable</span> <span class="o">=</span> <span class="nx">Rx</span><span class="p">.</span><span class="nx">Observable</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use ES6 fetch API, which return a promise</span>
    <span class="kr">const</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="err">`</span><span class="nx">http</span><span class="err">:</span><span class="c1">//www.example.com?num1=${num1}&amp;num2=${num2}`)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

    <span class="k">return</span> <span class="nx">Observable</span><span class="p">.</span><span class="nx">fromPromise</span><span class="p">(</span><span class="nx">promise</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">addAsync</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
  <span class="p">.</span><span class="k">do</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">resultA</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">flatMap</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
  <span class="p">.</span><span class="k">do</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">resultB</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">flatMap</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">addAsync</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
  <span class="p">.</span><span class="k">do</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">resultC</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'total: '</span> <span class="o">+</span> <span class="nx">x</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resultA</span><span class="p">,</span> <span class="nx">resultB</span><span class="p">,</span> <span class="nx">resultC</span><span class="p">)</span>
  <span class="p">});</span>
</code></pre>
</div>

<p>ูฺฉุชู:</p>

<ul>
  <li>ูุชุฏ <code class="highlighter-rouge">Observable.fromPromise</code> ููุฏุงุฑ Promise ูุง ุฑู ุจู ู ุงุณุชุฑู ุงุฒ observable ุชุจุฏู ูโฺฉูู.</li>
  <li>ุงููพุฑุงุชูุฑูุง <code class="highlighter-rouge">.do</code> ู <code class="highlighter-rouge">.flatMap</code> ุจู ูุง ุฏุฑ ูุฏุฑุช ุฑูุฏุงุฏโูุง ููุชุดุฑู ุงุฒ Observable ฺฉูฺฉ ูโฺฉููุฏ.</li>
  <li>ุงุณุชุฑูโูุง Observable ุชูุจู ุง lazy ูุณุชูุฏ. ูุชุฏ <code class="highlighter-rouge">addAsync</code> ูููุน ุงุฌุฑุง ูุดู ฺฉู ูุง ุจูุด <code class="highlighter-rouge">.subscribe</code> ฺฉุฑุฏู ุจุงุดู.</li>
</ul>

<p>ูุงูฺฉุดโูุง Observable ุงูฺฉุงูุงุช ุจุงุญุงูุชุฑ ูู ุจู ูุง ูโุฏู. ูุซูุง ุฏุฑ ูุซุงู ุฒุฑ ูู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงููพุฑุงุชูุฑ <code class="highlighter-rouge">delay</code> ุจูุด ฺฏูุชู ุฏุฑ ุงุฌุฑุง ูุงูฺฉุดู ณฐฐฐููโุซุงูู ุชุงุฎุฑ ุงุฌุงุฏ ฺฉู ู ุจุนุฏ ฺฉุงุฑุชู ุงูุฌุงู ุจุฏู.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">addAsync</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">)</span> <span class="c1">// delay 3 seconds</span>
  <span class="p">.</span><span class="k">do</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">resultA</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span>
<span class="p">...</span>
</code></pre>
</div>

<p>ุชุง ูููโุฌุงุฑู ุฏุงุดุชู ุจุงุดูุ ู ุงุฌุงุฒู ุจุฏู ุฑุงุฌุน ุจู Observable ุฏุฑ ู ูพุณุช ุฏฺฏู ููุตูโุชุฑ ุตุญุจุช ฺฉูู.</p>

<h2 id="conclusion">ูุชุฌู ฺฏุฑ</h2>

<p>ุณุน ฺฉูุฏ ุจุง ุงูุฌุงู ูุซุงูโูุง ุจุดุชุฑ ุง ูุทุงูุนู ููุงููโูุง ุฏฺฏู ุจุง Promiseูุง ู Callbackูุง ุจุดุชุฑ ุขุดูุง ุจุดุฏ. ุงูููุงุฑู ฺฉุงูู ุฏุฑฺฉ ฺฉูุฏ ู ูุงูุนุง ุฏุฑ ูพุฑูฺูโูุงุชูู ุงุณุชูุงุฏู ฺฉูุฏ. ุฏุฑุจุงุฑู Observable ูู ูฺฏุฑุงู ูุจุงุดุฏุ ุงู ู ููุถูุน ุฌุฏุฏู ู ุญุงูุง ุญุงูุง ููุช ูุณุช ูุงุณู ุงูฺฉู ุชูุด ููุงุฑุช ูพุฏุง ฺฉูุฏ.
ุฏูุจุงุฑู ุชฺฉุฑุงุฑ ูฺฉููุ ุจุง ูุฑุณู ุงู ููุงูู ู ุงุจุฒุงุฑูุง ุขุดูุง ุจุดุฏ ู ุจุจูุฏ ูุงูุนุง ฺฉุฌุง ุจุฏุฑุฏุชูู ูุฎูุฑูุ ุชุง ูุชูุงุณุจ ุจุง ุงูู ุงุฒุดูู ุงุณุชูุงุฏู ฺฉูุฏ.</p>

<p>ูโุชููุฏ ุงุฒ ููฺฉโูุง ุฒุฑ ูู ูุซุงู ฺฉู ุฏุฑุจุงุฑู <code class="highlighter-rouge">Mom Promise to buy new phone</code> ุฑู ุจุจูุฏ:</p>

<ul>
  <li><a href="https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es5-js">Mom Promise in ES5</a></li>
  <li><a href="https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es6-js">Mom Promise in ES6</a></li>
  <li><a href="https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es7-js">Mom Promise in ES7</a></li>
</ul>

<p>ุฎุจ ููุด ููู ุจูุฏ. ุงูุฏูุงุฑู ูุจุญุซ Promise ุฑู ุณุงุฏู ุชูุถุญ ุฏุงุฏู ุจุงุดู ู ุดูุง ูู ุฑุงุญุช ุฏุฑฺฉ โุจุงุดูุด. ุงฺฏู ุณูุงู ุง ููุฑุฏ ุจูุฏุ ูุซู ููุดู ุฏุฑ <a href="https://twitter.com/sadra_amlashi">ุชูุชุฑ</a> ุง ุฏุฑ <a href="https://t.me/amlashi">ุชูฺฏุฑุงู</a> ูุชููู ุจุงูู ุฏุฑ ุงุฑุชุจุงุท ุจุงุดู. ๐๐ท</p>

        </div>


        <div class="post-routes-list">
            
            <a class="category-link" href="/category/ุฌุงูุง-ุงุณฺฉุฑูพุช">ุฌุงูุง ุงุณฺฉุฑูพุช</a>
            
            <a class="category-link" href="/category/ุขููุฒุด">ุขููุฒุด</a>
            
            
            <a class="tag-link" href="/tag/prmise">Prmise</a>
            
            <a class="tag-link" href="/tag/rxjs">RxJs</a>
            
            <a class="tag-link" href="/tag/javascript">JavaScript</a>
            
            <a class="tag-link" href="/tag/es6">ES6</a>
            
        </div>


        <div class="Prev-next-post-container">
            
            <a class="previous-btn" href="/2017/how-to-fcm-android">ููุดุชู ูุจู: ูุงุฑุจุณ ฑ: ุณุฑูุณ Firebase Cloud Messaging โ</a>
            
            
        </div>


    </div>

</div>

<a id="back-to-top" href="#" class="back-to-top" role="button" title="Click to return on the top page" data-toggle="tooltip" data-placement="left">
    <img src="/assets/img/base/arrow-up.png" class="arrow-up"/>
</a>


        <!-- Footer -->
<footer class="footer-wrapper">

    <div class="delimiter">
        <a href="/" class="footer-logo">
            <img src="http://isapanah.com/assets/img/base/favicon.png" class="logo-wrapper">
        </a>
    </div>

    <p class="footer-copyright">
        2008 - 2017<br>
        ูุทุงูุจ ุชุญุช ูุณุงูุณ <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/" rel="license" target="_blank">ฺฉุฑุชู ฺฉุงููุฒ</a> ููุชุดุฑ ูโุดููุฏ.

    </p>

    <div class="footer-social-links">
        <a href="https://twitter.com/sadra-amlashi" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
        <a href="https://github.com/sadra" title="Github" target="_blank"><i class="fa fa-github"></i></a>
        <a href="https://medium.com/sadra" title="Medium" target="_blank"><i class="fa fa-medium"></i></a>
        <a href="https://www.linkedin.com/in/amlashisadra/" title="Linkedin" target="_blank"><i class="fa fa-linkedin"></i></a>
        <a href="https://facebook.com/sadra.am123" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a>
    </div>

 </footer>
<!-- /Footer -->

        
    </body>
</html>
