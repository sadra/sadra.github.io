---
layout: blog_post_rtl
title:  "استفاده از انیمیشن در توسعه اپلیکیشن"
date: '2017-07-26'

tags:
    - Android
    - iOS
    - ReactNative
    - UI
    - Animation
    - Lottie

categories:
    - ابزار
    - تجربه کاربری

cover: /assets/img/post/2017-07-30/oh-my-lottie-0.png

author: Sadra
---

یکی از موضوعاتی که چندوقت اخیر ذهن منو مشغول کرده بود، این بوده که بتونم از منابع گرافیکی و انیمیشن‌های پیچیده در پروژم استفاده کنم. ولی هربار پیگیری این قضیه رو عقب مینداختم. تا اینکه دیروز [فرید](https://www.instagram.com/farid_landi) ازم پرسید که واسه این قضیه راه حلی داری؟ و این موضوع بهونه‌ای شد و با [شایان](http://dcamp.ir/) دنبال یه سرویس خوب گشتیم. امروز اصلا حوصله کد‌نویسی ندارم و فقط در ادامه به مواردی که برخوردیم اشاره میکنم تا پست‌های بعدی بریم سراغ کدنویسی‌هاش :P

## لایبرری اندروید Glide

یکی از گزینه ها برای استفاده از انیمیشن (یا همون فایل gif) در پروژه اندروید، لایبرری [Glide](https://github.com/bumptech/glide) هست. کار کردن باهاش هم خیلی سادست:

1.  فقط لایبرری رو بهش اضافه میکنید

2.  و بعد ویو رو به پروژتون اضافه می‌کنید

3.  و در آخر هم کلاسش رو فراخونی کرده و انیمیشن خودتون رو بهش معرفی میکنید

4.  و خب اینم میشه نتیجش

![Glide Result](/assets/img/post/2017-07-30/oh-my-lottie-10.gif)


این لایبرری علاوه بر همه خوبیهاش، مشکلاتی هم داره:

*   میزان استفاده از رم رو به شدت بالا میبره

*   شما کنترل مناسبی روی انیمیشن نداره

*   و موقع Scale شدن انیمه، ممکنه تصویرتون پیکسله بشه

## ابزار SuperNova Studio

این ابزار یه چیزی شبیه اسکچ هست. با این تفاوت که شما همه لایه هایی که در این استدیو طراحی و پیاده‌سازی میکنید، میتونید خروجی بگیرید (Native) و تو پروژتون ازش استفاده کنید.

با استفاده از ابزارهای زیادی که [SuperNova Studio](https://supernova.studio/) در اختیارتون گذشته، شما میتونید برای سه پلتفرم Android ، iOS و ReactJs خروجی بگیرید.

![SuperNova Studio](/assets/img/post/2017-07-30/oh-my-lottie-2.png)

سوپرنوا این امکان رو به شما میده که بتونید قبل از ورود به مرحله توسعه،‌در داخل همون استدیو لایه‌هاتون روی تست بگیرید. این امکان وجود داره که پیشنمایش لایه‌هاتون رو در هر سایزی روی شبیه ساز Android ، iOS و البته مرورگر، تست کنید. این ابزار به شما کمک میکنه که قبل از شروع به نوشتن حتی یک خط کد، از UI و UX اپتون مطمئن شید.

چرا راجع به SuperNova گفتم؟ برای اینکه شما میتونید انیمیشن‌هایی که در onboarding اپهای دیگه میبینید رو همینجا طراحی کرده و بعد توی پروژتون ایمپورتش کنید.

![SuperNova Studio](/assets/img/post/2017-07-30/oh-my-lottie-3.png)

لازم به ذکره که هنوز خودم از این سرویس استفاده نکردم و چیزهایی که گفتم بعضا از روی داکیومنتهاش و ویدئوهایی بود که درباره استدیوشون منتشر کرده بودن. SuperNova Studio الان در نسخه بتا هست و شما میتونید به رایگان دانلودش کرده و ازش استفاده کنید.

## فریم‌ورک متن باز Lottie

لاتی، نخونید لوتی (-_)))، چیزیه که من اینهمه واسش سروصدا راه انداختم ;) فریم ورک [Lottie](https://airbnb.design/lottie/)، دقیقا همه همونچیزیه که ما بهش احتیاج داشتیم. یا بهتر بگم،‌ فریم‌ورک‌های قبل از تو، سؤتفاهم بود :))

![Lottie](/assets/img/post/2017-07-30/oh-my-lottie-9.png)

 لاتی به همین سادگیه:

1.  منابع گرافیکیتو در After Effect بساز

2.  ازش خروجی JSON بگیر

3.  حالا Lottie بهت کمک میکنه که ازش در iOS، Android و ReactJS استفاده کنی.

**لاتی چیه؟**

لاتی یک فریم‌ورک رایگان و متن بازه که توسط بروبچه‌های [AirBnb](https://airbnb.design) توسعه داده شد. تا قبل از این برای استفاده کردن از انیمیشن‌های پیچیده مجبور بودیم کلی کدهای مسخره و پیچیده رو بکار ببریم و کلی پروسه الکی به اپمون اضافه کنیم. حتی لازم بود واسه اینکه انیمه ها پیکسله نشن، تو سایزهای مختلف اونهارو آماده کرده و به پروژمون اضافه کنیم یا اینکه هزارخط کد بنویسیم تا یه انیمیشن احمقانه رو پیاده کنیم :(

![Lottie](/assets/img/post/2017-07-30/oh-my-lottie-4.gif)

با اینکه انیمیشن کلی به زیبا شده اپ و بالا بردن تجربه کاربری کمک میکنه اما بخاطر همین مشکلات خیلی از توسعه دهنده ها کلا از انیمیشن استفاده نمیکردن و تنها بسنده میکردن به همون اندک انیمه‌هایی که پلفترم بهشون اجازه میداد! اما AirBnb کلا این تصور و تفکر رو تغییر داد.

**ماجرای Lottie**

لاتی ابزاریه که به شما کمک میکنه تا بدون محدودیت منابع گرافیکی رندر شده در افترافکت رو خروجی بگیرین و بصورت Native در iOS ، Android و ReactNative استفاده کنید. سال ۲۰۱۵ بود که [Hernan Torrisi](https://twitter.com/airnanan) ایتالیایی یک اکسنتشکن برای افترافکت به نام [BodyMovin](https://github.com/bodymovin/bodymovin) ساخت، تا به کاربرا کمک کنه از پروژه هاشون برای بصورت HTML و JSON و فرمتهای دیگه خروجی بگیرن.

بعد از این بود که چهارنفر نفر از بروبچه‌های AirBnb تصمیم گرفتن تا با استفاده از اون فایل JSON شروع کنن برای هرسه پلتفرم فریم‌ورک Lottie رو پیاده کنن. بدین صورت بود که ‌‌[Brandon Withrow](http://github.com/buba447) برای [iOS](https://github.com/airbnb/lottie-ios)، سپس [Gabriel Peal](https://twitter.com/gpeal8) برای [Android](https://github.com/airbnb/lottie-android) و بعدش [Leland Richardson](https://twitter.com/intelligibabble) برای [ReactNative](https://github.com/airbnb/lottie-react-native) این سرویس رو پیاده کردن. ناگفته نمونه که [Salih Abdul-Karim](https://twitter.com/therealsalih?lang=en) مدیریت این تیم و پیاده سازی User Experience رو بر عهده داشته. و اینجوری بود که Lottie خلق شد. و چقدر خوب این فریم‌روک پیاده شده.


{% include func/image.html
            img="/assets/img/post/2017-07-30/oh-my-lottie-5.jpg"
            title="Salih Abdul-Karim"
            caption="صلیح عبدالکریم، جیگر منه :))"
            url="#" %}

> قالَ شایان: ازونجایی که هرسه فاندر AirBnb طراح و گرافیست بودن، به همین دلیل به شدت روی گرافیک و منابع بصری سرویس‌هاشون توجه میکنن. پس بعید نیست که همچین چیزی مثل Lottie انقدر خوب، با کیفیت و کاربردی پیاده بشه.

**وقتی روزهای بد تموم میشن**

روند کار همیشه اینطور بوده که تیم طراحی، UI اپ رو توی اسکچ یا فتوشاپ میزد. و طرح به توسعه دهنده سپرده میشد و ایشون هم بر اساس پروتوتایپی که دریافت کرده شروه به کد زدن میکرد:

*   این پروسه معمولا خیلی طول میکشید

*   و معمولا چیزی که پیاده میشد و با طرحی که زده میشد نسبتا اختلاف داشت

اوضاع وقتی بدتر میشد که در پروتوتایپ انیمیشن هم وجود داشت! اونوقت توسعه دهنده باید برای هم انیمیشن یه رسورس تعریف کنه. اوضاع وقتی حزن‌انگیز میشه که انیمیشن پیچیده میشه اونوقت باید برای Line art یه سری ریسورس، برای Charecter-based animation یه سری ریسورس، و برای Logo animation یه سری رسورس دیگه تعریف کنه. تصور کنید وقتی که بخواید اینارو ریفکتور کنه یا تغییری توشون بده. چقدر کد، چقدر فایل، چقدر زحمت و چقدر دردسر!

![Lottie](/assets/img/post/2017-07-30/oh-my-lottie-7.gif)

اما حالا طراح یکبار انیمیشن رو طراحی میکنه،‌ یه خروجی جیسون میگیره میده به توسعه دهنده‌ها و روی هرسه پلتفرم یه چیز رو تحویل میگیره، همونچیزی که خودش طراحی کرده. هرموقع هم نیاز به تغییر بود، تو افترک‌افکت تغییرات انجا میشه و فایل جیسون پاس میشه به توسعه دهنده ها. به همین سادگی‌، به همین خوشمزگی!

یکی از امکانات خوب لاتی اینه که به ما اجازه کنترل کامل ویوو ساخته شده رو میده. شما میتونید انیمه رو جلو برده یا برعکس شروع پخش کنید (بشدت پرکاربرد در onboarding). و میتونید بر اساس اینترکت که کاربر به ویوو داره اون رو تغییر بدید. مثل، همربرگر منو.

**یه راه حل انعطاف‌‌پذیر و کاربردی**

دو ابزار دیگه مثل لاتی وجود دارن که کاربرد مشابهی دارن، [Squall](http://www.marcuseckert.com/squall/) که توسط [Marcus Eckert](https://twitter.com/marcus_eckert) توسعه داده شده. و [Keyframes](https://github.com/facebookincubator/Keyframes) که محصولی از فیسبوکه. لایبرری Keyframes متاسفانه یه بخش کوچیکی از خصوصیات After Effect رو پشتیبانی میکنه و بیشتر روی interactionها تمرکز داره، درصورتی که ممکنه انیمیشن‌های ما خصوصیات خاصی داشته باشن. اما Squall، بسیار ابزار خوب و کاملیه اما متاسفانه فقط iOS رو پیشتیبانی میکنه. شاید جالب باشه بدونید که برو بچه های Lottie از خصوصایت و الگورتیم های Squall تو سرویسهاشون استفاده کردن، الالخصوص برای تفسیر و خودند فایل جیسون خروجی از AfterEffect.

![Lottie](/assets/img/post/2017-07-30/oh-my-lottie-6.gif)

علاوه بر اینها، لاتی امکانت دیگه هم گذاشته تا سرویس رو هرچه بیشتر کاربردی کنه. برای مثال، شما میتونید فایلهای JSON رو از روی وب فراخونی کنید، که خیلی خیلی خیلی برای A/B Testing مفید و کاربردیه. همینطور که قبلا گفتم شما میتونید کنترل کاملی روی انیمیشنتون داشته باشد، اون رو عقب جلو کنید، یا سرعتش رو کم و زیاد کنید و همه اینها به یه نیم خط کد قابل پیاده‌سازیه. موضوع جالبتر میشه وقتی که بدونید شما در iOS میتونید بصورت Native از Lottie برای پیاده سازی ترنزیشن انیمیشن استفاده کنید، اونم انیمیشن‌های پیچیده.

**جامعه توسعه دهنده‌ها**

ازونجای که Lottie یه فریم‌ورک متن‌باز هست، تونسته یه جامعه قوی از طراح‌ها و توسعه‌دهندگان رو دور هم جمع کنید تا اونها با کمک همدیگه، هم بتونن Lottie رو ارتقاع بدن هم کلی ریسورس خوب و با کیفیت تولید کنن. اگه حال کار کردن به افترافکت رو ندارید میتونید از انیمیشن‌های آماده استفاده کنید، اونها در [9Squares](http://9-squares.tumblr.com/)، [Motion Corpse](https://motioncorpse.tumblr.com/)، [AnimoGraphy](https://animography.net/products/mobilo) و [LottieFiles](https://www.lottiefiles.com) به راحتی در دسترس شما هستن

![Lottie](/assets/img/post/2017-07-30/oh-my-lottie-8.gif)

**خب اینهمه تعریف کردی، حالا چطوری ازش استفاده کنم؟**

برنامه من اینه که در این هفته جاری نحوه استفاده از Lottie رو در هرسه پلتفرم Android، iOS و ReactJS به شما نشون بدم. پس اگه تاحالا از این فریم‌ورک استفاده نکردین، منتظر پست‌های بعدی تو هفته جاری باشین. یا اگه استفاده کردین و جاییش مشکل یا سوالی دارین، در [توییتر](https://twitter.com/intent/tweet?screen_name=sadra_amlashi) من رو [منشن](https://twitter.com/intent/tweet?screen_name=sadra_amlashi) کنید و سوالتون رو بپرسید تا در پستهای بعدی ‌به اون موارد رو حتما بررسی کنم.