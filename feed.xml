<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.5.0">Jekyll</generator><link href="https://isapanah.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://isapanah.com/" rel="alternate" type="text/html" /><updated>2018-12-11T01:11:17+03:30</updated><id>https://isapanah.com/</id><title type="html">وبلاگ صدرا املشی</title><subtitle>سلام! من صدرا عیسی پناه املشی هستم. توسعه دهنده اپلیکیشن iOS و Android.
</subtitle><entry><title type="html">اصول ۵ گانه SOLID - مقدماتی</title><link href="https://isapanah.com/2018/solid" rel="alternate" type="text/html" title="اصول ۵ گانه SOLID - مقدماتی" /><published>2018-12-10T00:00:00+03:30</published><updated>2018-12-10T00:00:00+03:30</updated><id>https://isapanah.com/2018/solid</id><content type="html" xml:base="https://isapanah.com/2018/solid">&lt;h2 id=&quot;مقدمه&quot;&gt;مقدمه&lt;/h2&gt;

&lt;p&gt;تصمیم دارم در مجموعه‌ای از پست‌های بهم پیوسته، مهم‌ترین اصول برنامه نویسی را بررسی کرده و با آنها آشنا شویم. اصولی مانند SOLID، DesignPattern، تست نویسی و غیره. تمامی این اصول و مفاهیم تا حدود زیادی انتزاعی و گاهی حوصله سر بر هستند، تمام سعی‌ام را کرده ام که مفاهیم تا جای ممکن قابل لمس و درک باشند.&lt;/p&gt;

&lt;p&gt;بخش بزرگی از مطالبی که در این سلسه پست‌ها خواهم نوشت، برگرفته از کتاب و ویدئوهای Bob C. Martin درباره Clean Code خواهد بود، باقی مطالب از تجربه‌های شخصی و مطالعات جسته گریخته‌ای است که در طی سالیان گذشته‌ام است.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-1.jpg&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;می‌خواهم در اولین گام، به یکی از مهمترین اصول برنامه نویسی یعنی SOLID  بپردازیم.&lt;/p&gt;

&lt;p&gt;برای دسترسی سریعتر به هریک از عناوین این پست، می‌توانید از فهرست زیر استفاده کنید.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#solid-چیست&quot;&gt;&lt;strong&gt;SOLID چیست؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#مدیریت-وابستگی-یا-dependency-management&quot;&gt;&lt;strong&gt;مدیریت وابستگی‌ یا Dependency Management&lt;/strong&gt;&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#مدیریت-وابستگی-چیست&quot;&gt;&lt;strong&gt;مدیریت وابستگی چیست؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#فاجعه-در-مدیریت-وابستگی&quot;&gt;&lt;strong&gt;فاجعه در مدیریت وابستگی!&lt;/strong&gt;&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#سختی-یا-rigidity&quot;&gt;&lt;strong&gt;سختی یا Rigidity&lt;/strong&gt;&lt;/a&gt;
            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#چطور-بفهمیم-دچار-rigidty-شده-ایم&quot;&gt;&lt;strong&gt;چطور بفهمیم دچار Rigidty شده ایم؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#دلایل-ابتلا-به-rigidity&quot;&gt;&lt;strong&gt;دلایل ابتلا به Rigidity&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#شکنندگی-یا-fragility&quot;&gt;&lt;strong&gt;شکنندگی یا Fragility&lt;/strong&gt;&lt;/a&gt;
            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#چطور-بفهمیم-دچار-fragility-شده-ایم&quot;&gt;&lt;strong&gt;چطور بفهمیم دچار Fragility شده ایم؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#دلایل-ابتلا-به-fragility&quot;&gt;&lt;strong&gt;دلایل ابتلا به Fragility&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#عدم-تحرک-یا-immobility&quot;&gt;&lt;strong&gt;عدم تحرک یا Immobility&lt;/strong&gt;&lt;/a&gt;
            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#چطور-بفهمیم-دچار-immobility-شده-ایم&quot;&gt;&lt;strong&gt;چطور بفهمیم دچار Immobility شده ایم؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;دلایل-ابتلا-به-immobility&quot;&gt;&lt;strong&gt;دلایل ابتلا به Immobility&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#چسبناکی-یا-viscosity&quot;&gt;&lt;strong&gt;چسبناکی یا Viscosity&lt;/strong&gt;&lt;/a&gt;
            &lt;ul&gt;
              &lt;li&gt;&lt;a href=&quot;#چطور-بفهمیم-دچار-viscosity-شده-ایم&quot;&gt;&lt;strong&gt;چطور بفهمیم دچار Viscosity شده ایم؟&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;&lt;a href=&quot;#دلایل-ابتلا-به-viscosity&quot;&gt;&lt;strong&gt;دلایل ابتلا به Viscosity&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#پیچیدگی-های-غیر-ضروری&quot;&gt;&lt;strong&gt;پیچیدگی ‌های غیر ضروری&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#مدیریت-وابستگی-ها-با-solid&quot;&gt;&lt;strong&gt;مدیریت وابستگی‌ها با SOLID&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#جمع-بندی&quot;&gt;&lt;strong&gt;جمع بندی&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;solid-چیست&quot;&gt;SOLID چیست؟&lt;/h2&gt;

&lt;p&gt;اصول ۵ گانه طراحی شی گرا برای اولین بار توسط Uncle Bob تعریف شد؛ سپس در سال ۲۰۰۰ آقای Michael Feathers با استفاده از اولین حروف هریک از نام‌های این اصول ۵ گانه، نام SOLID را برای آنها انتخاب کرد.&lt;/p&gt;

&lt;p&gt;وقتی این اصول با هم در طراحی و پیاده‌سازی یک برنامه اعمال می‌شوند، به احتمال زیاد آن سیستم قابلیت این را خواهد داشت که به آسانی قابل توسعه‌ و نگهداری باشد.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-2.jpg&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در حقیقت اصول سالید، دستورالعمل‌هایی هستند که می‌توان هنگام کار بر روی یک نرم‌افزار، آن‌ها را برای از بین بردن، عوامل نامطلوب در کد، اعمال کرد. اینکار از طریق فراهم آوردن چارچوبی انجام می‌گیرد که با استفاده از آن، برنامه‌نویس می‌تواند کد برنامه را اصلاح و بازسازی کند تا کدها توسعه‌پذیر و خواناتر شوند.&lt;/p&gt;

&lt;h2 id=&quot;مدیریت-وابستگی-یا-dependency-management&quot;&gt;مدیریت وابستگی‌ یا Dependency Management&lt;/h2&gt;

&lt;p&gt;قبل از اینکه شیرجه‌ای عمیق در SOLID بزنیم، لازم است تا با مدیریت وابستگی و مفاهیم مرتبط با آن آشنا بشویم.&lt;/p&gt;

&lt;h3 id=&quot;مدیریت-وابستگی-چیست&quot;&gt;مدیریت وابستگی چیست؟&lt;/h3&gt;

&lt;p&gt;کمتر دیده می‌شود که پروژه‌های نرم افزاری را بصورت ایزوله توسعه داده باشند. معمولا، یک پروژه وابستگی زیادی به فانکشان‌هایی با قابلیت استفاده مجدد دارد که بصورت لایبرری یا کامپوننت‌های جدا شده از سیستم مورد استفاده قرار می‌گیرند. مدیریت وابستگی، یک تکنیک برای شفاف سازی، حلِ پیچیدگی و استفاده از وابستگی‌های مورد نیاز یک پروژه است.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-3.jpg&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در توسعه نرم افزار، بزرگترین نگرانی، پایداری و انسجام همیشگی سیستم است؛ به بیانی دیگر، با افزایش وابستگی یک سیستم ویژگی‌هایی مانند استفاده مجدد، انعطاف پذیری و قابلیت نگهداری آن کاهش می‌یابد. مدیریت وابستگی (یا DM) به ما کمک می‌کند تا این وابستگی ها را کنترل و مدیریت کنیم.&lt;/p&gt;

&lt;p&gt;مفاهیم و اصولی مانند SOLID یا Object-Oriented از ابزارها و تکنیکهای پر کاربرد در مدیریت وابستگی اند.&lt;/p&gt;

&lt;h3 id=&quot;فاجعه-در-مدیریت-وابستگی&quot;&gt;فاجعه در مدیریت وابستگی!&lt;/h3&gt;

&lt;p&gt;بقول Uncle Bob، سیستم‌هایی که مدیریت وابستگی در آن رعایت نمی‌شود این ۴ بو (Smell) را همراه خود خواهند داشت:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;سختی یا Rigidity&lt;/li&gt;
  &lt;li&gt;شکنندگی یا Fragility&lt;/li&gt;
  &lt;li&gt;عدم تحرک یا Immobility&lt;/li&gt;
  &lt;li&gt;چسبناکی یا Viscosity&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;اما این ۴ بو چه هستند و چه تاثیری در سیستم ما دارند. در ادامه هرکدام از این ۴ مورد را به تفضیل بررسی خواهیم کرد.&lt;/p&gt;

&lt;h4 id=&quot;سختی-یا-rigidity&quot;&gt;سختی یا Rigidity&lt;/h4&gt;

&lt;p&gt;به ساده‌ترین زبان ممکن، سختی یا Rigidity یعنی ناتوانی در تغییر.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-4.jpg&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اما چه می‌شود که تغییر دادن یک سیستم سخت می‌شود؟ تغییر دادن یک سیستم زمانی سخت می‌شود که هزینه تغییر بالا رود! فرض کنید برای ساختن و تست گرفتن از یک سیستم باید ۲ ساعت وقت صرف کنید. اگر بعد از یک تغییر کوچک، مجبور شوید دوباره ۲ ساعت دیگر برای ساختن و تست گرفتن از آن سیستم وقت بگذارید، ریجیدیتی رخ داده است.&lt;/p&gt;

&lt;p&gt;در نتیجه اگر برای تغییر دادن بخش کوچکی از کد مجبور شویم کل سیستم را مجددا rebuild کنیم، آنوقت آن سیستم سخت شده یا دچار Rigidty شده است.&lt;/p&gt;

&lt;h5 id=&quot;چطور-بفهمیم-دچار-rigidty-شده-ایم&quot;&gt;چطور بفهمیم دچار Rigidty شده ایم؟&lt;/h5&gt;

&lt;ul&gt;
  &lt;li&gt;وقتی به ازای هر تغییر کوچک مجبور شویم کل سیستم را rebuild کنیم.&lt;/li&gt;
  &lt;li&gt;وقتی به ازای هر تغییر، زمان زیادی برای تست و ساخت یک سیستم صرف شود.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;درصورتی که بتوانیم راهی پیدا کنیم تا به ازای هر تغییر مجبور نشویم کل سیستم را دوباره بازسازی کنیم یا دست‌کم بتوانیم زمان تست و ساخت سیستم را به حداقل ممکن برسانیم، آنوقت از Rigidty جلوگیری کرده‌ایم.&lt;/p&gt;

&lt;p&gt;اگر سیستم شما به ازای هر تغییر، وقت زیادی را جهت test و rebuild صرف می‌کند، نشانه این است که توسعه دهندگان کم حوصله و بی دقتی را در تیم خود دارید!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-5.png&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;دلایل-ابتلا-به-rigidity&quot;&gt;دلایل ابتلا به Rigidity&lt;/h5&gt;

&lt;p&gt;امیدوارم هیچگاه به Rigidity مبتلا نشوید! برای اینکه بتوانید از آن پیشگیری کنید، بهتر است دلایلی که سیستمِ شما را مبتلا به Rigidity می‌کند خوب بشناسید:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;کدها بصورت رویه‌ای یا Procedural نوشته شده اند:&lt;/strong&gt; برای مثال تمام کد در یک فایل و بصورت تو در تو با if-else های مختلف و زیاد و بصورت به هم پیوسته و وابسته نوشته شده است.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;هیچ مفهوم انتزاعی یا Abstraction در کد دیده نمی‌شود:&lt;/strong&gt; این مورد وقتی اتفاق می‌افتد کدها در پایین‌ترین سطح ممکن نوشته شده باشد. در واقع بیش از حد به جزئیات توجه شده تا اینکه روی مفاهیم و خصوصیات شئ تمرکز شود. برای مثال به‌جای اینکه به خصوصیات یک شئ از طریق یک method یا property دسترسی داشته باشیم، با استفاده از یک پرچم ۱ بیتی در خانه nام حافظه، خصوصیت آن شئ را دریافت می‌کنیم.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;کدها بصورت یک مفهوم کلی در سیستم تعبیه شده‌اند در حالی که با خصوصیاتی بسیار جزئی جهت استفاده در یک مورد خاص تعریف شده باشند:&lt;/strong&gt; برای مثال یک کد HTML را در نظر بگیرید که قرار است یک table را با استفاده از داده‌های یک ماتریس چاپ کند درحالی که در کد تعریف کرده ایم تا Headerها پیش زمینه‌ای مشکی با فونت Bold و رنگ سفید داشته باشند.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;کامپوننت‌ها اطلاعات زیادی درباره جزئیات یکدیگر دارند، وقتی که قرار است باهم ارتباط داشته باشند:&lt;/strong&gt; برای مثال کلاسی داریم که یک Shape از &lt;strong&gt;مربع&lt;/strong&gt; برای ما می‌سازد؛ از آن می‌خواهیم که مساحت مربع را بطور هاشور زده نمایش دهد؛ پس در آن فانکشنی می‌نویسیم که ضلع مربع را گرفته، آن را ضربدر خودش کند تا مساحت مربع بدست آمده و حدود origin های شکل چند ضعلی روی اسکرین بدست آید. سپس توسط فانکشن دیگری آن را بصورت هاشور زده نمایش می‌دهیم. مشکل جایی رخ می‌دهد که از همان کامپوننت - که مساحت اشکال را هاشور زده نمایش می‌دهد - بخواهیم یک Shape دیگر از &lt;strong&gt;دایره&lt;/strong&gt; ساخته و مساحت آن را هاشور زده نمایش دهد!&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;شکنندگی-یا-fragility&quot;&gt;شکنندگی یا Fragility&lt;/h4&gt;

&lt;p&gt;مفهوم Fragility و Rigidity بسیار بهم نزدیک اند. درواقع شکنندگی و سختی، علت و معلول یکدیگر هستند. شکنندگی یا Fragility اشاره دارد به اینکه هر موقع تغییری در سیستم ایجاد می‌کنید در بخش (یا بخش‌های) دیگری از سیستم - که حتی هیچ ربطی با آن قسمت ندارد - با خطا و مشکل مواجه می‌شوید.&lt;/p&gt;

&lt;p&gt;فرض کنید یک ماشین داریم که رادیوی آن مشکل دارد، رادیو را درست می‌کنیم و پس از روشن کردن ماشین متوجه می‌شویم که شیشه برقی کار نمی‌کند!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-6.gif&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;همانطور که تغییرات افزایش پیدا می‌کنند، نگهداری سیستم نیز سخت تر می‌شود؛ زیرا هربار که تغییری در سیستم ایجاد می‌کنیم، در چندین نقطه دیگر خطاهایی پیدا می‌شود، این مورد تا آنجا ادامه پیدا می‌کند که هر تغییری در سیستم باعث سکته‌های ناقص نرم افزار می‌گردد!&lt;/p&gt;

&lt;p&gt;این مشکل باعث می‌شود که تیم اعتبار خود را در نزد مدیران و مشتریان از دست دهد! چون به ازای هر تغییری یا فیچر جدیدی که برای تیم ارسال می‌شود نیاز به صرف زمان و هزینه زیادی جهت ایجاد تغییر، تست و ساختن محصول می‌شود و حتی باعث می‌گردد که پروژه ها دیرتر از موعو به مرحله تحویل برسند. در نهایت این امر موجب کاهش کیفیت در محصول می‌شود.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-7.gif&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;چطور-بفهمیم-دچار-fragility-شده-ایم&quot;&gt;چطور بفهمیم دچار Fragility شده ایم؟&lt;/h5&gt;

&lt;ul&gt;
  &lt;li&gt;مجبور شوید به ازای هر تغییر، تغییرات متوالی و زیادی در دیگر بخش‌ها ایجاد کنید.&lt;/li&gt;
  &lt;li&gt;خطاهای جدیدی در بخش‌هایی رخ دهد که هیچ ربطی با تغییرات ندارند.&lt;/li&gt;
  &lt;li&gt;جدا کردن بخشی از سیستم، مارا مجبور کند تا بعضی بخش‌ها را دوباره از نو باز نویسی کنیم.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;دلایل-ابتلا-به-fragility&quot;&gt;دلایل ابتلا به Fragility&lt;/h5&gt;

&lt;p&gt;ابتلا به Fragility ممکن است دلایل مختلفی داشته باشد، اما مهمترین و اصلی‌ترین دلیل ابتلا به Fragility وابستگی و ایزوله نبودن کامپوننت‌ها و بخش‌های مختلف سیستم است، که با تغییر یک بخش، نیاز به تغییر بخش‌های دیگر داریم.&lt;/p&gt;

&lt;h4 id=&quot;عدم-تحرک-یا-immobility&quot;&gt;عدم تحرک یا Immobility&lt;/h4&gt;

&lt;p&gt;خاصیت عدم تحرک یا Immobility اشاره به این موضوع دارد که نتوانیم آن قسمت از کد یا کامپوننت را در دیگر بخش‌های سیستم استفاده کنیم. اگر در بخشی از سیستم احتیاج به ماژولی داشتیم که مشابه آن در قسمت دیگری از سیستم وجود دارد اما امکان استفاده مجدد در بخش دیگر به دلایل مختلف (مثل وجود برخی خصوصیات جزئی مثلا همان رنگ بک گراند با فونت فلان) وجود نداشت آنگاه دچار immobility شده‌ایم.&lt;/p&gt;

&lt;p&gt;فرض کنید در بخشی از نرم افزار یک ماژول login با استفاده از username و passowrd ساخته ایم. حال تصمیم داریم آن ماژولِ لاگین را از سیستم جدا کرده و در جایی دیگر استفاده کنیم. اگر نتوانید به سرعت و آسانی آن تکه کد را جدا کرده و در سیستم یا بخش دیگر (بدون تغییر) مجددا استفاده کنید، آنگاه ماژول immobile است. درواقع نمی‌تواند حرکت کند!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-8.png&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;وقتی سیستم immobile باشد، روزی که بخواهیم بخشی از سیستم را که به آن احتیاج داریم جدا کرده و در جای دیگری به کار بگیریم، این قضیه آنقدر سخت و ریسکی می‌شود که نهایتا ترجیح می‌دهیم بجای اینکه کد را مجددا استفاده کنیم، بشینیم و از ابتدا کدها را برای بخش جدید بازنویسی کنیم.&lt;/p&gt;

&lt;p&gt;هنگامی که قصد آن را داشته باشیم تا بخشی از سیستم را جدا کرده و در بخش دیگری استفاده کنیم، در حالتی که کدها immobile باشد، دچار مشکل خواهیم شد؛ از آنجا که این عمل (بدلیل وجود جزئیات و وابستگی‌های بیش از حد) سخت و ریسکی است، توسعه دهنده ترجیح می‌دهد بجای استفاده مجدد کدها در جای مورد نظر، وقت زیادی گذاشته و از پایه دوباره کدها را بازنویسی کند. این عمل سبب دوباره کاری و داپلیکیت شدن کدها می‌شود. امیدوارم متوجه باشید که داپلیکیت شدن کدها چه عواقبی ممکن است داشته باشد.&lt;/p&gt;

&lt;h5 id=&quot;چطور-بفهمیم-دچار-immobility-شده-ایم&quot;&gt;چطور بفهمیم دچار Immobility شده ایم؟&lt;/h5&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ماژول آنقدر پیچیده و وابسته به دیگر بخش‌ها شده که قابل جدا شدن نیست.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ماژول قابل جدا شدن باشد، اما جدا کردن و استفاده کردن از آن در محیطی غیر از محیط اصلیِ آن، بسیار سخت و ریسکی باشد.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;نتوانید ماژول یا بخشی از کد را از سیستم جدا کرده و فورا بدون تغییر در آن، در جای دیگری استفاده کنید.&lt;/p&gt;

    &lt;h5 id=&quot;دلایل-ابتلا-به-immobility&quot;&gt;دلایل ابتلا به Immobility&lt;/h5&gt;

    &lt;ul&gt;
      &lt;li&gt;اصلی ترین دلیل ابتلا به immobility یا عدم تحرک، پرداختن به جزئیات بیش از حد و غیر ضروری در آن بخش از کد است.&lt;/li&gt;
      &lt;li&gt;ماژول بیش از حد به محیط و envirement خودش وابسته باشد.&lt;/li&gt;
      &lt;li&gt;ماژول بیش از یک وظیفه را بر دوش داشته باشد.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;برای مثال، همان ماژول لاگین را در نظر داشته باشید. این ماژول برای احراز هویت کاربر از یک database schema خاص در دیتابیس Redis استفاده می‌کند. این ماژول ابتدا به دیتابیس Redis وصل شده و سپس با توجه به آن schema خاص، کاربر را احراز هویت می‌کند. حال قصد داریم آن را در سرویسی دیگری استفاده کنیم که از MySQL استفاده می‌کند و از قضا schema آن سیستم نیز با schema سیستم قبلی متفاوت است. حال، &lt;em&gt;تو خود حدیث مفصل بخوان ازین مجمل!&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;چسبناکی-یا-viscosity&quot;&gt;چسبناکی یا Viscosity&lt;/h4&gt;

&lt;p&gt;چسبناکی، ویسکوزیته یا Viscosity مقاومت در مقابل تغییر است. وقتی که ساخت مجدد و تست سیستم برای ما سخت می‌شود و ترجیح بدهیم از خیر تغییرات آن قسمت بگذریم، آنگاه کد ما viscous یا چسبناک است.&lt;/p&gt;

&lt;p&gt;در هنگام طراحی هرموقع که نیاز به یک تغییر بود، یا آن را در نظر می‌گیریم و با پیدا کردن یک راه درست تغییر را ایجاد می‌کنیم، یا اینکه می‌توانیم یک راه سریع، کوتاه و البته کثیف برای آن پیدا کنیم. شرایط و محیط‌هایی که اغلب در آن کار می‌کنیم، مارا به سمت آن رویکرد سریع و کثیف هدایت می‌کنند.&lt;/p&gt;

&lt;p&gt;وقتی زمانِ کامپایل شدن بیش از حد طول می‌کشد، بجای آنکه آن قسمت از کد که موجب این مشکل شده‌ است را تصحیح کنیم، تصمیم میگریم جایی را تغییر دهیم که نیازی ندارد مجددا کامل کامپایل شود.&lt;/p&gt;

&lt;p&gt;وقتی که check-in یا check-outهای دیتا یا فایل‌ها زمان زیادی از سیستم بگیرد، تصمیم به تغییر جایی میگیریم که احتیاج به دسترسی به فایلهای کمتری را دارد.&lt;/p&gt;

&lt;p&gt;اگر مستقر کردن محیط آنقدرها هم برای ما سخت نباشد، تصمیم می‌گیریم بجای تغییر در کد، دیتابیس را تغییر دهیم. زیرا اجرا کردن یک اسکریپت دیتابیس برای تغییرات، آسان‌تر و امن‌تر از دوباره deploy کردن کل اپلیکیشن است.&lt;/p&gt;

&lt;p&gt;بنابراین کدی که خاصیت Viscosity آن بالا باشد، مارا مجبور می‌کند تا بجای ماژول یا آن بخش از سیستم، تغییرات را روی بخش‌هایی اجرا کنیم که کمترین مقاومت ممکن را دارند.&lt;/p&gt;

&lt;h5 id=&quot;چطور-بفهمیم-دچار-viscosity-شده-ایم&quot;&gt;چطور بفهمیم دچار Viscosity شده ایم؟&lt;/h5&gt;

&lt;ul&gt;
  &lt;li&gt;تغییر دادن آن بخش از سیستم آنقدر سخت و هزینه‌بر باشد که ترجیح دهیم جهت کاهش بار سیستم، بخش دیگری که کمتر مارا درگیر می‌کند را تغییر دهیم.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;دلایل-ابتلا-به-viscosity&quot;&gt;دلایل ابتلا به Viscosity&lt;/h5&gt;

&lt;ul&gt;
  &lt;li&gt;عدم توجه توسعه دهندگان به کد یا حواله کردن بهبود و refactoring کد به زمان دیگر&lt;/li&gt;
  &lt;li&gt;وابستگی بیش از حد ماژول‌ها یا بخش‌های سیستم به یکدیگر&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;پیچیدگی-های-غیر-ضروری&quot;&gt;پیچیدگی های غیر ضروری&lt;/h3&gt;

&lt;p&gt;یکی از مباحثی که معمولا در هنگام توسعه نرم افزار مطرح می‌شود این است که درباره آینده نرم افزار چه تصمیمی باید بگیرید؟ آیا فقط نیازهای کنونی خود را باید در طراحی لحاظ کنیم؟ یا اینکه باید یک دید باند مدت داشته و تمامی نیاز‌های آینده نرم افزار را در نظر داشته و در طراحی اعمال کنیم؟&lt;/p&gt;

&lt;p&gt;به بیانی دیگر، آیا لازم است دستگیره‌هایی در سیستم جهت استفاده در آینده (دور یا نزدیک) قرار دهیم؟&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-12-10/solid-9.gif&quot; alt=&quot;SOLID Fundemental&quot; /&gt;&lt;/p&gt;

&lt;p&gt;به ازای هر دستگیره‌ای که در طراحی لحاظ می‌کنید که (شاید) در آینده مورد  استفاده قرار گیرد، آن را پیچیده‌تر کرده و بار اضافی جهت توسعه و نگهداری به سیستم و تیم توسعه خود افزوده اید. اگر تنها نیازهای کنونی خود را در نظر داشته و سیستم را با استفاده از تکنیک‌هایی مدیریت وابستگی - که در آینده به آنها خواهم پرداخت - ایزوله و ماژولار تهیه کنید، آنگاه هم می‌توانید از پیچیدگی های غیر ضروری جلوگیری کرده و هم هیچکدام از آن چهار خصیصه نامطبوع را در سیستم خود تجربه نخواهید کرد.&lt;/p&gt;

&lt;p&gt;هیچگاه هیچ سیستمی از همان ابتدا بد نیست. بدی‌ها یا آن خواص نامطبوع در طول زمان پدیدار می‌شوند. تصمیم‌های بدی که در مقاطع گوناگون میگیریم که حاصل بی‌توجهی و تجربه‌های غلط ما هستند، دلایل اصلی بوجود آمدن این خصایص نامطبوع و پیچیدگی‌های غیر ضروری اند.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;گسترده شدن پیچیدگی‌ها، پیشرفت را سخت تر می‌کند و ما را بیشتر وسوسه می‌کند تا راه‌های میانبری برای کاهش این سختی پیدا کنیم که همان‌ها نیز به افزایش وابستگی و پیچیده‌تر شدن سیستم در آینده می‌انجامد. “َUncle Bob”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;مدیریت-وابستگی-ها-با-solid&quot;&gt;مدیریت وابستگی ها با SOLID&lt;/h2&gt;

&lt;p&gt;مدیریت وابستگی موضوعی است که بیشترِ ما با آن سروکار داریم. هرموقع صفحه‌ی اسکرین را که پوشیده از کدهای پیچیده و بهم ریخته تماشا می‌کنیم، در حال تجربه‌ی ناخوشایندِ نتایجِ حاصل از مدیریت ضعیف در وابستگی هستیم. مدیریت ضعیف وابستگی منجر به کدهایی می‌شود که تغییر دادن آن سخت است، شکننده ‌است و قابل استفاده مجدد نیست. ما داریم راجع به آن ۴ بوی نامطبوع حرف می‌زنیم. از سویی دیگر، زمانی که وابستگی‌ها به خوبی مدیریت شوند کد انعطاف پذیر، قوی‌تر و قابل استفاده مجدد می‌شوند.&lt;/p&gt;

&lt;p&gt;اصول ۵ گانه SOLID یکی از راه‌هاییست که به ما در مدیریت وابستگی‌ها کمک می‌کند. بهتر است نگاهی اجمالی به این اصول بیاندازیم:&lt;/p&gt;

&lt;div class=&quot;table-container dir-rtl pos-right &quot;&gt;
    &lt;style type=&quot;text/css&quot;&gt;
        .tb-center-middle{text-align:center!important;vertical-align:middle!important;}
        .tb-middle{text-align:right!important;vertical-align:middle!important;}
        .tb-body{font-size: 1em;color: #454545;font-weight: 100;line-height: 1.5em;}
    &lt;/style&gt;
    &lt;table class=&quot;tg&quot;&gt;
      &lt;tr&gt;
        &lt;th class=&quot;tb-center-middle&quot;&gt;حرف اول&lt;/th&gt;
        &lt;th class=&quot;tb-center-middle&quot;&gt;مخفف&lt;/th&gt;
        &lt;th class=&quot;tb-middle&quot;&gt;مفهوم&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;S&lt;/td&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;Single responsibility principle&lt;/td&gt;
        &lt;td class=&quot;tb-middle tb-body&quot;&gt;&lt;span style=&quot;font-weight:bold&quot;&gt;اصل تک‌وظیفه‌ای&lt;/span&gt;&lt;br /&gt;یک کلاس باید تنها یک وظیفه داشته باشد (یک کلاس باید تنها یک دلیل برای تغییر داشته باشد و نه بیشتر)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;O&lt;/td&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;Open–closed principle&lt;/td&gt;
        &lt;td class=&quot;tb-middle tb-body&quot;&gt;&lt;span style=&quot;font-weight:bold&quot;&gt;اصل باز ـ بسته&lt;/span&gt;&lt;br /&gt;اجزای نرم‌افزار باید نسبت به توسعه باز (یعنی پذیرای توسعه باشد) و نسبت به اصلاح بسته باشند (یعنی پذیرای اصلاح نباشد). (یعنی مثلاً برای افزودن یک ویژگی جدید به نرم‌افزار نیاز نباشد که بعضی از قسمت‌های کد را بازنویسی کرد، بلکه بتوان آن ویژگی را مانند پلاگین به راحتی به نرم‌افزار افزود)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;L&lt;/td&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;Liskov substitution principle&lt;/td&gt;
        &lt;td class=&quot;tb-middle tb-body&quot;&gt;&lt;span style=&quot;font-weight:bold&quot;&gt;اصل جانشینی لیسکو&lt;/span&gt;&lt;br /&gt;اشیاءِ یک برنامه که از یک کلاس والد هستند، باید به راحتی و بدون نیاز به تغییر در برنامه، قابل جایگزینی با یکدیگر باشند.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;I&lt;/td&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;Interface segregation principle&lt;/td&gt;
        &lt;td class=&quot;tb-middle tb-body&quot;&gt;&lt;span style=&quot;font-weight:bold&quot;&gt;اصل تجزیهٔ (تفکیک) رابط&lt;/span&gt;&lt;br /&gt;استفاده از چند رابط که هر کدام، فقط یک وظیفه را بر عهده دارد بهتر از استفاده از یک رابط چند منظوره است.&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;D&lt;/td&gt;
        &lt;td class=&quot;tb-center-middle&quot;&gt;Dependency inversion principle&lt;/td&gt;
        &lt;td class=&quot;tb-middle tb-body&quot;&gt;&lt;span style=&quot;font-weight:bold&quot;&gt;اصل وارونگی وابستگی&lt;/span&gt;&lt;br /&gt;بهتر است که برنامه به تجرید(abstraction) وابسته باشد نه پیاده‌سازی&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
&lt;/div&gt;

&lt;h2 id=&quot;جمع-بندی&quot;&gt;جمع بندی&lt;/h2&gt;

&lt;p&gt;در این پست با اصول ۵گانه سالید آشنایی ابتدایی پیدا کردیم، سپس به مفهوم مدیریت وابستگی‌ها یا همان DM پرداختیم. با ۴ بوی نامطبوع کدهایی که مدیریت وابستگی در آن رعایت نشده آشنا شدیم، که عبارت بودند از:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;سختی یا Rigidity&lt;/li&gt;
  &lt;li&gt;شکنندگی یا Fragility&lt;/li&gt;
  &lt;li&gt;عدم تحرک یا Immobility&lt;/li&gt;
  &lt;li&gt;چسبناکی یا Viscosity&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;در ادامه هرکدام را مفصلا بررسی کردیم. در نهایت به این نتیجه رسیدیم، برای اینکه کدهای ما بوی هیچکدام از این ۴تا را نگیرد، بهتر است از اصول و قوائد SOLID و دیگر ابزارهای DM استفاده کنیم. کلی حرف زدیم. اجازه بدید در پست‌های بعدی درباره هر یک از ۵ اصل SOLID صحبت کنیم.&lt;/p&gt;

&lt;p&gt;اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="SOLID" /><category term="DependencyManagement" /><category term="CleanCode" /><summary type="html">مقدمه</summary></entry><entry><title type="html">انسان خردمند - تاریخ مختصر بشر!</title><link href="https://isapanah.com/2018/sapiens" rel="alternate" type="text/html" title="انسان خردمند - تاریخ مختصر بشر!" /><published>2018-09-27T00:00:00+03:30</published><updated>2018-09-27T00:00:00+03:30</updated><id>https://isapanah.com/2018/sapiens</id><content type="html" xml:base="https://isapanah.com/2018/sapiens">&lt;p&gt;این اولین مطلبی ست که درباره کتابهایی که خوندم می‌نویسم. و سعی میکنم تا جای ممکن ساده، روان و مختصر باشه. و چیزهایی که خوندم رو با شما به اشتراک میگذارم که شما هم بعدها اگر خواستید این کتاب رو مطالعه کنید، دانش قبلی راجع بهش داشته باشید.&lt;/p&gt;

&lt;p&gt;در این پست کتاب رو روایت یا خلاصه نمی‌کنم، سعی کردم فقط و فقط راجع به خود و حواشی کتاب صحبت کنم؛ البته جاهایی که لازم بود برشی از کتاب رو نقل کردم. پس قراره فقط کتاب رو معرفی کنم و بگم در کنارش با خوندن چه چیزایی می‌تونید تکمیلش کنید.&lt;/p&gt;

&lt;p&gt;سعی می‌کنم تا جای ممکن از اسپویل کردن کتاب جلوگیری کنم و بیشتر جان مایه کتاب رو با شما به اشتراک بگذارم. اونجاهایی که کتاب رو اسپویل کردم علامت گذاشتم. مواظب باشید در تله نیفتید.&lt;/p&gt;

&lt;p&gt;می‌تونید از طریق فهرست به سرعت به عناوین مورد نظرتون برسید.&lt;/p&gt;

&lt;h2 id=&quot;فهرست&quot;&gt;فهرست&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#مقدمه&quot;&gt;&lt;strong&gt;مقدمه&lt;/strong&gt;&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#چرا-این-کتاب-رو-برای-خوندن-انتخاب-کردم&quot;&gt;&lt;strong&gt;چرا این کتاب رو برای خوندن انتخاب کردم&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#مختصری-در-باره-این-کتاب&quot;&gt;&lt;strong&gt;مختصری در باره این کتاب&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#انسان-خرمند&quot;&gt;&lt;strong&gt;انسان خرمند&lt;/strong&gt;&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#چهار-انقلاب&quot;&gt;&lt;strong&gt;چهار انقلاب&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#جان-مایه-انسان-خردمند&quot;&gt;&lt;strong&gt;جان مایه انسان خردمند&lt;/strong&gt;&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#انتخاب-طبیعی&quot;&gt;&lt;strong&gt;انتخاب طبیعی&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#تخیلات-بی-پایان&quot;&gt;&lt;strong&gt;تخیلات بی پایان&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#دیدگاه-من&quot;&gt;&lt;strong&gt;دیدگاه من&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#در-ستایش-انسان-خردمند&quot;&gt;&lt;strong&gt;در ستایش انسان خردمند&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#مکملات&quot;&gt;&lt;strong&gt;مکملات&lt;/strong&gt;&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#تاریخ-جهان&quot;&gt;&lt;strong&gt;تاریخ جهان&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#انسان-خداگونه&quot;&gt;&lt;strong&gt;انسان خداگونه&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#بیشتر-بخوانید&quot;&gt;&lt;strong&gt;بیشتر بخوانید&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#گفتگوهای-ویدئویی-آقای-هراری&quot;&gt;&lt;strong&gt;گفت‌گوهای ویدئویی آقای هراری&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#سریال-westworld&quot;&gt;&lt;strong&gt;سریال Westworld&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#فیلم-quest-for-fire&quot;&gt;&lt;strong&gt;فیلم Quest for Fire&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#تاریخ-مختصر-بشر-در-سه-هزار-کلمه&quot;&gt;&lt;strong&gt;تاریخ مختصر بشر در سه هزار کلمه&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#سفری-با-انسان-خردمند&quot;&gt;&lt;strong&gt;سفری با انسان خردمند&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ناوکست&quot;&gt;&lt;strong&gt;ناوکست&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#پروژه-تاریخ-بزرگ&quot;&gt;&lt;strong&gt;پروژه تاریخ بزرگ&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#جمعبندی&quot;&gt;&lt;strong&gt;جمع‌بندی&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;مقدمه&quot;&gt;مقدمه&lt;/h2&gt;

&lt;p&gt;صد هزار سال پیش، دست‌کم &lt;a href=&quot;https://bigbangpage.com/science-content/%D9%87%D9%81%D8%AA-%D9%86%DA%98%D8%A7%D8%AF-%D8%A7%D9%86%D8%B3%D8%A7%D9%86%DB%8C-%D9%86%D8%B2%D8%AF%DB%8C%DA%A9-%D8%A8%D9%87-%D8%A7%D9%86%D8%B3%D8%A7%D9%86-%D8%A7%D9%85%D8%B1%D9%88%D8%B2%DB%8C-%DA%A9/&quot;&gt;هفت گونه&lt;/a&gt; انسانی بر روی زمین زندگی می‏کردند. اما امروز تنها یکی به ‏جا مانده است؛ ما، انسان‏‌های خردمند. چطور گونه ما در نبرد برای سلطه بر دیگران پیروز شد؟&lt;/p&gt;

&lt;h3 id=&quot;چرا-این-کتاب-رو-برای-خوندن-انتخاب-کردم&quot;&gt;چرا این کتاب رو برای خوندن انتخاب کردم&lt;/h3&gt;

&lt;p&gt;در برنامه امسالم بود که حتما کتاب &lt;strong&gt;تاریخ فلسفه برتراند راسل&lt;/strong&gt; رو بخونم، اما قبل از اون لازم بود تا یه مروری کلی بر تاریخ داشته باشم. از طرفی هم از دور و اطراف بهم پیشنهاد می‌شد که کتاب &lt;strong&gt;انسان خردمند&lt;/strong&gt; رو بخونم. توی همین بحبوحه بودم که با این نقل قول مواجه شدم:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;این کتابِ یووال نوح هراری، همواره در لیست کتاب‌های پرفروش قرار داشته است و شخصیت‌هایی مثل باراک اوباما (۴۴مین رئیس جمهور آمریکا) و بیل گیتس (بنیانگذار مایکروسافت) خواندن آن را پیشنهاد کرده‌اند.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;همین گذاره کافی بود، تا هرچه سریعتر &lt;strong&gt;رمان مسیح باز مصلوب&lt;/strong&gt; رو تموم کنم و برم سراغ این کتاب!&lt;/p&gt;

&lt;div class=&quot;video-container&quot;&gt;&lt;style&gt;.h_iframe-aparat_embed_frame{position:relative;} .h_iframe-aparat_embed_frame .ratio {display:block;width:100%;height:auto;} .h_iframe-aparat_embed_frame iframe {position:absolute;top:0;left:0;width:100%; height:100%;}&lt;/style&gt;&lt;div class=&quot;h_iframe-aparat_embed_frame&quot;&gt; &lt;span style=&quot;display: block;padding-top: 57%&quot;&gt;&lt;/span&gt;&lt;iframe src=&quot;https://www.aparat.com/video/video/embed/videohash/qOw26/vt/frame&quot; allowfullscreen=&quot;true&quot; webkitallowfullscreen=&quot;true&quot; mozallowfullscreen=&quot;true&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;مختصری-در-باره-این-کتاب&quot;&gt;مختصری در باره این کتاب&lt;/h3&gt;

&lt;p&gt;کتاب انسان خردمند رو &lt;strong&gt;یووال نوح هراری&lt;/strong&gt; به نگارش درآورده که برای اولین بار به زبان عبری در اسرائیل در سال ۲۰۱۱ و در زبان انگلیسی در سال ۲۰۱۴ منتشر شد. دو ترجمه از این کتاب موجوده، یکی ترجمه محسن مینوخرد توسط نشر چشمه و دیگری ترجمه &lt;strong&gt;نیک گرگین&lt;/strong&gt; که توسط &lt;strong&gt;فرهنگ نشر نو&lt;/strong&gt; منتشر شده، ویراستاری این کتاب بر عهده &lt;strong&gt;محمدرضا جعفری&lt;/strong&gt; و &lt;strong&gt;زهرا عالی&lt;/strong&gt; بوده. منم همین نسخه رو تهیه و مطالعه کردم.&lt;/p&gt;

&lt;p&gt;اجازه بدید شرح مختصرش رو مستقیما از پشت جلد همین کتاب براتون بیارم:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;چه‌طور گونه‌ی ما در نبرد برای سلطه بر دیگران پیروز شد؟ چرا نیاکان شکارگر ـ خوراک‌جوی ما اقدام به ساختن شهرها و برپایی پادشاهی‏‌ها کردند؟ چگونه به خدایان و ملت‏‌ها و حقوق بشر ایمان آوردیم، به پول و کتاب‏‌ها و قوانین اعتماد کردیم و خود را برده‌ی بوروکراسی و مصرف‏‌گرایی و حرص ‏و آز برای خوشبختی ساختیم؟ دنیای ما در هزاره‌ی آینده چه شکلی به‏ خود خواهد گرفت؟ انسان خردمند به ‏گونه‏‌ای جسورانه، همه‌جانبه و بحث‌انگیز هر آنچه را تاکنون گمان می‌‏کردیم در مورد انسان می‌‏دانیم به چالش می‌کشد: افکارمان، رفتارمان، اعمالمان، اقتدارمان… و آینده‏‌مان را.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;و همینطور بقول &lt;a href=&quot;http://kafebook.ir/%D8%A7%D9%86%D8%B3%D8%A7%D9%86-%D8%AE%D8%B1%D8%AF%D9%85%D9%86%D8%AF/&quot;&gt;کافه کتاب&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;نویسنده تاریخ انسان را از ۲٫۵ میلیون سال پیش تا زمان حال را فقط در ۵۶۸ صفحه بیان می‌کند … هر اتفاق مهمی که در طول تاریخ بشر رخ داده در این کتاب بیان شده است: چه بر سر گونه‌های مختلف بشر آمد؟ چه بر سر حیوانات عظیم‌الجثه آمد؟ مغز چگونه تکامل یافت؟ آتش چه تاثیری بر تاریخ گذاشت؟ امپراتوری‌ها و حکومت‌ها چرا به وجود آمد؟ پول چگونه و چرا اختراع شد؟ مسیحیت و اسلام چه تاثیری بر انسان و تاریخ گذاشتند؟ و مهم‌تر از همه، گونه انسان خردمند به کجا می‌رود؟&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-1.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;انسان-خرمند&quot;&gt;انسان خرمند&lt;/h2&gt;

&lt;p&gt;درباره اینکه چرا اسم این کتاب «انسان خردمند» ترجمه شده بحث‌های زیادی هست که من ازش گذر می‌کنم، اما اگه دوس داشتین بیشتر راجع بهش بدونید &lt;a href=&quot;http://mrshabanali.com/%DA%A9%D8%AA%D8%A7%D8%A8-%D8%A7%D9%86%D8%B3%D8%A7%D9%86-%DB%8C%D9%88%D9%88%D8%A7%D9%84-%D9%86%D9%88%D8%AD-%D9%87%D8%B1%D8%A7%D8%B1%DB%8C/&quot;&gt;این پست دکتر شعبانعلی&lt;/a&gt; رو که مفصل راجع به این موضوع توضیح داده از وبسایتشون بخونین.&lt;/p&gt;

&lt;p&gt;در &lt;u&gt;صفحه ۲۳&lt;/u&gt; کتاب اینطور مطرح شده که:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;مسیر تاریخ را سه انقلاب مهم تعیین کردند: انقلاب شناختی،  در حدود ۷۰ هزار سال پیش موتور تاریخ را روشن کرد. انقلاب کشاورزی، در حدود ۱۲ هزار سال قبل به این روند سرعت داد. انقلاب علمی، که همین ۵۰۰ سال پیش شروع شد، می‌تواند نقطه پایان تاریخ و آغازگر چیزی کاملا متفاوت باشد. موضوع این کتاب داستان تاثیر این سه انقلاب بر انسان و بر موجودات دیگری است که در کنار او زندگی می‌کنند.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;بر خلاف چیزی که من دنبالش بودم، این کتاب همونطور که از اسمش پیداست «تاریخ مختصر بشر» ابدا تاریخ رو شرح نمیده، بلکه بطور تحلیلی تاریخ رو بررسی میکنه. بخش عمده‌ای از این کتاب (تا صفحه ۱۱۸) به انسان‌های اولیه و نظریات علمی ایشون و تعدادی از تاریخ دانان اختصاص داره. و در ادامه بطور گذرا برخی از اتفاقات و برش‌های تاریخی رو انتخاب کرده و راجع به نقطه عطف‌ها (یا بقول خودش انقلاب‌های) بشر بحث کرده و نظرات خودش در رابطه با اونهارو بیان می‌کنه. &lt;em&gt;در نتیجه اگه مثل من دنبال یه کتابی بودید که روایت اتفاقات تاریخ باشه، قطعا انتخابتون اشتباه محض بوده.&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;چهار-انقلاب&quot;&gt;چهار انقلاب&lt;/h3&gt;

&lt;p&gt;دکتر هراری در این کتاب سیر تحول زیستی و فکری انسان رو به چهار بخش تقسیم کرده: انقلاب شناختی که انسان خودش و پیرامونش رو شناخت (صفحات ۲۱ تا ۲۳۰). انقلاب کشاورزی که بین ۸۵۰۰ تا ۹۵۰۰ سال پیش از میلاد رخ داد و انسان رو یکجانشین کرد (صفحه ۱۱۹ تا ۱۹۷). بخش سوم هم  درمورد وحدت بشر، که نشون می‌ده چطور به تدریج سازمان‌های سیاسی تحکیم پیدا کرده و به سمت یک امپراتوری جهانی حرکت کردن (صفحات ۲۳۱ تا ۳۴۲). و در نهایت در بخش چهارم کتاب، به موضوع انقلاب علمی پرداخته و اینکه چطور این تحول باعث شد انسان‌ها با نابودی بقیه گونه‌ها خودشون رو به سلطه‌گران این دنیا تبدیل کنند (صفحات ۳۴۳ تا ۵۴۰).&lt;/p&gt;

&lt;p&gt;وی در بخش انتهایی این کتاب (صفحات  ۵۴۱ الی ۵۶۹) موضوع خدایی انسان رو مطرح کرده و همینطور افزوده علاوه بر اینکه انسان کارهای شگفت‌انگیزی کرده اما همچنان ناخشنود و ناراضیه و نمی‌دونه با این قدرتی که داره باید چیکار کنه. تا جایی که خودش میگه:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ما از هر زمان دیگر قدرتمندتریم … خدایان خود ساخته‌ای هستیم … که به هیچکس پاسخگو نیست … و بدنبال چیزی جز اسایش و شادی خود نیستیم و تازه هرگز هم به رضایت خاطر نمی‌رسیم.&lt;/p&gt;

  &lt;p&gt;آیا چیزی خطرناک‌تر از خدایانِ ناخشنود و ولنگار که نمی‌دانند چه می‌خواهند وجود دارد؟&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-2.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;small class=&quot;caption&quot;&gt;نقاشی «آفرینش آدم» اثر «میکلانژ» در ۱۵۱۱، سقف کلیسای سیستین&lt;/small&gt;&lt;/p&gt;

&lt;h3 id=&quot;جان-مایه-انسان-خردمند&quot;&gt;جان مایه انسان خردمند&lt;/h3&gt;

&lt;p&gt;هراری در روایت کردن اتفاقات تاریخی خیلی مختصر و گذرا عمل میکنه؛ انگار که یک دوربین گذاشته باشی و تمام ادوار تاریخ از ۲.۵ میلیون سال پیش تا امروز رو بصورت &lt;a href=&quot;https://fa.wikipedia.org/wiki/%D8%AA%D8%B5%D9%88%DB%8C%D8%B1%D8%A8%D8%B1%D8%AF%D8%A7%D8%B1%DB%8C_%D8%B2%D9%85%D8%A7%D9%86%E2%80%8C%DA%AF%D8%B1%DB%8C%D8%B2&quot;&gt;Time-Lapse&lt;/a&gt; فیلبرداری کنی. بقول یکی از دوستان «به نظر میرسه سرعتی که هراری برای مرور تاریخ انتخاب کرده، تعمدی باشه. شاید با این سرعت بتونیم چیزهایی رو ببینیم که تا به حال نسبت بهشون نابینا بودیم.» و بیشتر وقت کتاب رو اختصاص میده به یک &lt;strong&gt;&lt;em&gt;روایت و دید تازه نسبت به تاریخ بشریت&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;h4 id=&quot;انتخاب-طبیعی&quot;&gt;انتخاب طبیعی&lt;/h4&gt;

&lt;p&gt;یکی از خصوصیات این کتاب اینه که، بیشتر فرضیات و استدلال‌هایی که مطرح می‌کنه بر اساس نظرات فرگشت و داروینیسمه. بنظر میرسه علاقه خاصی به اینجور تحلیلات داره. برای مثال در فصل اول کتاب که در رابطه با انسان‌های اولیه‌ست، قسمت عمده روایت‌ها و فرضیاتش بر اساس قوانین &lt;a href=&quot;https://fa.wikipedia.org/wiki/%D8%A7%D9%86%D8%AA%D8%AE%D8%A7%D8%A8_%D8%B7%D8%A8%DB%8C%D8%B9%DB%8C&quot;&gt;انتخاب طبیعیه&lt;/a&gt;. (در این مورد چیزهایی هست که ترجیح دادم در بخش بعدی توضیح بدم)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(خطر اسپویل)&lt;/strong&gt; برای مثال به این اعتقاد داره که انسان در زمانی که یک موجود &lt;strong&gt;خوراک‌جو&lt;/strong&gt; بوده از زندگی لذت فراوانی میبرده و همیشه وقت آزاد داشته، ولی یک فریب بزرگ به اسم &lt;strong&gt;کشاورزی&lt;/strong&gt; و یکجا نشینی زندگیشو زیر و رو کرده.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;تکامل به تدریج انسان‌های هوشمند‌تری را به‌وجود آورد. بالاخره انسان‌ها آنقدر هوشمند بودند که بتوانند رازهای طبیعت را کشف کنند.. آنها مشتاقانه زندگی طاقت فرسا و خطرناک و اغلب ساده و ابتدایِ شکارگری-خوراک‌جویی را رها کردند و در یکجا مستقر شدند تا از زندگی دلپذیر و رضایت بخشِ کشاورزی بهره‌مند شوند.
اما این داستان خیالبافی (محض) است.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;تخیلات-بی-پایان&quot;&gt;تخیلات بی پایان&lt;/h4&gt;

&lt;p&gt;تفکر قالبی که در بطن این کتاب مشاهده میشه اینه که نویسنده باور داره قوانین، دستورها و راهکارهایی که همه‌شون توسط انسان بنا نهاده شدن، زاده تخیلات ماست. هراری اعتقاد داره همه سیستمی که امروزه دنیا بر پایه اونها در حال پیشروی هست زاده تخیل این بشر دو پاست که همه انسان‌ها اون رو بطور جمعی، مشترک و یکسان باور کردن.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(خطر اسپویل)&lt;/strong&gt;  از بحث‌های جالبِ کتاب دلایلی هست که برای حاکم شدن انسان‌های هوشمند بر جهان عنوان شده.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;انسان‌ها تنها حیواناتی هستند که می‌توانند به صورت دسته جمعی و با انعطاف پذیری بالایی همکاری کنند!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;دلیلش اینه می‌تونن به چیزهایی که فقط در تخیلاتشون وجود داره، مانند اسطوره‌ها، ملت‌ها، پول و حقوق بشر، باور پیدا کنن. هراری ادعا می‌کنه که تمام سیستم‌های بزرگ همکاری مانند ادیان، ساختارهای سیاسی، شبکه‌های داد و ستد و موسسات قضایی زاییده فکر و تخیل انسان‌ها ست.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(خطر اسپویل)&lt;/strong&gt;  برای مثال پول، یه کاغذ (معمولا) سبزرنگِ زشت و کثیفی که هیچ ارزش ذاتی نداره، حتی نمیشه اونو پخت و خورد! چرا باید همچین چیزی بعنوان ملاک معامله قرار بگیره! همه ما تخیل کردیم، و تصمیم گرفتیم بجای اینکه من ۲ کیسه «دانه کاکائو» بدم و یه «توپ پارچه» ازت بگیرم، عوضش اونو با یه اسکناس ۱۰۰ دلاری ازت بخرمش. البته نظر هراری نسبت به پول اینه که:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;پول سکه و اسکناس نیست. پول هرآن چیزی است که انسان‌ها تمایل دارند با استفاده از آن بتوانند به طور نظام‌مند ارزش چیزهای دیگر را به منظور مبادله کالاها و خدمات نشان دهند. (انسان خردمند – صفحه ۲۵۲)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;مهم نیست چه نژاد، فرهنگ، دین یا مذهبی داری، همه با همه تفاوت‌هاشون اون رو باور دارن. حتی در زمان اوج جنگهای صلیبی پول همون چیزی بود که هم سردار مسیحی و هم سردار مسلمان به یک اندازه باور داشتن. مهم نبود که روی سکه «هیچ خدایی بجز الله نیست، و محمد پیامبر خداست» ضرب شده باشه یا عکس «ریچارد شیردل»، فقط کافی بود اون پول اعتبار داشته باشه (یه دولت پشتش باشه یا یه گروه انسانی ازون استفاده می‌کردن)، اونوقت بود که هردو سردار از همون برای تبادل استفاده می‌کردن. همشون به یک اندازه به اون توافق باور داشتند، قوانینی که بر پایه تخیلاتِ نامحدودِ انسانی پایه گذاشته و پذیرفته شده بود.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-3.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;small class=&quot;caption&quot;&gt;نقاشی «مرگ، مرد را برای آخرین رقص دعوت می‌کند» اثر «فرانس فرانکن» در ۱۶۳۵، موزه ملی بلژیک&lt;/small&gt;&lt;/p&gt;

&lt;h3 id=&quot;دیدگاه-من&quot;&gt;دیدگاه من&lt;/h3&gt;

&lt;p&gt;ترجمه کتاب بسیار روان و خوب بوده و بعد از اینکه بخشهاییش رو با کتاب اصلی مطابقت دادم متوجه شدم که نویسندی حقیقتا امانت‌داری در ترجمعه متون اصلی کتاب رو رعایت کرده و ازین بابات شدیدا خوشحال شدم.&lt;/p&gt;

&lt;p&gt;ترجمه فارسی این کتاب رو نشر نو در تابستان ۹۶ منتشر کرد و در کمتر از یک سال ۱۲ بار تجدید چاپ شد. اقبال عمومی از این کتاب به حدی رسید که باعث شد به اون برچسب عامه‌پسند بودن بزنند؛ برچسبی که به سختی قابل الصاق به این کتاب ۶۰۰ صفحه‌ای ست. قسمتی از موفقیت این کتاب رو میشه به لحن روایت گونه اون نسبت داد که تونسته  داستان زندگی حداقل شش گونه‌ی انسانی رو از صد هزار سال پیش روایت کرده تا به انسان خردمند امروزی برسه.&lt;/p&gt;

&lt;p&gt;این کتاب هم مثل بیشتر کتاب‌های علمی که برای مخاطب غیرمتخصص نوشته می‌شن تاحدودی ساده‌سازی وکلی‌گویی و بی‌دقتی داره که شاید برای کتاب‌هایی مثل این ناگزیر باشه. ضمن این‌که بعضی نظریه‌ها در این کتاب قطعی نشون داده می‌شه در حالی که در بین دانشمندان مخالفان جدی‌ای داره. موقعی که شروع به خوندن کتاب کردم، در فصل اول موارد خیلی زیادی وجود داشت که از نظر من خارج از منطق و عقله و هیچجوری نمیتونستم درکشون کنم. بقول &lt;a href=&quot;https://www.theguardian.com/books/2014/sep/11/sapiens-brief-history-humankind-yuval-noah-harari-review&quot;&gt;مقاله‌ای در سایت گاردین&lt;/a&gt; چیزایی که تو این کتاب میگه حتی اندازه سایت ویکیپدیا هم وجاهت علمی نداره! این موضوع در این حد شده بود که همون فصل اول تصمیم گرفته بودم خوندن کتاب رو کنار بگذارم و برم سراغ کتاب دیگه‌ای، بقول یکی از دوستان «بعضی از قسمتهای کتاب هست که تورو از جات بلند میکنه و مجبورت میکنه چند قدم راه بری، نمیتونی با همه‌ی کتاب موافق باشی و نمیتونی باهمه ی کتاب مخالف باشی». اما خب، تونستم مقاومت کنم و تا انتهای کتاب پیش برم،‌ و خب در انتهای کتاب به این نتیجه رسیدم که کار خوبی کردم.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(خطر اسپویل)&lt;/strong&gt;  بنظرم نویسنده در بسیاری از بخش‌های کتاب بشدت با نظرات متریالیستی و نسبتا جانب‌دارانه صحبت کرده. بسیاری از استدلال‌هاش در فصل اول مبتنی بر فرضیات قدیمی بوده و شاید امروز اصلا وجاهت علمی نداشته باشه. اجازه بدید به موردی در فصل اول اشاره کنم، بخش &lt;strong&gt;بهای تفکر&lt;/strong&gt; &lt;em&gt;(صفحات ۲۹ تا ۳۴)&lt;/em&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ایستاده راه رفتن مستلزم داشتن سُرین‌هایی باریک‌تر بود که مجرای زایمان را تنگ‌تر می‌کرد - و این در حالی بود که سر نوزادان بزرگ و بزرگتر می‌شد. به همین دلیل مرگ در سر زایمان به خطری بزرگ تبدیل شد. آنها که نوزادانی زودرس و با سر و مغزی کوچک‌تر و نرم‌تر به دنیا می‌آوردند راحت‌تر زایمان می‌کردند و زنده می‌ماندند..از این رو «انتخاب طبیعی» هوادار زایمان زودرس بود.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;نویسنده بر همین مبنا نتیجه می‌گیره: بر خلاف اینکه اسب ها چند ساعت بعد از تولد می‌تونن شروع کنن به دویدن یا گربه‌ها چند هفته بعد از تولد می‌تونن برن شکار، حتی اردک‌ها چند دقیقه بعد بدنیا اومدن به همراه مادرشون می‌تونن برن توی آب، «انسان در مقایسه با دیگر موجودات نارس متولد میشه» و سالها زمان نیاز داره بتونه گلیم خودشو از آب بیرون بکشه.&lt;/p&gt;

&lt;p&gt;از نظر خیلی‌ها همه این استدلال‌ها میتونن دلیل خوبی باشن، اما من برعکس فکر می‌کنم این جواب‌ها خیلی سطحی و عوامانه‌ست. خیلی ها استدلال می‌کنن که لگن بزرگتر در راه رفتن انسان اشکال ایجاد می‌کنه در نتیجه لگن کوچکتر مونده و عوضش نوزاد بطور نارس و با اندازه‌ای کوچکتر از حد معمول بدنیا اومده، این درحالیه که محققین باور دارن لگن بزرگتر هیچ تاثیری بر راه رفتن نداره.  واقعا زودرس بدنیا اومدن انسان به هیچکدوم از این موارد ربطی نداره، فلواقع &lt;strong&gt;انسان اصلا زودرس بدنیا نمیومده&lt;/strong&gt; و برعکس خیلی هم به موقع بدنیا میاد، ۲ دلیل مهم برای ناتوانی انسان در سالهای اول تولد ذکر شده:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;اندامه‌های انسان از همه موجودات دیگر پیچیده‌تر و بزرگتره (برای مثال مغز نسبت به اندازه بدن) و برای اینکه به تکامل برسه و بتونه بنیان وجودی خودشو بسازه احتیاج به مدت زمان بیشتری داره.&lt;/li&gt;
  &lt;li&gt;میزان مدت حاملگی بر اساس ظرفیت غذایی بدن مادر بستگی داره. اینکه مادر تا چه مدتی توان داره و می‌تونه جنین رو تغذیه کنه.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;نمی‌خوام وارد بحث‌های زیست شناسی و پزشکی بشم، برای همین شمارو ارجاع میدم به دو مطلب یکی در سایت &lt;a href=&quot;https://www.livescience.com/54605-why-are-babies-helpless.html&quot;&gt;LiveSciense&lt;/a&gt; و دیگری سایت &lt;a href=&quot;https://www.khabaronline.ir/detail/239468/science/fundamental-knowledge&quot;&gt;خبر آنلاین&lt;/a&gt; تا راجع به این موضوع اطلاعات بیشتری کسب کنین. هدف فقط شرح این مطلب بود که بگم ازین دست موارد در کتاب (بخصوص فصل اول) زیاد یافت میشه. هرچند که در ادامه و فصل ۲ به بعد، فرضیات و مسائلی که هراری مطرح می‌کنه دقیق‌تر، واقع بینانه‌تر و معقولانه‌تر میشه.&lt;/p&gt;

&lt;p&gt;در مورد پانویس‌ها هم شاید نویسنده میتونست بهتر عمل کرده و اونارو بهتر شرح بده (هرچند که این موضوعی کاملا به انتخاب مترجم برمی‌گرده و هیچ اجباری روی مترجم نیست). اما برای مثال:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;در زیر عنوان “خوشبختی شیمیایی” در صفحه۵۲۶ کتاب، هراری از زبان زیست شناسان بیان می کنه که دنیای ذهنی و عاطفی ما تحت حاکمیت ساز و کارهای بیوشیمیایی است و اونجا از سروتونین و دوپامین و اوکسی توسین نام می بره. مترجم در پانویس می تونست به جای توضیح فیزیولوژی صرف، و اینکه چه رگهایی رو تنگ و گشاد می کنه، به اثرات ذهنی و عاطفی و رفتاری این سه اشاره کنه، که فکر می کنم منظور هراری هم از آوردن این سه تا همین بوده. به هر حال اینا خیلی هم مهم نیست چون خواننده می تونه با یه جستجو متوجه نکته بشه. (سامان)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;در کل خوندن این کتاب به همه توصیه میشه، الالخصوص افرادی که به موضوعات اجتماعی-فلسفی علاقه دارن.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-4.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;در-ستایش-انسان-خردمند&quot;&gt;در ستایش انسان خردمند&lt;/h3&gt;

&lt;p&gt;در ستایش این کتاب (همونطور که در اولین بند‌های این پست به نمونه‌ای اشاره کردم) گفته‌های زیادی وجود داره، در ادامه بعضی از اونها رو ذکر کردم (برگرفته از کافه بوک):&lt;/p&gt;

&lt;p&gt;&lt;em&gt;دیلی تلگراف The Daily Telegraph – از روزنامه‌های لندن که در ۱۸۵۵ تاسیس شد:&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;شفافیت هراری در مباحث زیست‌شناسی و انسان‌شناسی تکاملی و اقتصاد، و گرایش‌های تاریخی او بسیار دلپذیر است. از او دور نشوید تا خیلی چیزها یاد بگیرید.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;جَرِد دایمونده – دانشمند و نویسنده کتاب فروپاشی:&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;انسان خردمند با جنجال فراوان به فهرست پرفروش‌ترین کتاب‌های جهان راه یافته است. دلیل آن ساده است: به بزرگ‌ترین مسائل تاریخ و جهان امروز می‌پردازد و به زبانی فوق‌العاده زنده و فراموش‌نشدنی نوشته شده است. عاشقش خواهید شد!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;ساندی تایمز The Sunday Times – روزنامه معتبر پرفروش انگلیسی:&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;کتابی که تارعنکبوتهای مغزتان را کنار می‌زند. هراری روشنفکر زبردستی است که اشارات منطقی ناگهانی‌اش خواننده را به حیرت و تحسین وامی‌دارد. قدرت شفافیت قلم او دنیا را شگفت‌انگیز و نو جلوه می‌دهد.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;تایمز The Times – یک روزنامه سراسری در کشور بریتانیا که در ۱۷۸۵ تاسیس شد:&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;هراری به معنای واقعی نویسنده است، نویسنده‌ای به راستی هوشمند با قلمی شفاف و ظریف. نگرش او به اشتعاره‌های زندگی شگفت‌انگیز است.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;مکملات&quot;&gt;مکملات&lt;/h2&gt;

&lt;p&gt;همیشه به این موضوع معتقد بودم که خوندن یه کتاب در یه موضوع خاص، اصلا نمیتونه درباره اون موضوع بهتون ویوو خوبی بده. باید راجع به چیزهایی که در بطن اون کتاب گفته میشه مطالعه داشت و با نظرات مختلف آشنا شد، وقتی که با نظرات مختلف آشنا شدی و تمام زوایایی اون رو سنجیدی اونوقت میتونی بگی که در مورد فلان موضوع نظر داری (چون قبلش از ویووی خوبی بهش نگاه کامل و عمیق انداختی). هر کتابی یه سری پیشنیاز و یه سری همنیاز داره که خوندن اونها میتونه دید عمیقتری از اون موضوع به شما ببخشه.&lt;/p&gt;

&lt;p&gt;برای مطالعه این کتاب هم چند مکمل در نظر گرفتم که مطالعه اونها میتونه منتهی به درک بهتر و لذت بردن شما از خوندن &lt;em&gt;کتاب انسان خردمند&lt;/em&gt; بشه.&lt;/p&gt;

&lt;h3 id=&quot;تاریخ-جهان&quot;&gt;تاریخ جهان&lt;/h3&gt;

&lt;p&gt;همونطور که قبلا هم گفتم این کتاب اصلا یه روایت تاریخ نیست، بلکه تحلیل و نظریات نویسنده درباره بشریته. برای اینکه درباره خیلی از مواردی که مطرح میکنه پیش ذهن داشته باشید، لازمه که قبلا درباره تاریخ جهان مطالعه داشته باشید.&lt;/p&gt;

&lt;p&gt;مطالعه تاریخ جهان (با اونهمه گستردگیش) می‌تونه خیلی وقت‌گیر باشه؛ در نتیجه برای اینکه بتونید هم مطالعه تاریخ رو داشته باشید، هم از خوندن کتاب انسان خردمند عقب نیفتید، کتاب صوتی &lt;strong&gt;تاریخ جهان اثر ارنست گامبریج&lt;/strong&gt; رو توصیه می‌کنم. این کتاب رو &lt;em&gt;علی رامین&lt;/em&gt; ترجمه و &lt;em&gt;جوانشیر بنیاب&lt;/em&gt; روایت کرده. روایت ساده، شیرین، بدون تکلف و مروروار تاریخ، این کتاب رو بهترین گزینه برای مطالعه نسبتا سریع تاریخ جهان کرده و بهترین گزینه برای اینکه ذهنتون رو درمورد تاریخ جهان (بدون جزئیات دقیق) آماده کنید برای خوندن کتاب انسان خردمند.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;کتاب تاریخ جهان اثر ارنست گامبریج تحولات و رخدادهای بشر را در چهل فصل از &lt;strong&gt;عصر حجر تا انرژی هسته‌ای&lt;/strong&gt; با زبانی بسیار &lt;strong&gt;ساده و صمیمی، بی‌تکلف، شیرین و جذاب&lt;/strong&gt; به صورت یک &lt;strong&gt;داستان&lt;/strong&gt; روایت می‌کند، چنان‌ که کثیری از خوانندگان آن در گروه‌های سنی و سطوح آموزشی مختلف گفته‌اند از گوش دادن به این کتاب نه‌ تنها بسیار لذت برده‌اند، بلکه آن را دریچهٔ نوینی به جهان تاریخی و تاریخ جهان یافته‌اند و بر آن شده‌اند که با کتاب‌های دیگری، مطالعه تاریخ را پی بگیرند. مفسر لوس‌آنجلس‌تایمز می‌گوید گامبریچ به تاریخ جان می‌بخشد و خواننده را همراه خود در سفینه‌ای زمان‌پیما بر فراز تاریخ جهان به پرواز درمی‌آورد و او را همواره در طول کتاب به سیر و سلوکی فکری و عاطفی میان گذشته و حال وامی‌دارد.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-5.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;انسان-خداگونه&quot;&gt;انسان خداگونه&lt;/h3&gt;

&lt;p&gt;یوال نوح هراری بعد از نوشتن کتاب انسان خردمند، کتاب دیگه‌ای رو منتشر کرده با عنوان &lt;strong&gt;«انسان خداگونه: تاریخ مختصر آینده»&lt;/strong&gt;. این کتاب رو باید دنباله‌ای موفق برای کتاب قبلی هراری به حساب بیاریم. توصیه شده که بعد از خوندن انسان خردمند، این کتاب هم مطالعه بشه. این کتاب رو &lt;strong&gt;زهرا عالی&lt;/strong&gt; ترجمه کرده و توسط &lt;strong&gt;فرهنگ نشرنو&lt;/strong&gt; منتشر شده.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;انسان خداگونه&lt;/em&gt; در پروژه‌ها و آرزوها و کابوس‌هایی کاوش می‌کند که قرن بیست‌ویکم را شکل می‌بخشند ــ از غلبه بر مرگ تا خلق زیست مصنوعی. از اینجا به کجا می‌رویم؟ و این جهان شکنندۀ کنونی را چگونه در برابر توانایی‌های نابودگرمان محافظت می‌کنیم؟
&lt;strong&gt;جنگ برمی‌افتد&lt;/strong&gt;
احتمال خودکشی بیش از کشته شدن در جنگ خواهد بود.
&lt;strong&gt;قحطی ناپدید می‌شود&lt;/strong&gt;
خطر چاقی بشر را بیش از گرسنگی تهدید می‌کند.
&lt;strong&gt;مرگ چیزی جز یک مشکل فنی نیست&lt;/strong&gt;برابری از میان می‌رود ــ پایندگی وارد می‌شود.
&lt;strong&gt;آینده برای ما چه در بر دارد؟&lt;/strong&gt;
مرحلۀ بعدی تکامل همین است.
&lt;strong&gt;انسان خردمند نشان داد که از کجا آمده‌ایم، انسان خداگونه نشان می‌دهد که به کجا می‌رویم.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-6.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;بیشتر-بخوانید&quot;&gt;بیشتر بخوانید&lt;/h3&gt;

&lt;p&gt;اگه از خوندن این کتابها لذت بردید، چند کتاب دیگه هم هست که خیلی ها توصیه به خوندنشون کردن (بزارید رونشتون کنم، کتاب‌هایی که در ادامه میاد معروفترین کتابها در این حوزه فکری هستن، و بر هرکسی واجبه که اونها رو مطالعه کنه)، در ادامه بطور خلاصه بهشون اشاره می‌کنم:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;اسلحه ميكروب و فولاد: سرنوشت جوامع انسانی (Guns, Germs, and Steel):&lt;/strong&gt; کتابی است نوشته &lt;strong&gt;جرد دایموند&lt;/strong&gt;، استاد جغرافیا و فیزیولوژی در دانشگاه کالیفرنیا، لس آنجلس. در سال ۱۹۹۸ این کتاب موفق به کسب جایزه پولیتزر و جایزه Aventis برای بهترین کتاب علمی شد. یک مستند تلویزیونی بر اساس این کتاب تولید شده و توسط انجمن جغرافیای ملی در ماه ژوئیه سال ۲۰۰۵ از شبکه پی بی اس پخش شد. این کتاب همچنین تحت عنوان عنوان اسلحه، میکروب و فولاد: تاریخی جامع از همه در ۱۳۰۰۰ سال گذشته منتشر شده‌است. این کتاب پس از پیش‌درآمد شامل چهار فصل با عناوین &lt;em&gt;«از عدن تا کاخامارکا»&lt;/em&gt;، &lt;em&gt;«پیدایش و گسترش تولید خوراک»&lt;/em&gt;، &lt;em&gt;«از خوراک تا سلاح، میکروب و فولاد»&lt;/em&gt; و &lt;em&gt;«دور دنیا در پنج فصل»&lt;/em&gt; و &lt;em&gt;«آینده تاریخ بشر به منزله علم»&lt;/em&gt; است.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;مترجم:&lt;/strong&gt; حسن مرتضوی / &lt;strong&gt;ناشر:&lt;/strong&gt; بازتاب نگار / &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://fa.wikipedia.org/wiki/%D8%A7%D8%B3%D9%84%D8%AD%D9%87%D8%8C_%D9%85%DB%8C%DA%A9%D8%B1%D9%88%D8%A8_%D9%88_%D9%81%D9%88%D9%84%D8%A7%D8%AF&quot;&gt;لینک به ویکیپدیا&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;آغاز بی‌نهایت: توضیحاتی که جهان را تغییر می‌دهد (The Beginning of Infinity):&lt;/strong&gt; این کتاب رو &lt;strong&gt;دیوید الیزر دویچ&lt;/strong&gt; (&lt;strong&gt;David Elieser Deutsch&lt;/strong&gt;) استاد فیزیک دانشگاه آگسفورد نوشته و توسط انتشارات &lt;strong&gt;Allen Lane&lt;/strong&gt; در بریتانیا منتشر شده. دیوید دویچ  به عنوان نویسنده این کتاب و یک فیزیکدان تجربی باور دارد که جواب های روشنی درباره دنیا وجود دارد که هنوز کشف نشده. او معتقد است که برای هر حقیقتی جوابی علمی وجود دارد. زاکربرگ درباره آن می گوید: «خیلی خوب است که سال خود را با کتابی پایان ببرید که نشان می دهد ارائه توضیح برای هر پدیده ای چگونه موقیت های کاملاً جدیدی را پدید می آورد.»&lt;/p&gt;

    &lt;p&gt;&lt;u&gt;متاسفانه این کتاب هنوز به فارسی ترجمه و منتشر نشده!&lt;/u&gt; - &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/The_Beginning_of_Infinity&quot;&gt;لینک به ویکیپدیا&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ژن خودخواه (The Selfish Gene):&lt;/strong&gt; کتابی دربارهٔ فرگشت (تکامل) است که ریچارد داوکینز در سال ۱۹۷۶ (میلادی) نوشت (واضح بگم، شاهکار قرن حاضر). این کتاب در دنبالهٔ کتاب نخست جرج ویلیامز به نام سازگاری و انتخاب طبیعی نوشته شده‌است. داوکینز اصطلاح ژن خودخواه را برای توضیح تکامل ژن_محور به کار برد، و بر این پایه است که تأثیر تکامل در سطح ژن‌ها بارزتر است و تکامل در سطح جانداران یا جمعیت‌ها هیچگاه بالاتر از انتخاب برپایهٔ ژن‌ها قرار نمی‌گیرد.&lt;/p&gt;

    &lt;p&gt;بر این اساس، انتظار می‌رود که یک جاندار تا آنجا تکامل یابد که شایستگی کلی‌اش (شمار پخش رونوشت‌های ژن‌هایش) بیشترین حالت ممکن شود. (نه یک جاندار خاص). در نتیجه، به سوی یک استراتژی پایدار تکاملی می‌رود. در این کتاب برای نخستین بار واژهٔ میم به کار رفته‌است. میم واحدهای فرهنگی تکاملی است که شبیه ژن‌ها در محیط زیستی عمل می‌کند. پیشنهاد شده که رونوشت‌برداری خودخواهانه علاوه بر ژن‌ها در فرهنگ‌های انسانی هم برابرهایی دارد. پس از انتشار کتاب، میمتیک موضوع بسیاری از پژوهش‌ها و کتاب‌ها بوده‌است. در سال ۲۰۱۷ در رای‌گیری جشن ۳۰ سالگی جایزه کتاب انجمن سلطنتی بریتانیا در مورد «اثر گذارترین کتاب علمی تمام ادوار تاریخ علم»، برای نخستین بار کتاب «ژن خودخواه» ریچارد داوکینز بالاتر از کتاب «منشاء انواع داروین» و «اصول ریاضیات طبیعی نیوتون» قرار گرفت.&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;مترجم:&lt;/strong&gt; جلال سلطانی / &lt;strong&gt;ناشر:&lt;/strong&gt; مازیار / &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://fa.wikipedia.org/wiki/%DA%98%D9%86_%D8%AE%D9%88%D8%AF%D8%AE%D9%88%D8%A7%D9%87&quot;&gt;لینک به ویکیپدیا&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ایده خطرناک داروین: فرگشت و معانی زندگی (Darwin’s Dangerous Idea):&lt;/strong&gt; کتابی از دانیال دنت است که به بررسی برخی پیامدهای نظریه فرگشت داروینی می‌پردازد. چکیده برهان او این است که چه نظریه‌های داروین زیر و رو شوند یا نه، دیگر برگشتی از ایده خطرناک نیست - ایده خطرناک این است: هدف، لزوماً نیازمند یک طراح نیست. دنت استدلال می‌کند که انتخاب طبیعی فرایندی کور است، که در عین حال آنقدر قدرت دارد که فرگشت حیات را به پیش راند. کشف داروین این بود که تولید حیات به صورت الگوریتمی است، که فرایندهای پشت سر آن به این صورت هستند که با وجود آنها نتایج به طور اجباری به وجود می‌آیند.&lt;/p&gt;

    &lt;p&gt;&lt;u&gt;متاسفانه این کتاب هنوز به فارسی ترجمه و منتشر نشده!&lt;/u&gt; / &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Darwin%27s_Dangerous_Idea&quot;&gt;لینک به ویکیپدیا&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-7.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;گفتگوهای-ویدئویی-آقای-هراری&quot;&gt;گفت‌گوهای ویدئویی آقای هراری&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;تد لندن:&lt;/strong&gt; سال ۲۰۱۵ آقای هراری طی ارائه‌ای که در TED لندن داشت، درباره کتاب انسان خردمند و نظریاتی که داره صحبت کرده. اگه هنوز کتاب رو نخوندین، شاید دیدن این ویدئو شما رو مطالعه کتاب ترغیب کنه. این ویدئو با زیرنویس فارسی روی سایت تد در دسترس قرار گرفته که البته از همینجا هم میتونید این ویدئو رو تماشا کنید.&lt;/p&gt;

&lt;div class=&quot;video-container&quot;&gt;
    &lt;div style=&quot;max-width:100%&quot;&gt;&lt;div style=&quot;position:relative;height:0;padding-bottom:56.25%&quot;&gt;&lt;iframe src=&quot;https://embed.ted.com/talks/lang/en/yuval_noah_harari_what_explains_the_rise_of_humans&quot; width=&quot;854&quot; height=&quot;480&quot; style=&quot;position:absolute;left:0;top:0;width:100%;height:100%&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;بعد از تد هم با کریس اندرسن نشتسن و حسابی در رابطه با تحولات سیاسی چندسال اخیر صحبت کردن و دیدن اون هم خالی از لطف نیست.&lt;/p&gt;

&lt;div class=&quot;video-container&quot;&gt;
    &lt;div style=&quot;max-width:100%&quot;&gt;&lt;div style=&quot;position:relative;height:0;padding-bottom:56.25%&quot;&gt;&lt;iframe src=&quot;https://embed.ted.com/talks/yuval_noah_harari_nationalism_vs_globalism_the_new_political_divide&quot; width=&quot;854&quot; height=&quot;480&quot; style=&quot;position:absolute;left:0;top:0;width:100%;height:100%&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;سریال-westworld&quot;&gt;سریال Westworld&lt;/h3&gt;

&lt;p&gt;یکی از دلایل ایجاد انگیزه در من برای خوندن کتاب انسان خردمند، دیدن سریال Westworld بود. البته یکی دو جا پیشنهاد داده بودن که اگه از این سریال خوشتون اومده پس این کتاب رو هم بخونید. در نتیجه اگه این سریال رو هنوز ندیدین (با توجه به اینکه فصل دومش هم کامل منتشر شده) بهتره که توی برنامه آتی‌تون حتما جایی برای دیدنش در نظر بگیرین.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;داستان این مجموعهٔ تلویزیونی در یک شهر بازی وسترن خیالی در غرب آمریکا اتفاق می‌افتد که ساکنان آن را انسان‌های مصنوعی که «میزبان» نام دارند، تشکیل می‌دهند. از سوی دیگر، گروهی از انسان‌های واقعی که «تازه‌واردان» یا «مهمانان» نام دارند، با پرداخت مبالغی زیاد می‌توانند وارد محوطهٔ پارک وست‌ورلد شوند و هرکاری که مایل باشند را انجام دهند و قادر خواهند بود تا با میزبانان هرطور که می‌خواهند رفتار کنند، بدون آنکه ترسی از تلافی توسط میزبانان داشته‌باشند.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-8.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;فیلم-quest-for-fire&quot;&gt;فیلم Quest for Fire&lt;/h3&gt;

&lt;p&gt;اگر به داروینیسم و تاریخ بشر (اونجوری که طرفداران انتخاب طبیعی بهش باور دارین) علاقه دارین، دیدن فیلم Quest for Fire یا «در جستجوی آتش» میتونه براتون جذاب و سرگرم‌کننده باشه. داستان فیلم در زمان ماقبل تاریخ اتفاق افتاده و سه تن از اعضای قبیله ایی را تعقیب می کند که در جستجوی منبع جدیدی برای آتش هستند.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;هشتاد هزار سال پیش. قبیله ی «اولام» منبع زندگی بخش آتش را ازطبیعت می گیرند، اگر چه هنوز نمی دانند چگونه باید آن را دوباره برافروزند. تا این که پیر قبیله، «نائو» (مگیل) را هم راه «آموکار» (پرلمن) و «گا» (ال کادی) برای به دست آوردن آتش روانه می کند.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-9.jpg&quot; alt=&quot;Sapiens: A Brief History of Humankind&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;تاریخ-مختصر-بشر-در-سه-هزار-کلمه&quot;&gt;تاریخ مختصر بشر در سه هزار کلمه&lt;/h3&gt;

&lt;p&gt;صدرا علی آبادی سعی کرده کتاب انسان خردمند - تاریخ مختصر بشریت رو در مختصر ترین حالت ممکن و بقول خودش در ۳۰۰۰ کلمه برای شما خلاصه و بازنشر کنه. اگه (مثل خیلی‌ها) حوصله خوندن کتاب‌های طولانی (خداییش ۵۶۷ صفحه طولانی نیست) رو ندارید، مطالعه این پست صدرا رو توصیه می‌کنم.
&lt;a href=&quot;https://sadraa.me/sapiens/&quot;&gt;لینک به پست انسان خردمند: تاریخ مختصر بشر در سه هزار کلمه&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;سفری-با-انسان-خردمند&quot;&gt;سفری با انسان خردمند&lt;/h3&gt;

&lt;p&gt;یکی از پست‌های خیلی خوبی هم که درباره این کتاب وجود داره، نوشته «سحر شاکر» عزیز درباره کتاب انسان خردمند در طی اون مدتی بود که کتاب رو مطالعه می‌کرد. خلاصه‌ای از تمام بخش‌های مهم کتاب و دیدی که سحر نسبت از این موضوعات مطرح شده در کتاب پیدا کرده. بخشی از مطلع این پست رو براتون میگذارم و ادامه‌شو که اگه دوست داشتین میتونید از طریق لینکی که در ادامه میاد مطالعه کنید. &lt;a href=&quot;http://saharshaker.com/homo-sapiens/&quot;&gt;لینک به پست سفری با انسان خردمند&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;کتاب انسان خردمند از همان کتاب‌هایی است که پنجره‌ای ساخت برایم که هر روز تلاش می‌کنم پنجرۀ این کتاب را همیشه باز نگه دارم. با این کتاب دوماه زندگی کردم.&lt;/p&gt;

  &lt;p&gt;در آن تنها با یک شخص نویسنده روبرو نبودم.
با یواال نوح هراری سفر ذهنی‌ای را آغاز کردم که با حوصله هرچه تمام‌تر دستم را گرفت و مرا از نردبان تاریخ بالا برد. در هر پله نگاه‌های کهن را توضیح داد. با آدم‌های مختلف به صحبت نشست تا به من شیوه نگاه‌کردن به نوعی جدید را بیاموزاند.&lt;/p&gt;

  &lt;p&gt;در این نوشته می‌کوشم نیمه‌ای از این سفرنامه را بنویسم. خواندنش به هیچ عنوان شما را از خواندن خود کتاب بی‌نیاز نمی‌کند. این کتاب آنقدر شور و هیجان دارد که به هیچ‌عنوان کسی نمی‌تواند با تعریف کردنش شما را از خواندنش بی‌نیاز کند. تنها تلاشم این است که شماهم مانند من علاقمند به خواندن آن شوید و سفر جدیدی و پرهیجانی را تجربه کنید.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ناوکست&quot;&gt;ناوکست&lt;/h3&gt;

&lt;p&gt;ناوکست پادکستی هست که «روشن» اون رو ورایت می‌کنه، این فصل ناوکست (که تا اینجا ۸ ایپزود اون منتشر شده ) به مقوله هویت با توجه علوم مختلف میپردازه. ناوکست بر مبنای کتاب انسان خردمند پیش میره و قصد داره فصول مختلف اون رو بررسی کنه. اگه به پادکست علاقه دارین، شنیدن ناوکست می‌تونه براتون جالب باشه.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://navcast.podbean.com/&quot;&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-10.jpg&quot; alt=&quot;NavCast&quot; /&gt;&lt;/a&gt;
&lt;strong class=&quot;caption&quot;&gt;&lt;a href=&quot;https://navcast.podbean.com/&quot;&gt;لینک به ناوکست&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;اپیزود‌های ناوکست:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;قسمت یک - حیوانی بی اهمیت:&lt;/strong&gt; برای شروع سراغ اجدادمون رفتیم و فامیل هایی که ازشون بی خبر بودیم. ما تنها گونه انسان نبودیم. با دونستن بیشتر از آغاز سفر انسان امید کمک به رفع تبعیضات و تعصبات داریم.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت دو - انسان آشپز:&lt;/strong&gt; این قسمت به اهمیت آتش در تکامل بشر، رازگشایی از کد ژنتیکی انسان و موضوعات دیگر میپردازد.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت سه - درخت ممنوعه:&lt;/strong&gt; این قسمت به نقش زبان درایجاد بستری برای همکاری گروههای پرجمعیت و همچنین توانایی افسانه پردازی های مشترک انسانهای امروزی در رسیدن به اهداف بسیار بزرگ میپردازد. جهش ژنتیکی یا خوردن میوه درخت ممنوعه؟&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت چهار - اسطوره پژو:&lt;/strong&gt; این قسمت به قدرت تخیلات مشترک انسانی و نقش مهم اونها در شکل دهی جوامع امروزی میپردازه.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت پنج - دور زدن ژنوم انسان:&lt;/strong&gt; در این قسمت به رهایی تکامل انسان از وابستگی ها فیزیولوژیکی و سرعت بخشیدن به این روند میپردازیم.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت شش ـ یک روز از زندگی آدم و حوا:&lt;/strong&gt; در این قسمت به زندگی اجداد دوره گردمون در بازه زمانی انقلاب ادراکی تا انقلاب کشاورزی میپردازیم.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;قسمت هفت - جامعه پیشرفته واقعی:&lt;/strong&gt; در این قسمت به ادامه زندگی اجداد دوره گردمون در بازه زمانی انقلاب ادراکی تا انقلاب کشاورزی میپردازیم و میگیم که چرا متخصصین به این جور جوامع میگن جامعه پیشرفته واقعی.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;پروژه-تاریخ-بزرگ&quot;&gt;پروژه تاریخ بزرگ&lt;/h3&gt;

&lt;p&gt;دوست دارید توی تاریخ 13.7 میلیارد سال جهان از بیگ بنگ تا زمان حاضر را قدم بزنید و دنبال جوابی برای سوال هایی مربوط به جهان کره ی زمین زندگی و انسانیت بگردین؟&lt;/p&gt;

&lt;p&gt;بیل گیتس و دیوید کریستین پروژه ی انجام داده که حاصلش جمع بندی ای از ۱۳٫۷ میلیارد سال تاریخ جهان از پیدایش تا به امروز بوده. پروژه ی Big History Project یا پروژه‌ی تاریخ بزرگ، داستانیه که همه باید بدونن. این داستان نه تنها برای کسانیه که به طور حرفه ای با تاریخ سر و کار دارند بلکه به خاطر علمی و دقیق بودنش برای هر کسی میتونه جذاب و مفید باشه.&lt;/p&gt;

&lt;p&gt;داستان از اینجا شروع شد که بیل گیتس با دیوید کریستین آشنا شد. کریستین یه تاریخدان مشهوره که درسی به نام تاریخ بزرگ رو وارد سیستم آموزشی کرده. این قضیه جرقه ای در ذهن بیل گیتس ایجاد میکنه که باعث میشه اون هم بخواد همچین کاری انجام بده. اینجوری میشه که با کمک کریستین، پروژه ی تاریخ بزرگ رو انجام میده.&lt;/p&gt;

&lt;p&gt;هدف اصلی اینکار این بوده گه همه‌ی مطالب علمی ای که در دبیرستان و دانشگاه میخونیم رو بهشون نظم بدهیم اما خیلی وقتها ترتیب و ارتباطاتشون به هم رو نمیدونیم . اینجوری خوندن و دونستن راجع به تاریخ خیلی راحت تر میشه و افراد بیشتری از سرتاسر جهان به دونستن این تاریخ که برای هر انسانی ضروریه، جذب میشن. کیه که نخواد بدونه توی چه جور جایی داره زندگی می کنه و چه اتفاقاتی قبل از دوران خودش افتاده؟&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/KA-share/BigHistory/KU1.0.5_BH_Timeline.pdf&quot;&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-11.png&quot; alt=&quot;Big history Project&quot; /&gt;&lt;/a&gt;
&lt;small class=&quot;caption&quot;&gt;داستان تاریخ بزرگ - &lt;a hreff=&quot;&quot;&gt;لینک به pdf اینفوگرافی اصلی&lt;/a&gt; - توجه کنید که حجم فایل اصلی ۱۶ مگابایته&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;متاسفانه در اثر شیوه آموزش متداول و سنتی تاریخ دهه‌ها وحتی قرنهاست که به طور معمول ذهن دانش آموزان تنها محدود به بازه ی بسیار کوچک پنج هزارساله ای که از آغاز اختراع خط تا با امروز سپری شده باقی مانده و از درک بازه های بزرگ زمانی که جهان ما از آغاز تا به امروز طی کرده ناتوانند. پروژه Big History با ملموس تر کردن این بازه های زمانی و نگاه کلی و منسجم خودش به مقوله‌ی تاریخ، می تونه در درک درست تر و دقیق تر دانش آموزان از جایگاه انسان در طول تاریخ جهان تاثیر به سزائی داشته باشه.&lt;/p&gt;

&lt;p&gt;در این پروژه تاریخ به کلی ترین شکل ممکن یعنی از زمان بیگ بنگ تا به امروز مطالعه شده و بر خلاف شیوه های متعارف تنها بر دوران تاریخ بشر متمرکز نمیشه. به همین دلیل در Big History علومی مانند فیزیک، شیمی، بیولوژی، زمین شناسی و غیره با شاخه های دیگر تاریخ پیوند می خورند.&lt;/p&gt;

&lt;p&gt;پروژه ی تاریخ بزرگ یا همون Big History به صورت یک دوره ی آنلاین رایگان در اینترنت قرار داره، که هر کسی از هر کجای جهان میتونه توش شرکت کنه. کافیه که توی سایتش ثبت نام کنید، تا به یکی از میلیاردها جوینده ی دانستنی های جالب علمی بپیوندید. &lt;a href=&quot;https://school.bighistoryproject.com/bhplive&quot;&gt;لینک به Big History Project&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;خود بیل گیتس این کورس یا دوره  رو جذابترین دوره آموزشی میدونه  در ضمن خود دیوید کریستین سخنرانی در تد درمورد پروژه ی تاریخ جهان داشته توصیه  میکنم  ببینید  همچنین کتابی با عنوان This Fleeting World: A Short History of Humanity در مورد تاریخ نوشته.&lt;/p&gt;

&lt;div class=&quot;video-container&quot;&gt;
    &lt;div style=&quot;max-width:100%&quot;&gt;&lt;div style=&quot;position:relative;height:0;padding-bottom:56.25%&quot;&gt;&lt;iframe src=&quot;https://embed.ted.com/talks/david_christian_big_history&quot; width=&quot;854&quot; height=&quot;480&quot; style=&quot;position:absolute;left:0;top:0;width:100%;height:100%&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;به نقل از &lt;a href=&quot;https://twitter.com/rezamahmooudi/status/1042849002205663232/photo/1&quot;&gt;رضا محمودی&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;جمعبندی&quot;&gt;جمع‌بندی&lt;/h2&gt;

&lt;p&gt;در این پست درباره کتاب انسان خردمند نوشته آقای یووال نوح هراری صحبت کردم، همینطور سعی کردم نظرات شخصی خودم رو راجع به این کتاب با شما به اشتراک بگذارم. باهم بعضی از قسمتهای کتاب رو بررسی کردیم و در ادامه تعدادی کتاب، فایل صوتی، فیلم و ویدئو معرفی کردم که با مطالعه و دیدن اونها می‌تونین درک بهتری از این کتاب پیدا کرده و با دنیایی که آقای هراری به ما معرفی میکنه بیشتر آشنا شیم.&lt;/p&gt;

&lt;p&gt;همه ما (حتما) سوالات مختلفی درباره تاریخ آفرینش، علت آفرینش، هدف آفرینش، هستی و موجودیت ما، علت خاص بودن ما، علت برتر بودن ما، راز این کنار هم زندگی کردن و خیلی خیلی سوالهای دیگه رو همیشه از خودمون میپرسیم. دلم می‌خواست بگم پاسخ این سؤال‌ها رو در این کتاب خواهید یافت. اما واقعیتش اینه که کتاب فقط سؤال‌های بیشتری ایجاد می‌کنه، که خب، همینشم خیلی خوبه.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;انقلاب علمی انقلابی در دانش نبود، بلکه انقلاب در نادانی بشر بود…. انسان معاصر به این ذهنیت رسید که اعتراف کند جواب بعضی سوالات بسیار مهم را نمی‌داند.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;مطالعه خود کتاب به همراه مکملاتش میتونه ۳ تا ۶ ماه کامل زمان ببره. با این حساب امیدوارم پاییز و زمستون جالبی رو سپری کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-09-27/sapiens-12.gif&quot; alt=&quot;Big history Project&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگه این کتاب رو خوندین یا نظری راجع بهش دارید، همچنین اگه مکمل دیگه‌ای در نظر دارید، می‌تونید در توییتر من رو منشن کرده یا زیر همین پست کامنت بگذارید.&lt;/p&gt;

&lt;p&gt;اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="انسان" /><category term="تاریخ" /><category term="جامعه‌شناسی" /><category term="فلسفه" /><summary type="html">این اولین مطلبی ست که درباره کتابهایی که خوندم می‌نویسم. و سعی میکنم تا جای ممکن ساده، روان و مختصر باشه. و چیزهایی که خوندم رو با شما به اشتراک میگذارم که شما هم بعدها اگر خواستید این کتاب رو مطالعه کنید، دانش قبلی راجع بهش داشته باشید.</summary></entry><entry><title type="html">کمربند خود را محکم ببندید، این یک پرواز آزمایشی است!</title><link href="https://isapanah.com/2018/testflight-beta-testing" rel="alternate" type="text/html" title="کمربند خود را محکم ببندید، این یک پرواز آزمایشی است!" /><published>2018-04-27T00:00:00+04:30</published><updated>2018-04-27T00:00:00+04:30</updated><id>https://isapanah.com/2018/testflight-beta-testing</id><content type="html" xml:base="https://isapanah.com/2018/testflight-beta-testing">&lt;p&gt;نسخه جدید اپ iOS فایبرنت که تموم شد، برای تست گرفتن رو چندتا دیوایس مختلف و بچه‌هایی که داخل تیم یا دوستایی که بیرون تیم بودن باید یه راه خوب پیدا می‌کردم.&lt;/p&gt;

&lt;p&gt;وقتی که روی اندروید کار می‌کنید، راه حل مختلفی وجود داره! راحت‌ترین راهش اینه که یه بیلد APK بگیری، بفرستیش واسه کسایی که میخوای، اونا هم اگه باگی پیدا کنن و یا بخوان نتیجه تست رو بهتون میگن به راحتی به اطلاعاتون میرسونن. البته میتونین از ابزارهای دیگه‌هم استفاده کنین، ‌مثل سرویس تست Firebase یا شرکتای دیگه که ازین خدمات میدن.&lt;/p&gt;

&lt;p&gt;اما وقتی روی iOS کار میکنی، ‌معمولا یه انتخاب بیشتر نداری؛ اونم سرویسیه که خود iTunes بهت میده و اسمشم هست &lt;a href=&quot;https://developer.apple.com/testflight/&quot;&gt;TestFlight&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;در این پست میخوام درمورد  آماده کردن اپ و انجام فرآیند تست‌فلایت صحبت کنم. پس کمربندهاتون رو برای یه پرواز لذت‌بخش ببنیدن.&lt;/p&gt;

&lt;h2 id=&quot;فهرست&quot;&gt;فهرست&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#what-is-testflight&quot;&gt;ابزار TestFlight چیست؟&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#before-start&quot;&gt;توجه پیش از شروع&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#preparing-for-testflight&quot;&gt;آماده سازی اپ برای TestFlight&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#creating-internal-users&quot;&gt;تعریف کاربران تست داخلی&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#creating-test-case&quot;&gt;ایجاد یک Test Case&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#internal-users&quot;&gt;کاربران Internal&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#external-users&quot;&gt;کاربران External&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#test-information&quot;&gt;اطلاعات تست&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#user-beta-testing&quot;&gt;تست Beta توسط کاربر&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#cancel-test&quot;&gt;لغو نسخه تست&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;جمع‌بندی&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;what-is-testflight&quot;&gt;ابزار TestFlight چیست؟&lt;/h2&gt;

&lt;p&gt;تست‌فلایت یا TestFlight ابزاریه که توسط Apple توسعه داده شده، تا شما بتونید نسخه تستی اپلیکیشنتون رو در اختیار کاربرانتون یا همون beta userها قرار بدین. توجه داشته باشین که این سرویس کاملا با انتشار اپ روی اپستور فرق میکنه و جداست. شما فقط یه نسخه رو برای یکسری از کاربران مشخصی که میشناسید منتشر می‌کنید تا براتون تست بگیرن، و درواقع بصورت پابلیک یا عمومی در دسترس کسی قرار نمیگیره.&lt;/p&gt;

&lt;p&gt;وقتی که شما یه نسخه تستی از اپتون رو روی تست‌فلایت میفرستین، و اونها ۹۰ روز (قبلا ۶۰ روز بوده) فرصت دارن تا اپ شمارو تست کرده و بهتون فیدبک بدن.&lt;/p&gt;

&lt;p&gt;کمتر حرف بزنیم و وارد بخش عملی بشیم.&lt;/p&gt;

&lt;h2 id=&quot;before-start&quot;&gt;توجه پیش از شروع&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;برای استفاده از این سرویس نیازه که حتما اکانت توسعه‌دهنده &lt;strong&gt;Individual&lt;/strong&gt; یا &lt;strong&gt;Enterprise&lt;/strong&gt; داشته باشین.&lt;/li&gt;
  &lt;li&gt;اگر از xcode غیر 9.3 استفاده می‌کنید، ممکنه برخی منوهایی که در این پست میبینید با چیزی که شما دارین فرق کنه. نگران نباشید، فرآیند کلی همیشه همینه.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-cover-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;preparing-for-testflight&quot;&gt;آماده سازی اپ برای TestFlight&lt;/h2&gt;

&lt;p&gt;قبل از اینکه هرکاری بکنیم، لازمه که دو مشخصه Version و Build اپمون رو ست کنیم. از Navigator اپ رو انتخاب کرده و از لیست Targest اپ رو انتخاب کنید. در بخش Identity مشخصات اپ رو باید وارد کنیم. متاسفانه اپل اجازه نمیده که برای version هیچ نامی از نوع String بنویسیم بلکه فقط باید از متد &lt;strong&gt;Semantic Versioning&lt;/strong&gt; پیروی کنیم. برای مثال نمیتونیم بنوسیم &lt;code class=&quot;highlighter-rouge&quot;&gt;2.0 beta&lt;/code&gt; بلکه باید بنویسیم &lt;code class=&quot;highlighter-rouge&quot;&gt;2.0.0&lt;/code&gt; یا هر ورژن دیگه‌ای که مد نظرتون هست. اگه راجع به نوع شماره گذاری ورژن اطلاع ندارید بهتره &lt;a href=&quot;https://semver.org/lang/fa/&quot;&gt;داکیونت خود سیمنتک&lt;/a&gt; رو بخونید. نسخه build هم که احتمالا می‌دونید، به ازای هربار بیلد و انتشار باید اون رو increment کرده یا همون افزایش بدید.&lt;/p&gt;

&lt;p&gt;در نهایت من برای اینکه نسخه بتا رو مشخص کنم در Display Name عبارت &lt;code class=&quot;highlighter-rouge&quot;&gt;beta&lt;/code&gt; رو استفاده کردم. (هواستون باشه بعدا برای ریلیز اصلی beta رو بردارید)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-0.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;از منوی نوار ابزا توسعه، دیوایسی که میخوام اپ رو منتشر کنیم رو میگذاریم روی &lt;code class=&quot;highlighter-rouge&quot;&gt;Generic iOS Device&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;بعد هم از نوار ابزار اصلی، منو Product گزینه Archive رو انتخاب کرده و صبر می‌کنیم تا اپمون رو پکیج کنه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-2.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;بعد از بیلد پنجره Orginizer باز میشه خودش. در صفحه اپمون که بیلد شده رو میبینید. نسخه‌ای که تمایل به بیلد دارید رو انتخاب کرده و بعد باید روی دکمه &lt;code class=&quot;highlighter-rouge&quot;&gt;Upload to App Store&lt;/code&gt; کلیک کنید. (البته میتونید از نوار ابزار اصلی، منوی Window به پنجره Organizer دسترسی پیدا کنید)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-3.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;بعدش هم دونه دونه پنجره‌هایی که باز میشه رو اکسپت کنید تا بره واسه ارسال به اپستور.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-4.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-5.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-6.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-7.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و درنهایت که اپتون با موفقیت ارسال شد این پیغام رو می‌بینید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-8.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در مرحله بعد باید بریم سراغ آماده سازی خود &lt;a href=&quot;https://itunesconnect.apple.com&quot;&gt;iTunesConnect&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;creating-internal-users&quot;&gt;تعریف کاربران تست داخلی&lt;/h2&gt;

&lt;p&gt;در تست فلایت دو نوع کاربر تست داریم، Internal Tester (که در نسخه جدید itunes تبدیل شده به &lt;code class=&quot;highlighter-rouge&quot;&gt;iTunes Users&lt;/code&gt;) و &lt;code class=&quot;highlighter-rouge&quot;&gt;External Users&lt;/code&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;iTunes users&lt;/strong&gt;: کاربرانی هستن،‌ که معمولا در تیم شما قرار دارند یا افرادی هستن که متقابلا همدیگه رو میشناسین و بهم اعتماد دارین. شما می‌تونید حداکثر تا ۲۵ نفر رو برای تست بتا انتخاب کنید. این افراد بدون هیچ معطلی و Review، میتونن اپتون و دریافتو تست کرده و درنهایت feedback بدن.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;External Users&lt;/strong&gt;: کسایی هستن که در تیم شما وجود ندارن، بلکه یکسری از کاربرانتون هستن که اعلام آمادگی کردن که تمایل دارن در تستهاتون شرکت کنن و البته الزاما در داخل تیم توسعه شما نیستن. شما در هربار تست می‌تونید تا ۱۰هزار کاربر انتخاب کنید (قبلا ۶۰۰۰ بود). اپ قبل از اینکه بدست این کاربران برسه باید توسط اپل Review و تست بشه تا مشکل امنیتی نداشته باشه، و بعد از اون در اختیار کاربران شما قرار میگیره. فرآیندی مثل انتشار اپ روی اپستور داره.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;برای تعریف کاربران تست داخلی یا Internal اول وارد پنل &lt;a href=&quot;https://itunesconnect.apple.com&quot;&gt;itunesconnect.apple.com&lt;/a&gt; بشید و سپس از منوها به گزینه Users Role بروید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-9.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در این صفحه لازمه که شما افرادی که میخواهید در تست‌های Internal شرکت میکنند رو ثبت کنید. روی علامت &lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt; کلید کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-10.png&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در صفحه افزودن کاربر جدید مشخصات کاربر به همراه Apple IDشون رو ثبت کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-11.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در صفحه بعد باید &lt;code class=&quot;highlighter-rouge&quot;&gt;Role&lt;/code&gt; یا نقش این کابر جدید رو تعریف کنید. حداقل Roleی که میتونه در تست مشارکت داشته باشه &lt;strong&gt;Marketer&lt;/strong&gt; هست.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-12.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;یادتون نره که حتما کاربر رو به اپ مورد نظرتون assign کنید، البته اگه چندتا اپ دارین و فرقی براتون نمیکنه و تمایل دارین به همشون دسترسی مشابه رو داشته باشه، بزارید همون گزینه All Apps بمونه.
&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-12-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و بعدش میزان دسترسی که مد نظرتون هست رو در براش ست کنید. (البته اگه گزینه Marketer رو انتخاب کرده‌بودید)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-13.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;توانایی‌های هرکدوم از نقش‌هارو می‌تونید در جدول زیر ببینید:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-14.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب کاربر به لیست اضافه شد. بعد از اضافه شدن، کاربر مورد نظر باید ایمیلی که براش اومده رو تایید کنه تا به عنوان کاربر Role مورد نظر، ثبت نهایی شه. شما از همین صفحه میتونید Role و برخی مشخصات کاربر رو ویرایش کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-14-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;creating-test-case&quot;&gt;ایجاد یک Test Case&lt;/h2&gt;

&lt;p&gt;بعد از اینکه کاربر بطور کامل تایید و فعال شد، از پنل &lt;strong&gt;itunesconnect&lt;/strong&gt; به بخش &lt;strong&gt;MyApps&lt;/strong&gt; رفته و &lt;strong&gt;اپ خودتون&lt;/strong&gt; رو انتخاب کنید. در این صفحه وارد تب Activty بشین و مطمئین بشید که اپتون در حالت &lt;code class=&quot;highlighter-rouge&quot;&gt;Process&lt;/code&gt; نباشه و فرآیند بررسی و پردازش اولیه‌ش تموم شده باشه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-15.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;سپس وارد بخش TestFlight میشیم. از دسته Builds روی &lt;strong&gt;iOS&lt;/strong&gt; کلیک میکنیم تا لیست اپ‌های قابل تست رو بیاره. همونطور که میبینید اپ‌ی رو که اضافه کردیم کنارش یه Warning داده و گفته &lt;strong&gt;Missing Compliance&lt;/strong&gt;. روش کلیک میکنیم تا مواردی که ازمون میخواد رو تایید کنیم. این اطلاعات مربوط به این میشه که آیا اپلیکیشن شما Encryption و امنیت اطلاعات کاربر رو رعایت کرده؟ و آیا با قوانین ایالات متحده منافاتی نداره؟ و چیزای مثل این، که روی همه‌ي nextها میزنیم بره پی کارش.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-16.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-17.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-18.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-19.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب حالا اپمون آماده‌ست برای انتشار به افرادی که در گروه‌های تست ما قرار دارند.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-20.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;internal-users&quot;&gt;کاربران Internal&lt;/h3&gt;

&lt;p&gt;برای اینکه افرادی که در اینترنال قرار دارند رو مشخص کنید، از دسته Tester &amp;amp; Groups گزینه &lt;strong&gt;iTunes Connect Users&lt;/strong&gt; رو انتخاب می‌کنیم. با کلیک روی علات &lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt; می‌تونید افرادی رو که میخواید اپ بتا برای تست رو دریافت کنند انتخاب کنید. این افراد همونهای هستند که در بخش User Roles قبلا تعریف و فعالشون کردیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-21.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;external-users&quot;&gt;کاربران External&lt;/h3&gt;

&lt;p&gt;مثل سری قبل، از دسته Tester &amp;amp; Groups گزینه &lt;strong&gt;Add External Tester&lt;/strong&gt; رو انتخاب می‌کنیم، در پنجره‌ای که باز میشه، بهمون میگه که واسه گروهی که قراره اپ رو تست کنن یه اسم بنویسیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-22.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;حالا باید تستر جدید اضافه کنیم، کافیه در گروه جدیدمون روی &lt;code class=&quot;highlighter-rouge&quot;&gt;Add Tester&lt;/code&gt; کلیک کنیم. در صفحه جدید بهمون این امکان رو میده که به ۳ روش کاربر تست اضافه کنیم.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;New Tester :&lt;/strong&gt; که مثل حالت تعریف کردن internal tester هست.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Existing Tester :&lt;/strong&gt; میتونیم از بین کاربرای اینترنال به این گروه کاربر اضافه کنیم. فکر کنین تو شرکتتون ۵۰تا کارمند دارین، فقط ۲۰ نفرشون میتونن تو اینترنال شرکت کنن، الباقی رو باید به همین روش به عنوان کاربر اکسترنال اضافه کنید. (توجه کنید که کاربری که در حالت Internal انتخاب کردید، نمیتونه در گروه External هم حضور داشته باشه.)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;CVS List :&lt;/strong&gt; و گزینه سوم که بهمون این امکان رو میده تا از طریق یا فایل CSV کاربرانمون رو ایمپورت کنین. فرض کنین یه فرم گذاشتین تو سایتتون تا کاربرای که تمایل دارن تو تست شرکت کنند رو بیارون تو تست فلایت، مثلا ۵هزار کاربر ثبتنام کردن، بجای اینکه دستی دونه دونه اضافه کنید، با این روش تا ۱۰ هزار کاربر رو میتونید اضافه کنید.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-23.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگه خواستید با CSV کاربر اضافه کنید، &lt;a href=&quot;https://itunesconnect.apple.com/itc/docs/tester_import.csv&quot;&gt;ازین قالب CSV&lt;/a&gt; استفاده کنید تا فرمت فایلتون صحیح باشه.&lt;/p&gt;

&lt;p&gt;بعد از کلیک روی &lt;strong&gt;Add New Tester&lt;/strong&gt; به صفحه‌ای رسیدم که بصورت دستی کاربران تست External رو باید وارد کنیم. برای مثال باز مشخصات خودم رو مینویسم:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-24.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و میبینید که من به لیست External اضافه شدم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-25.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;وارد تب Build شده و روی تب &lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt; کلیک می‌کنیم. در پنجره‌ای که باز میشه، اون بیلد از اپمون رو که دوست داریم ازش تست اکسترنال بگیریم انتخاب می‌کنیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-26.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگر اپ احتیاج به Sign in داشته باشه، مشخصات یه اکانت تست رو توش می‌نویسیم تا کابرا در sign-in مشکل نداشته باشن.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-27.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و همونطور هم که از اسکرین‌شات پایین برمیاد، یه توضیح باید واسه رویوو کننده و البته کاربر تست بنویسیم (اگه احتیاج به توضیحی بود البته).&lt;/p&gt;

&lt;p&gt;تیک &lt;code class=&quot;highlighter-rouge&quot;&gt;Automatically notify testers&lt;/code&gt; رو هم بزارین باشه تا بعد از اینکه اپ آماده تست شد خود اپل به اونا خبر بده که برن برای تست. (معمولا بصورت ایمیلی یا نوتیفیکیشن بهشون خبر میده)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-28.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و در نهایت اپتون میره برای Reviewو در صورتی که (انشاالله) بدون مشکل تایید بشه، میرسه دست کاربرانتون برای تست. تقریبا بین ۱۲ تا ۲۴ ساعت (اگر مشکلی نباشه) اپتون برای تست بتا تایید شده و در اختیار کاربرا قرار میگیره.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-29.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-anim-1.gif&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;به محض انتشار اپ برای تست، براشون ایمیل و نوتیفیکیشن میره (اگه اون تیک Automatically که گفتم رو زده باشین). کاربرا ۶۰ روز فرصت دارن تا کار تست رو انجام داده و در صورت لزوم feedback بدن.&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;هنگامی که داشتم این پست رو مینوشتم همزمان هم نسخه تست رو فرستادم بالا، در کمتر از ۶ ساعت تایید شد و در اختیار لیست کاربرای External قرار گرفت.&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-anim-2.gif&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-29-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;test-information&quot;&gt;اطلاعات تست&lt;/h3&gt;

&lt;p&gt;اگر در حین تعریف تست (احتمالا اولین‌باری که دارید روند تست رو انجام می‌دید) به خطای نبود اطلاعات تست برخوردید، باید از بخش App Information گزینه &lt;strong&gt;Test Information&lt;/strong&gt; رو انتخاب کنید و مشخصات خودتون رو وارد کنید. اطلاعاتی مثل ایمیل (برای دریافت feedback)، آدرس وبسایتتون، آدرس قوانین و حریم شخصی در وبسایتتون، مشخصات تماس شما از قبیل نام و شماره تلفن، مجددا همون اکانت تست و توضیحاتی که لازمه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-30.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;user-beta-testing&quot;&gt;تست Beta توسط کاربر&lt;/h2&gt;

&lt;p&gt;اول از همه نیازه تا کاربر اپلیکیشن &lt;a href=&quot;https://itunes.apple.com/us/app/testflight/id899247664?mt=8&quot;&gt;TestFlight&lt;/a&gt; رو از &lt;a href=&quot;https://itunes.apple.com/us/app/testflight/id899247664?mt=8&quot;&gt;اپستور&lt;/a&gt; دریافت و روی دیوایس خودش نصب کنه. کاربر تمامی آپدیت‌ها و نوتفیکیشن‌ها برای تست رو از طریق این اپلیکیشن دریافت میکنه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-31.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگر احتیاج به لاگین داشت که باید با همون اپل‌ایدی که بعنوان کاربر تست معرفی شده لاگین کنید. ایمیل جهت تایید دریافت نسخه تست به دست شما (کاربر) میرسه به ایمیل رفته و روی دکمه &lt;code class=&quot;highlighter-rouge&quot;&gt;view in TestFlight&lt;/code&gt; کلیک کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-32.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگر اپ تست‌فلایت روی آیفون نصب بوده، و اکانت اپل IDتون هم بدون مشکل لاگین باشه، این صفحه در اپلیکیشن TestFlight براتون ظاهر میشه که باید &lt;strong&gt;Accept&lt;/strong&gt; کرده و سپس اپ رو نصب کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-33.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در بعضی موارد بعد از کلیک روی اون دکمه آبی &lt;strong&gt;view in TestFlight&lt;/strong&gt;، به سمت سایت اپل هدایت می‌شید، ازتون درخواست میکنه که لاگین کنید، قوانینش رو تایید کنید و بعد از تایید شمارو میفرسته به یه صفحه که یه &lt;strong&gt;کد (معمولا) ۸ حرفی&lt;/strong&gt; داره، اون رو کپی کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-33-1.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگر اپ تست‌فلایت روی آیفون نصب بوده، و اکانت اپل IDتون هم بدون مشکل لاگین باشه، این صفحه در اپلیکیشن TestFlight براتون ظاهر میشه که باید &lt;strong&gt;Accept&lt;/strong&gt; کرده و سپس اپ رو نصب کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-33-2.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;بعد از تایید و نصب، نسخه تست با نقطه &lt;strong&gt;قرمز&lt;/strong&gt;ی که کنارش مشخص شده، روی صفحه اپهاتون ظاهر میشه. اگه قبلا یه نسخه نصب کرده باشید و نسخه جدید روی اون نصب کنید، نقطه &lt;strong&gt;آبی&lt;/strong&gt; کنارش ظاهر میشه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-34.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در صورتی که در اپلیکیشن باگ یا مشکلی پیدا کردین، یا که پیشنهادی داشتین، از همون اپ TestFlight می‌تونید به توسعه دهنده &lt;code class=&quot;highlighter-rouge&quot;&gt;FeedBack&lt;/code&gt; رو ارسال کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-35.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;باقی چیزهایی هم که در &lt;strong&gt;Test Information&lt;/strong&gt; ثبت کرده بودیم از داخل همین صفحه در اختیار کاربر تست هست و میتونه اونهارو مشاهده کنه.&lt;/p&gt;

&lt;h2 id=&quot;cancel-test&quot;&gt;لغو نسخه تست&lt;/h2&gt;

&lt;p&gt;درصورتی که بعد یه مدت زمان مشخص، مثلا چند هفته یا یکی دو ماه تشخیص دادین که دیگه کافیه و نیازی به ادامه تست نیست، و یا موردی در اپ وجود داشت که نیاز بود هرچه سریعتر نسخه تست رو از دست همه کاربران تستتون خارج کنید. فقط کافیه وارد بخش TestFlight شده. به دسته Builds و بخش iOS رفته، نسخه مورد نظرتون رو انتخاب کنید. در نهایت روی دکمه &lt;code class=&quot;highlighter-rouge&quot;&gt;Expire Build&lt;/code&gt; کلیک کرده و تاییدش کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-36.jpg&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اینجوری اپتون از دسترس آپدیت خارج میشه و دیگه نمیتونن بهش دسترسی داشته باشه.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;جمع‌بندی&lt;/h2&gt;

&lt;p&gt;میدونم خیلی طولانی و گیج کننده بود، ‌ولی یکبار که فرآیندش رو طی کنید، همه‌چیز براتون روال میشه. این بهترین، سریعترین، امن‌ترین و تمیزترین کاریه که شما می‌تونید برای تست بتا انجام بدین.&lt;/p&gt;

&lt;p&gt;اگه تمایل داشتین راجع به تست فلایت بیشتر بدونید، بهترین منبع داکیومنت خودشه که می‌تونید از صفحه &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/BetaTestingTheApp.html&quot;&gt;TestFlight Beta Testing Documentation&lt;/a&gt; اون رو مطالعه کنید. صفحه اپل هم خودش بطور خلاصه راجع به این سرویس در &lt;a href=&quot;https://developer.apple.com/testflight/&quot;&gt;این صفحه&lt;/a&gt; صحبت کرده، و هرچی منبع و مقاله و ویدئو راجع به تست‌فلایت هست رو آورده، مثل ویدئوِ &lt;a href=&quot;https://itunespartner.apple.com/en/apps/videos#testflight-beta-testing&quot;&gt;TestFlight Traning Process&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;این پست حاصل تجربه شخصی من از تست فلایت و خوندن و دیدن چند مقاله و ویدئو بوده. امیدوارم تو این پست کامل و جامع راجع به سرویس TestFlight صحبت کرده و تمام گوشه‌های تاریکش رو براتون روشن کرده باشم.&lt;/p&gt;

&lt;p&gt;تمامی فرآیند انتشار و آزمون تست رو در روند توسعه اپلیکیشن &lt;a href=&quot;https://fibernet.ir&quot;&gt;فایبرنت&lt;/a&gt; انجام دادیم. از تیم خوبم برای پشتیبانی و تست تمامی مراحل و نسخه‌های بتا تشکر میکنم. مرسی از &lt;a href=&quot;https://twitter.com/mahsa4733&quot;&gt;مهسا&lt;/a&gt; بخاطر تستهای دقیقش، از &lt;a href=&quot;http://moshtaghi.ir&quot;&gt;مهدی&lt;/a&gt; بابت همراهی و راهنماییهاش و همچنین &lt;a href=&quot;https://twitter.com/fsalehpour&quot;&gt;فرامرز&lt;/a&gt; (برای توسعه بک‌اند) و &lt;a href=&quot;https://twitter.com/xdshayan&quot;&gt;شایان&lt;/a&gt; (برای طراحی UI).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-27/testflight-anim-3.gif&quot; alt=&quot;TestFlight Beta Testing&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Test" /><category term="TestFlight" /><summary type="html">نسخه جدید اپ iOS فایبرنت که تموم شد، برای تست گرفتن رو چندتا دیوایس مختلف و بچه‌هایی که داخل تیم یا دوستایی که بیرون تیم بودن باید یه راه خوب پیدا می‌کردم.</summary></entry><entry><title type="html">قدرت پنهان console در توسعه جاوا اسکریپت</title><link href="https://isapanah.com/2018/the-power-of-console-in-development" rel="alternate" type="text/html" title="قدرت پنهان console در توسعه جاوا اسکریپت" /><published>2018-04-20T00:00:00+04:30</published><updated>2018-04-20T00:00:00+04:30</updated><id>https://isapanah.com/2018/the-power-of-console-in-development</id><content type="html" xml:base="https://isapanah.com/2018/the-power-of-console-in-development">&lt;p&gt;وقتی شروع به توسعه در یک تکنولوژی یا زبان خاص می‌کنید، در اغلب موارد غرق در ابزارهای مختلفی میشیم که اون بیرون بهمون پیشنهاد میشه یا باهاش مواجه میشیم(البته ابزارهایی که برای برای راحتی و سرعت بخشیدن به توسعه در همون اسکوپ ایجاد شدن). حتی درگیر جنگ با خودم و اون ابزارها میشم تا پیدا کنم کدومشون واقعا به درد کارم میخوره. در نهایت وقتی کارم تموم میشه، میفهمم کلی ابزار مختلف رو تست کردم، که هیچکدوم یا توی پروژه استفاده نشده، یا استفاده درست و کاملی ازشون نکردم، در عوضش پروژه رو هم نتونستم به TimeBox برسونم!&lt;/p&gt;

&lt;p&gt;در طی این چندسالی که عمیقا به برنامه نویسی علاقه‌مند شدم، با ابزارهای مختلفی روبرو شدم که برای مدتها اونهارو نادیده میگرفتم؛ ابزارهایی ضروری، ساده و قدرمند که در داخل همون تکنولوژی‌ها ایمپلمنت و اِمبِد شده بود.&lt;/p&gt;

&lt;p&gt;یکی از اون ابزارها که همه برنامه نویسها حتما یکبار باهاش روبرو شدن، و برنامه نویسای وب، که ابزار کاری هرروزه‌شونه، چیزی نیست جز &lt;strong&gt;JavaScript Console&lt;/strong&gt; یا راحت‌تر بگیم &lt;code class=&quot;highlighter-rouge&quot;&gt;console.log()&lt;/code&gt;. من باهاش کاملا آشنام، شما چطور؟&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;در این پست قصد دارم در رابطه با امکانات و ابزارهایی که کنسول جاوااسکریپت بهمون میده صحبت کرده و باهم بررسیشون کنیم. پس بریم ببینیم قراره چیکار کنیم.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-0.gif&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;کنسول-یا-console-چیست&quot;&gt;کنسول یا console چیست؟&lt;/h2&gt;

&lt;p&gt;کنسول یه فیچر یا ابزار ساخته شده در دل جاوا اسکریپته که امروزه همه مرورگرها از اون به عنوان یه ابزار توسعه ضروری پشتیبانی میکنن. این ابزار کاربردی جاوااسکریپت با رابط کاربری‌ &lt;strong&gt;shell&lt;/strong&gt; مانندی، به توسعه‌دهندگان این اجازه رو میده تا:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;خطا یا اخطاری که در  وب پیج بوجود اومده رو ببینن&lt;/li&gt;
  &lt;li&gt;بتونن از طریق کامند‌ها و دستورات جاوااسکریپت با اون صفحه وب تعامل داشته باشن&lt;/li&gt;
  &lt;li&gt;اپلیکیشن‌ها رو دیباگ کنن، مستقیما بتونن DOM هارو از طریق مرورگر بررسی کنن&lt;/li&gt;
  &lt;li&gt;بتونن فعالیت شبکه رو تجزیه تحلیل کنند&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;بطور کلی، به ما کمک میکنه تا بتونیم در داخل خود مرورگر جاوا اسکریپت رو بنویسیم، مدیریت کرده و در نهایت اون رو مانیتور کنیم.&lt;/p&gt;

&lt;h2 id=&quot;استفاده-از-console-در-مرورگر&quot;&gt;استفاده از Console در مرورگر&lt;/h2&gt;

&lt;p&gt;می‌تونید با استفاده از کلیدها میانبری که در ادامه بهش اشاره میکنم‌، برای بالا آوردن کنسول در مرورگرتون استفاده کنین:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;برای Mozilla Firefox&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;For MAC users:&lt;/strong&gt; &lt;em&gt;COMMAND + OPTION + K&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;For Windows and Linux users:&lt;/strong&gt; &lt;em&gt;CTRL + SHIFT + K&lt;/em&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;در Google Chrome&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;For MAC users:&lt;/strong&gt; &lt;em&gt;COMMAND + OPTION + J&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;For Windows and Linux users:&lt;/strong&gt; &lt;em&gt;CTRL + SHIFT + J&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;For Windows users:&lt;/strong&gt; &lt;em&gt;F12&lt;/em&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;در Safari&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;For MAC users:&lt;/strong&gt; &lt;em&gt;COMMAND + OPTION + C&lt;/em&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;در Opera mini&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;For MAC users:&lt;/strong&gt; &lt;em&gt;COMMAND + OPTION + I&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;strong&gt;For Windows and Linux users:&lt;/strong&gt; &lt;em&gt;CTRL + SHIFT + I&lt;/em&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

&lt;/div&gt;

&lt;p&gt;وقتی که کنسول رو باز می‌کنید، با چیزی شبیه این که از پایین باز شده باید مواجه بشید:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-0.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;بررسی-apiهای-ابزار-کنسول&quot;&gt;بررسی APIهای ابزار کنسول&lt;/h2&gt;

&lt;p&gt;در مسیر توسعه، خیلی مهمه که هر توسعه‌دهنده‌ای با تمام زیبایی‌ها و قدرت کنسول آشنا شده باشه و حتما اونها رو در روند دیباگ کردن بکار ببنده. خب پس اجازه بدین یه سری از این امکانات و APIهای ضروری که کنسول در اختیارمون میگذاره بررسی کنیم.&lt;/p&gt;

&lt;h3 id=&quot;consolelog&quot;&gt;Console.log&lt;/h3&gt;

&lt;p&gt;احتمالا این پرکاربردترین چیزیه که تاحالا از کنسول دیده باشین. این API بهمون کمک میکنه تا رشته متنی که مد نظرمون هست رو به راحتی چاپ کنیم. به ازای هر آبجکتی که در log قرار میدین (و بینیشون &lt;code class=&quot;highlighter-rouge&quot;&gt;,&lt;/code&gt; هست)، یه فاصله یا &lt;strong&gt;space&lt;/strong&gt; چاپ میکنه.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;The current time is:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگه کنسول رو باز کنید و این تکه کد رو باهاش تست کنین، جوابی که میگیرن حتما چیزی مثل این خواهد بود:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-1.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;p&gt;این API عملکردش مثل &lt;code class=&quot;highlighter-rouge&quot;&gt;console.debug()&lt;/code&gt; هست.&lt;/p&gt;

&lt;h3 id=&quot;consolegroup&quot;&gt;Console.group&lt;/h3&gt;

&lt;p&gt;این متد بهمون کمک میکنه تا یه گروه از لاگ ساخته و بعد چاپ کنید. گروهی که میسازین همیشه باید بین &lt;code class=&quot;highlighter-rouge&quot;&gt;console.group()&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;console.groupEnd()&lt;/code&gt; قرار بگیره. برای مثال اینطوری میتونین یه گروه از لاگ‌ها ایجاد کنین.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Country Profile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'name: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'continent: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;continent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'type: '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;groupEnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Nigeria&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;continent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Africa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Democratic&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و چیزی که در کنسول میبینید شبیه اینه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-2.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;p&gt;وقتی که یه گروه لاگ داشتید که کلی آبجکت داره، میتونید بجای &lt;code class=&quot;highlighter-rouge&quot;&gt;console.group()&lt;/code&gt; از &lt;code class=&quot;highlighter-rouge&quot;&gt;console.groupCollapsed()&lt;/code&gt; استفاده کنید تا چیزی که لاگ میگیرید بصورت collapse یا بسته شده چاپ بشه. نتیجه‌ش میشه این.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-3.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoletrace&quot;&gt;Console.trace&lt;/h3&gt;

&lt;p&gt;این متد کمک میکنه تا یه stack trace رو از نقطه‌ای که قرارش دادیم برامون چاپ کنه. این کد این امکان رو میده تا چیز‌های callشده یا execute میشن چاپ بشه، درواقع ایونت‌ها رو trackیا پیگری میکنه. اگه خواستین اطلاعات بیشتری راجع به console.trace کسب کنین، میتونین &lt;a href=&quot;https://hungryturtlecode.com/tips-tricks/console-trace/&quot;&gt;این مقاله&lt;/a&gt; رو مطالعه و یا &lt;a href=&quot;https://www.youtube.com/watch?v=QuO0UDkW2rk&quot;&gt;این وید&lt;/a&gt; رو مشاهده کنید. اما برای نمونه به این تکه کد نگاه کنید:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و چیزی که درنهات برامون چاپ میشه خیلی جالبه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-4.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoletable&quot;&gt;Console.table&lt;/h3&gt;

&lt;p&gt;یکی از جذابترین امکاناتی که من از کنسول دیدم، همین قضیه تیبل کردن لاگ‌هاست. این متد بهتون کمک میکنه تا یه object array رو بصورت تیبل نمایش بدید. به کد دقت کنید:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;food&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Rice&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;carbohydrate&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;protein&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Beans&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;food&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و این عصای جادویی، چیزی که در نهایت برامون چاپ خواهد کرد اینه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-5.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoleerror&quot;&gt;Console.error&lt;/h3&gt;

&lt;p&gt;این متد، رشته مارو بصورت یک error یا خطا نمایش میده. برخلاف console.log این متد، استایل و طرح متفاوتی شبیه error ها صفحهات وب داره (مثل اون خطاهای قرمز رنگ). همچنین هنگام چاپ اون پیام، استکی که اون پیام رو داره چاپ میکنه رو هم بهمون خبر میده. چرا زیاد حرف میزنم، بهتره خود مثال رو ببینیم:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;error: There is a terrifying error!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و نتیجه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-6.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;p&gt;متد &lt;code class=&quot;highlighter-rouge&quot;&gt;console.warn()&lt;/code&gt; هم رفتار مشابه‌ای داره، با این تفاوت که استایل چاپ کردنش با error فرق میکنه و زرد رنگه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-7.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consolecount&quot;&gt;Console.count&lt;/h3&gt;

&lt;p&gt;این متد برای ما میشمره که که چندبار اون پیام (با لیبل مشابه) برامون چاپ شده. فرقی نمیکنه که این متد رو کجای کدتون و چندبار گذاشته باشین. هربار که لیبلی مشابه داشته باشه. برامون تعدادش رو چاپ میکنه. برای مثال:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;printThe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' is printed.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;printThe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Tehran&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و نتیجه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-8.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoletime-و-consoletimeend&quot;&gt;Console.time و Console.timeEnd&lt;/h3&gt;

&lt;p&gt;با استفاده از متد &lt;code class=&quot;highlighter-rouge&quot;&gt;console.time()&lt;/code&gt; ما میتونیم زمان اتفاق افتاده بین دو نقطه رو تریس کنیم و ببینیم چقدر طول کشیده. در یک صفحه میتونیم تا ۱۰هزار تایمر همزمان ایجاد کنیم. و از متد &lt;code class=&quot;highlighter-rouge&quot;&gt;console.timeEnd()&lt;/code&gt; برای متوقف کردن تایمر و چاپ اون در لاگ استفاده میکنیم. توجه کنید که برای مشخص کردن تایمر، باید به عنوان پارامتر، یک لیبل یکتا پاس کنید. برای مثال توجه کنید به کد زیر:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'init arr'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;timeEnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'init arr'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;timeEnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و نتیجه ای که در کنسول میبینیم:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-9.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoleclear&quot;&gt;Console.clear&lt;/h3&gt;

&lt;p&gt;این هم که خیلی مشخصه، لاگ‌های پاک شده در کنسول رو پاک میکنه.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;با اینکه واضحه، ولی اینم نتیجه‌ش:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-10.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;consoleassert&quot;&gt;Console.assert&lt;/h3&gt;

&lt;p&gt;این متد بهمون کمک میکنه تا یه جورای assert test بگیریم. شامل دو پارت میشه، اولی شرط ادعا و پارامترهای دوم و بعدی، متنی که قراره چاپ بشه. این متد موقعی اقدام به چاپ میکنه که شرط اداعای شما صحت نداشته باشه و درواقع نتیجه برابر &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt; باشه. به این مثال زیبا توجه کنید:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lesserThan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a is not lesser than b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;lesserThan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//and then&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;lesserThan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;نتیجه حاصل این میشه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-20/console-11.png&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;دیگر-امکانات-معمولی-که-کنسول-به-ما-میدهد&quot;&gt;دیگر امکانات معمولی که کنسول به ما می‌دهد&lt;/h2&gt;

&lt;p&gt;کنسول کلی امکانات مختلف و جورواجور بهمون میده تا بتونیم تو جای جای مسیر توسعه ازش استفاده کنیم. چیزهایی مثل:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Diagnosing and logging to console&lt;/li&gt;
  &lt;li&gt;Time and monitor executions&lt;/li&gt;
  &lt;li&gt;Handle exceptions and errors&lt;/li&gt;
  &lt;li&gt;Monitor events&lt;/li&gt;
  &lt;li&gt;Evaluate expressions&lt;/li&gt;
  &lt;li&gt;Comparison of data objects&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;در-انتها&quot;&gt;در انتها&lt;/h2&gt;

&lt;p&gt;امکانات و کاربردهای بیشماری که کنسول بهمون میده، باعث میشه که همیشه ازش بعنوان یه ابزار مفید و صد البته ضروری در مسیر توسعه جاوا اسکریپت استفاده کنیم. بجای که اینکه با دهها ابزار که هیمنجوری در workspaceمون ریخته ور بریم، بهتره با چندتا ابزار کاربردی و قوی آشنا شده و توی اونها به قول معروف به درجه master برسیم.&lt;/p&gt;

&lt;p&gt;اگه زیادی از اصطلاحات انگلیسی استفاده کردم که باعث شده خوندن در برخی جاها سخت بشه پوزش میخوام، ولی واقعا نمیشه برای بسیاری از این لغات تکنیکال معادل فارسی آورد،‌ و هیچی مثل خود همون عبارت انگلیسیش نمیتونه حق مطلب رو ادا کنه. شاید تو یه پست جدا گانه راجع به این موضوع صحبت کردم.&lt;/p&gt;

&lt;h2 id=&quot;منابع-مفید&quot;&gt;منابع مفید&lt;/h2&gt;

&lt;p&gt;اگه دوست داشتین بیشتر راجع به امکانات و قدرت‌هایی که کنسول بهمون میده مطالعه کنید، در ادامه چندتا لینک آورد که امیدوارم بدردتون بخوره:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developers.google.com/web/tools/chrome-devtools/console/&quot;&gt;Google Developer Docs on Chrome Dev Tools&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Console&quot;&gt;Mozilla Developer Network Web Docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-use-the-javascript-developer-console#working-with-the-console-in-a-browser&quot;&gt;Digital Ocean Community Tutorials&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="JavaScript" /><category term="console" /><category term="ES6" /><summary type="html">وقتی شروع به توسعه در یک تکنولوژی یا زبان خاص می‌کنید، در اغلب موارد غرق در ابزارهای مختلفی میشیم که اون بیرون بهمون پیشنهاد میشه یا باهاش مواجه میشیم(البته ابزارهایی که برای برای راحتی و سرعت بخشیدن به توسعه در همون اسکوپ ایجاد شدن). حتی درگیر جنگ با خودم و اون ابزارها میشم تا پیدا کنم کدومشون واقعا به درد کارم میخوره. در نهایت وقتی کارم تموم میشه، میفهمم کلی ابزار مختلف رو تست کردم، که هیچکدوم یا توی پروژه استفاده نشده، یا استفاده درست و کاملی ازشون نکردم، در عوضش پروژه رو هم نتونستم به TimeBox برسونم!</summary></entry><entry><title type="html">دسترسی به Nested Objectها در JavaScript</title><link href="https://isapanah.com/2018/accessing-nested-objects-on-javascript" rel="alternate" type="text/html" title="دسترسی به Nested Objectها در JavaScript" /><published>2018-04-13T00:00:00+04:30</published><updated>2018-04-13T00:00:00+04:30</updated><id>https://isapanah.com/2018/accessing-nested-objects-on-javascript</id><content type="html" xml:base="https://isapanah.com/2018/accessing-nested-objects-on-javascript">&lt;p&gt;همونطور که احتمالا خیلی‌هاتون بامن هم‌عقیده هستین، جاوا اسکریپت زبان در دسترس، جالب و گاهی اوقات فوق‌العاده‌ایه. اما بعضی چیزا توی جاوا اسکریپت هست که واقعا عجیبه و غریبه! یکی از اون چیزا، وقتیه که سعی میکنیم یه آبجک نستد شده رو بگیریم و یهو این خطا به ما برمیگرده:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Cannot read property ‘foo’ of undefined&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;خیلی وقتایی که داریم در پروژه‌ جاوا اسکریپت کد میزینم، لازمه که از نستد آبجکت‌ها استفاده کرده و دیتا رو بطور امن دریافت کنیم، نه اینکه ازین خطاهای مزخرف بده و یکساعت بگردی ببینی کجای کارو اشتباه رفتی و چه مشکلی بوجود اومده.&lt;/p&gt;

&lt;p&gt;میخوایم ببینیم برای حل این مشکل چه کارایی میشه انجام داد، بیایید با یه مثال بریم جلوو، فرض کنین همچین آبجکتی داریم:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;101&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sadra@dev.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Sadra'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;line1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'kakh square'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;line2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'5 azar st'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'gorgan'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'GOLESTAN'&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;برای دسترسی به اسم یا شهر userمون اینجوری مینویسیم:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;userCity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب این ساده و مستقیمه.&lt;/p&gt;

&lt;p&gt;اما یه موقع‌هایی اصلا آبجکت user فیلدی به نام personalInfo نداره.  (الالخصوص وقتی داری با دیتابیس‌های non-relational مثل mongo کار میکنی). اونوق آبجکتت این شکلی میشه:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;101&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sadra@dev.com'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب حالا وقتی تلاش میکنی که به مقدار name دسترسی پیدا کنی، با خطای &lt;em&gt;Cannot read property ‘name’ of undefined&lt;/em&gt; مواجه میشی.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Cannot read property 'name' of undefined&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;این برای اینه که سعی میکنیم به آبجکت &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; دسترسی پیدا کنیم، درحالی که حتی وجود خارجی نداره!&lt;/p&gt;

&lt;p&gt;معمول‌ترین راه برای حل این مشکل که خیلی‌ها هم استفاده میکنن اینه:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// undefined error will NOT be thrown as we check for existence before access&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب اینم یه راهه، ولی تا موقعی که آبجکتت مثل چیزی که بالا مثال زدیم ساده باشه. اگه یه آبجکت تودرتو تا ۵ ۶ مرحله داشته باشیم، اونموقع دستور شرطی که مینوسیم یه چیز احمقانه و عجیب قریبی مثل این میشه:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addressDetails&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addressDetails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;primaryAddress&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addressDetails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;primaryAddress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اینجا چندتا راه حل هست تا بتونیم این قضیه رو به درستی هندل کنیم.&lt;/p&gt;

&lt;h2 id=&quot;الگوی-دسترسی-به-نستد-آبجکتِ-oliver-steele&quot;&gt;الگوی دسترسی به نستد آبجکتِ Oliver Steele&lt;/h2&gt;

&lt;p&gt;این یکی از محبوب‌ترین روش‌های دسترسی به یک شی نستد هست که کار رو کلی &lt;strong&gt;ساده&lt;/strong&gt; و &lt;strong&gt;تمیز&lt;/strong&gt; میکنه. من این راه حل رو خیلی وقت پیش توی  &lt;strong&gt;&lt;a href=&quot;https://stackoverflow.com/a/4034468/5330668&quot;&gt;Stackoverflow&lt;/a&gt;&lt;/strong&gt; پیدا کرده بودم و بنظرم خیلی حرفه‌ای میومد.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;personalInfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;با این notationای که استفاده کردیم، عمرا دیگه به خطای &lt;em&gt;Cannot read property ‘name’ of undefined&lt;/em&gt; بربخوریم 😬.&lt;/p&gt;

&lt;p&gt;اگه بخوام روش کنم که دقیقا چیکار کردیم، باید بگم داریم چک میکنیم اگر آبجکت &lt;code class=&quot;highlighter-rouge&quot;&gt;user&lt;/code&gt; وجود نداره یه آبجکت خالی همینجوری رو هوا بساز و اگه وجود داشت، مرحله مرحله جلو میریم تا به property مورد نظرمون برسیم. و این باعث میشه که &lt;strong&gt;تاهیچوقتِ تاریخ، به خطایِ نبودنِ شیِ موردِ نظر&lt;/strong&gt; بر نخوریم!&lt;/p&gt;

&lt;p&gt;اما خب، متاسفانه با این روش نمیتونین به &lt;strong&gt;nester array object&lt;/strong&gt; دسترسی داشته باشین!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2018-04-13/screaming_from_js.gif&quot; alt=&quot;Screaming from js&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;استفاده-از-array-reduce-برای-دسترسی-به-آبجکتی-از-آرایهی-نستد-شده&quot;&gt;استفاده از Array Reduce برای دسترسی به آبجکتی از آرایه‌ی نستد شده!&lt;/h2&gt;

&lt;p&gt;متد Array Reduce یه راه قدرتمند و امن برای دسترسی به همچین مواردی هست. به مثال توجه کنید.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getNestedObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nestedObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;pathArr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;pathArr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'undefined'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;nestedObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// pass in your object structure as array elements&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getNestedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'personalInfo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// to access nested array, just pass in array index as an element the path array.&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getNestedObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'personalInfo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'addresses'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'city'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// this will return the city from the first address item.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;کتابخونه-typy&quot;&gt;کتابخونه Typy&lt;/h2&gt;

&lt;p&gt;و در نهایت، این کتابخونه میتونه حلال همه مشکلاتتون باشه.&lt;/p&gt;

&lt;p&gt;این کتابخونه علاوه به اینکه بهتون کمک میکنه تا به راحتی و با خیال راحت به هر آبجکت نستدی دسترسی پیدا کنید، بلکه کلی امکانات دیگه هم در ختیارتن میگذاره. این ابزار کاربردی از طریق کتابخونه npm در دسترس شماست - &lt;a href=&quot;https://github.com/flexdinesh/typy&quot;&gt;Typy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;خب، برای همون مثال بالا اگه بخواییم از Typy استفاده کنیم، اینجوری میشه&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'typy'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'personalInfo.name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;safeObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;city&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'personalInfo.addresses[0].city'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;safeObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// address is an array&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;کلام-آخر&quot;&gt;کلام آخر&lt;/h2&gt;

&lt;p&gt;کلی راه حل مختلف برای حل این مشکل وجود داره که میتونید در &lt;a href=&quot;https://stackoverflow.com/a/41532415/5330668&quot;&gt;این کامنت&lt;/a&gt; ۱۰ تاشونو ببینین، ولی خب من سعی کردم به اون ۲ ۳ تایی که واقعا بدرد بخور بودن بپردازم.&lt;/p&gt;

&lt;p&gt;البته یه سری لایبرری دیگه هم هستن که خیلی میتونن تو این قضیه کمکتون کنن، کتابخونه‌هایی مثل &lt;a href=&quot;https://lodash.com/&quot;&gt;Lodash&lt;/a&gt; و &lt;a href=&quot;http://ramdajs.com/&quot;&gt;Ramda&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;اما در پروژه‌‌هایی که کدهاتون لازمه در سبک‌ترین حالت ممکنن قرار بگیره (مثلا پروژه‌های front-end) و الالخصوص جاهایی که به یکی دو تا ازین متد‌ها بیشتر احتیاج ندارین، سعی کنین شخصا کد و متد موردنیازتون رو بنویسین و خودتون رو همیشه از شر دیپندنسی‌هاو لایبررهای عجیب غریب در امان نگهدارید 😉.&lt;/p&gt;

&lt;p&gt;اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="JavaScript" /><category term="ES6" /><summary type="html">همونطور که احتمالا خیلی‌هاتون بامن هم‌عقیده هستین، جاوا اسکریپت زبان در دسترس، جالب و گاهی اوقات فوق‌العاده‌ایه. اما بعضی چیزا توی جاوا اسکریپت هست که واقعا عجیبه و غریبه! یکی از اون چیزا، وقتیه که سعی میکنیم یه آبجک نستد شده رو بگیریم و یهو این خطا به ما برمیگرده:</summary></entry><entry><title type="html">Promise تابحال هیچوقت انقدر آسون نبوده</title><link href="https://isapanah.com/2017/js-promise" rel="alternate" type="text/html" title="Promise تابحال هیچوقت انقدر آسون نبوده" /><published>2017-11-27T00:00:00+03:30</published><updated>2017-11-27T00:00:00+03:30</updated><id>https://isapanah.com/2017/js-promise</id><content type="html" xml:base="https://isapanah.com/2017/js-promise">&lt;h2 id=&quot;مقدمه&quot;&gt;مقدمه&lt;/h2&gt;

&lt;p&gt;خیلی وقت پیش در حین انجام یک پروژه در NodeJs نیاز پیدا کردم که چندتا متد رو بصورت متوالی و nested استفاده کنم، و متد ها هم به این صورت بود که باید صبر میکردن تا داخلی ترین متد انجام بشه و بعد متد خارجی با استفاده از نتیجه متد داخلی وظیفه خودش رو انجام بده، و این توالی تا آخرین متد خارجی ادامه داشت. (تا جایی که یادم میاد تا ۴ مرحله نست شده بود.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-11-27/js-promise-nested-blocks.jpg&quot; alt=&quot;Nested Blocks&quot; /&gt;&lt;/p&gt;

&lt;p&gt;جدا از این مورد، مشکل دیگه ای که وجود داشته این بود که اولا این متد‌ها Async بودن، و دوما اینکه ممکن بود نتیجه sucessfull یا failed بشه. خلاصه به هر کثافتی که بود کارو انجام دادم.
چند وقت بعد &lt;a href=&quot;http://moshtaghi.ir/&quot;&gt;مهدی&lt;/a&gt; بهم گفت که میتونی از &lt;strong&gt;Promise&lt;/strong&gt; برای این معضل استفاده کنی. و اینجوری بود که زندگی زیبا می‌شود!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-11-27/js-promise-yeah.gif&quot; alt=&quot;Yes&quot; /&gt;&lt;/p&gt;

&lt;p&gt;از چندتا از دوستان شنیدم که هنوز پرامیس رو درک نکردن و نمیدونن که فرقش با چیزای دیگه مثل Callback چیه. در این پست قصد دارم به ساده‌ترین روش ممکن راجع به Promiseها و اینکه واقعا چطوری باید ازشون استفاده کرد صحبت کنم. پس حرف رو کوتاه کنیم و بریم سر اصل مطلب.&lt;/p&gt;

&lt;p&gt;در ادامه فهرستی از سرفصل مطالبی که میخوام در این پست صحبت کنم با لینک به همون تیتر قرار دادم.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#subject&quot;&gt;شرح&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#how-to-create-a-Promise&quot;&gt;ساختن یک Promise&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#how-to-user-promise&quot;&gt;استفاده از Promise&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#chain-of-promises&quot;&gt;زنجیره Promiseها&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#asynchronous-promise&quot;&gt;پرامیس‌ها Asynchronous هستند&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#promises-in-variety-of-js&quot;&gt;پرامیس در ES5، ES6, ES7&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#promise-in-es5&quot;&gt;ES5 - در اکثر مرورگرها پشتیبانی میشه&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#promise-in-es6&quot;&gt;ES6 - در مرورگرهای مدرن، و NodeJs v6 پشتیبانی میشه&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#promise-in-es7&quot;&gt;ES7 - استفاده از Async Await سینتکس رو قابل خوندن میکنه&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#when-and-why-promises&quot;&gt;چرا و چه موقع از Promise استفاده کنیم؟&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#callback&quot;&gt;دنیا قبل از پرامیس: Callback&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#scape-from-callback-hell&quot;&gt;فرار از Callback Hell&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#observable&quot;&gt;عضو جدید این خانواده: Observables&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;نتیجه‌گیری&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;subject&quot;&gt;شرح&lt;/h2&gt;

&lt;p&gt;بزارین همین اول کار، پرامیس رو با طرح یک مثال براتون ساده کنم:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;فرض کنید یه &lt;strong&gt;بچه&lt;/strong&gt; هستید. و &lt;strong&gt;مادرتون&lt;/strong&gt; بهتون &lt;strong&gt;قول میده&lt;/strong&gt; که هفته دیگه یه &lt;strong&gt;گوشی جدید&lt;/strong&gt; براتون بخره.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;شما اولا نمی‌دونید که آیا هفته دیگه یه گوشی براتون میخره یا نه؟ ثانیا اینکه آیا واقعا مادرتون برای شما یه گوشی جدید میخره؟ ثالثا ممکنه اصلا اون هفته از دستتون ناراحت باشه و کلا بیخیال خرید گوشی بشه!&lt;/p&gt;

&lt;p&gt;این کامل‌ترین مثالی بود که از Promise می‌تونستم بزنم. هر پرامیس ۳وضعیت داره:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;پرامیس در حال بررسیه &lt;strong&gt;Pending&lt;/strong&gt;: شما نمی‌دونید که آیا هفته دیگه براتون گوشی میخره یا نه.&lt;/li&gt;
  &lt;li&gt;پرامیس حل شده &lt;strong&gt;Resolved&lt;/strong&gt;: مادرتون واقعا یه گوشی جدید براتون خریده.&lt;/li&gt;
  &lt;li&gt;پرامیس رد شده &lt;strong&gt;Rejected&lt;/strong&gt;: مادرتون براتون گوشی جدید نخریده، چون واقعا از دستتون ناراحت بوده.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;حالا که با مفهوم و حالت‌های پرامیس آشنا شدید، بریم ببینم که چجوری میشه ازش استفاده کرد.&lt;/p&gt;

&lt;h2 id=&quot;how-to-create-a-Promise&quot;&gt;ساختن یک Promise&lt;/h2&gt;

&lt;p&gt;اجازه بدید در همین اولین قدم، چیزهایی که بالا گفتیم رو به کد جاوا اسکریپت تبدیل کنیم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/* ES6 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//Promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;brand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'iPhone X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'gray'&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//fulfilled&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Mom is angry.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//reject&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;فکر میکنم که خودش به اندازه کافی گویا هست.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ما یک متغییر بولین بنام &lt;code class=&quot;highlighter-rouge&quot;&gt;isMomHappy&lt;/code&gt; داریم، که برامون مشخص میکنه آیا مامان OK هست واسه خریدن یا نه.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;یه پرامیس هم بنام &lt;code class=&quot;highlighter-rouge&quot;&gt;willGetNewPhone&lt;/code&gt; داریم. که این پارمیس، هم میتونه حل &lt;code class=&quot;highlighter-rouge&quot;&gt;Resolved&lt;/code&gt; بشه (مامان برات یه گوشی جدید بخره)، هم میتونه رد &lt;code class=&quot;highlighter-rouge&quot;&gt;Rejected&lt;/code&gt; بشه (مامان از دستت عصبانیه، و عمرا برات گوشی جدید بخره).&lt;/p&gt;

    &lt;p&gt;یک syntax استاندارد برای نوشتن &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt; جدید وجود داره که بر اساس &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise&quot;&gt;داکیومنت MDN&lt;/a&gt;، این سینتکس اینجوریه:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Promise syntax looks like this&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* executor */&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;تنها چیزهایی که لازمه بخاطر بسپارین این که، وقتی نتیجه کار موفقیت‌آمیزه، باید متد &lt;code class=&quot;highlighter-rouge&quot;&gt;resolve(your_success_value)&lt;/code&gt; رو فراخوانی کرده، و به هر دلیلی اگه نتیجه موفقیت‌آمیز نیست، باید متد &lt;code class=&quot;highlighter-rouge&quot;&gt;reject(your_fail_value)&lt;/code&gt; رو فراخوانی کنید. هردوی اینها باید در داخل متد &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt; انجام بشه.
   همونطور هم که در مثال می‌بینید ازونجایی که مامان عصبانی بود، ما مجبور شدیم درخواست رو رد کرده و با فرواخوانی متد &lt;code class=&quot;highlighter-rouge&quot;&gt;reject(reason)&lt;/code&gt; و پاس کردن مقدار reason این مقوله رو به سرانجام برسونیم. البته، اگرهم مامان اوکی بود و گوشی جدید رو خرید، با فراخوانی متد &lt;code class=&quot;highlighter-rouge&quot;&gt;resolve&lt;/code&gt; به همراه مقدار JSON از مشخصات گوشی خریداری شده، نتیجه &lt;strong&gt;قول&lt;/strong&gt; رو اعلام می‌کردیم.&lt;/p&gt;

&lt;h2 id=&quot;how-to-user-promise&quot;&gt;استفاده از Promise&lt;/h2&gt;

&lt;p&gt;حالا که فهمیدیم چطوری میشه یه پرامیس ساخته، بهتره نحوه استفاده کردن ازش رو هم یاد بگیریم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/* ES6 */&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// call our promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//yay, you got a new phone&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//output: { brand: 'iPhone X', color: 'gray' }&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//oops, mom don't buy it&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//output: 'Mom is angry.'&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;در اینجا ما متد &lt;code class=&quot;highlighter-rouge&quot;&gt;askMom&lt;/code&gt; رو فراخونی میکنیم. و در داخل اون، متد پرامیسی که ساخته بودیم، یعنی &lt;code class=&quot;highlighter-rouge&quot;&gt;willGetNewPhone&lt;/code&gt;، رو صدا میزنیم.&lt;/p&gt;

&lt;p&gt;ما میخواییم وقتی که پرامیس بهمون جواب میده بتونیم اکشن مناسب رو نشون بدیم. برای مواقعی که پاسخ &lt;strong&gt;resolve&lt;/strong&gt; هست متد &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt; استفاده میشه؛ و برای مواقعی که پاسخ &lt;strong&gt;reject&lt;/strong&gt; هست، متد &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt; صدا میشه.&lt;/p&gt;

&lt;p&gt;در این مثال، در داخل &lt;code class=&quot;highlighter-rouge&quot;&gt;.then&lt;/code&gt; ما متد &lt;code class=&quot;highlighter-rouge&quot;&gt;function(fulfilled) {…}&lt;/code&gt; رو داریم. مقدار این متغییرِ &lt;code class=&quot;highlighter-rouge&quot;&gt;fulfilled&lt;/code&gt; چیه؟ دقیقا همون چیزیه که شما در متد &lt;code class=&quot;highlighter-rouge&quot;&gt;resolve(your-success_value)&lt;/code&gt; پاس کردین. که در اینجا همون مشخصات گوشی جدیده ست.&lt;/p&gt;

&lt;p&gt;همینطور در داخل &lt;code class=&quot;highlighter-rouge&quot;&gt;.catch‍&lt;/code&gt; هم متد &lt;code class=&quot;highlighter-rouge&quot;&gt;function(error) {…}&lt;/code&gt; رو داریم. که مقدار &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; برابر با مقداری هست که ما با &lt;code class=&quot;highlighter-rouge&quot;&gt;reject(your_fail_value)&lt;/code&gt; پاسش کردیم. در این مثال مقدار error برابر بود با دلیل ریجکت شدن درخواست.&lt;/p&gt;

&lt;p&gt;اجازه بدید کدهایی که تا الان زدیم رو اجرا کنیم و نتیجه کار رو ببینیم.
اجرای دمو از &lt;a href=&quot;https://jsbin.com/luceriy/4/edit?js,console&quot;&gt;این لینک&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-11-27/js-promise-mom-promise-demo.gif&quot; alt=&quot;Mom Promise Demo&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;chain-of-promises&quot;&gt;زنجیره Promiseها&lt;/h2&gt;

&lt;p&gt;پرامیس‌ها قابلیت زنجیره (متوالی) شدن رو دارند.&lt;/p&gt;

&lt;p&gt;برای مثال، فرض کنید شما همون کودک مثال قبل هستید. حالا به دوستتون &lt;strong&gt;قول می‌دید&lt;/strong&gt; که وقتی مامان واستون گوشی جدید رو خرید، بهش &lt;strong&gt;نشون بدید.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;خب، پس بریم پرامیس بعدی رو بنویسیم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 2nd promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
		&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
			&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Hey friend, I have a new '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;brand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;نکات:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;در این مثال احتمالا متوجه شدید که ما از &lt;code class=&quot;highlighter-rouge&quot;&gt;reject&lt;/code&gt; استفاده نکردیم. خب این متد یه چیز optional و انتخابیه، فقط موقعی که نیاز هست ازش استفاده کنید.&lt;/p&gt;

&lt;p&gt;ما حتی میتونیم با استفاده از &lt;code class=&quot;highlighter-rouge&quot;&gt;Promise.solve&lt;/code&gt; این متد رو ساده‌تر هم بنویسیم .&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// shorten it&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 2nd promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Hey friend, I have a new '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;brand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب، حالا وقت زنجیر کردن پرامیس‌هاست. شما - اون بچه داستان - فقط وقتی می‌تونید به دوستتون اون گوشی جدید رو نشون بدید &lt;code class=&quot;highlighter-rouge&quot;&gt;showNewPhone&lt;/code&gt;، بعد از اینکه مامان اون گوشی رو واستون خریده باشه &lt;code class=&quot;highlighter-rouge&quot;&gt;willGetNewPhone&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// call our promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// chain it here&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//yay, you got a new phone&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//output: 'Hey friend, I have a new gray iPhone X.'&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//oops, mom don't buy it&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;//output: 'Mom is angry.'&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;به همین راحتی می‌تونید پرامیس‌ها رو به همن زنجیر کنید.&lt;/p&gt;

&lt;h2 id=&quot;asynchronous-promise&quot;&gt;پرامیس‌ها Asynchronous هستند&lt;/h2&gt;

&lt;p&gt;این خیلی واضحه که پرامیس‌ها آسنکرون هستن. اصلا اجازه بدید برای اثبات این موضوع چندتا لاگ بندازیم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// call our promise&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'before asking Mom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// log before&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'after asking mom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// log after&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;فکر می‌کنید نتیجه‌ چی میشه؟ احتمالا انتظار دارید همچین چیزی دریافت کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Log&quot;&gt;1. before asking Mom
2. Hey friend, I have a new black Samsung phone.
3. after asking mom
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ولی چیزی که واقعا دریافت میکنیم اینه:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Log&quot;&gt;1. before asking Mom
2. after asking mom
3. Hey friend, I have a new black Samsung phone.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-11-27/js-promise-chain-demo.gif&quot; alt=&quot;Chain Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;چرا؟ چون زندگی (یا JS) منتظر هیچ کسی نمی‌مونه&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;شما، یا درواقع همون بچه، از بازی کردن دست نمی‌کشید موقعی که منتظرید تا مامانتون به قولش (خریدن موبایل جدید) عمل کنه؛ غیر از اینه؟ این همون چیزیه که ما بهش میگیم asynchronous، کد کاملا اجرا میشه، بدون اینکه سرویسمون رو بلاک کنه یا منتظر جواب بشه. هرموقع جواب رسید، بهش واکنش مناسب رو نشون میده. هرکاری که قراره موقع عمل کردن مامان به قولش  انجام بدید، فقط کافیه بزارینش داخل &lt;code class=&quot;highlighter-rouge&quot;&gt;.then&lt;/code&gt; 😉 .&lt;/p&gt;

&lt;h2 id=&quot;promises-in-variety-of-js&quot;&gt;پرامیس در ES5، ES6, ES7&lt;/h2&gt;

&lt;p&gt;&lt;b id=&quot;promise-in-es5&quot;&gt;ES5 - در اکثر مرورگرها پشتیبانی میشه&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;سرویسی که نوشتیم در اکثر مرورگرها و البته در NodeJs قابل استفاده است. البته در ES5 این ابزار همینجوری قابل استفاده نیست و برای استفاده ازش باید از لایبرری &lt;a href=&quot;http://bluebirdjs.com/docs/getting-started.html&quot;&gt;Bluebird&lt;/a&gt; استفاده کنید. البته لایبرری معروف دیگه‌ای هم برای اینکار هست به اسم &lt;a href=&quot;https://github.com/kriskowal/q&quot;&gt;Q&lt;/a&gt; که توسط Kris Kowal توسعه داده شده.&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;promise-in-es6&quot;&gt;ES6 - در مرورگرهای مدرن، و NodeJs v6 پشتیبانی میشه&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;سرویسی که نوشتیم بصورت نیتیو در ES6 اجرا میشه و احتیاج به هیچ لایبرری خارجی وجود نداره. البته ما در ES6 میتونیم با استفاده از &lt;code class=&quot;highlighter-rouge&quot;&gt;fat arrow =&amp;gt;&lt;/code&gt; فاکنکشن‌ها کدمون رو ساده‌تر هم بنویسیم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/* ES6 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//Promise&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//fat arrow&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;brand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'iPhone X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'gray'&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Mom is angry.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Hey friend, I have a new '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;brand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// call our promise&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fulfilled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fat arrow&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fat arrow&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگه با ES6 آشنایی ندارید، توجه کنید که من همه متغیر هایی که قابل تغییر بودند رو با &lt;code class=&quot;highlighter-rouge&quot;&gt;let&lt;/code&gt; مشخص کردم و اونهایی رو هم که immutable و بدون تغییر هستند رو با &lt;code class=&quot;highlighter-rouge&quot;&gt;const&lt;/code&gt; مشخص کردم. همه فانکشنهایی هم که بصورت &lt;code class=&quot;highlighter-rouge&quot;&gt;function(arguments)&lt;/code&gt; بود رو به &lt;code class=&quot;highlighter-rouge&quot;&gt;(argument) =&amp;gt;&lt;/code&gt; تغییر دادم. برای آشنایی بیشتر با ES6 می‌تونید لینک‌های زیر رو مطالعه کنید:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://strongloop.com/strongblog/es6-variable-declarations/&quot;&gt;JavaScript ES6 Variable Declarations with let and const&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://strongloop.com/strongblog/an-introduction-to-javascript-es6-arrow-functions/&quot;&gt;An introduction to Javascript ES6 arrow functions&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;b id=&quot;promise-in-es7&quot;&gt;ES7 - استفاده از Async Await سینتکس رو قابل خوندن میکنه&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;اگه قرار باشه این سرویس رو با ES7 بنویسیم، میتونیم با استفاده از تگ های &lt;code class=&quot;highlighter-rouge&quot;&gt;async&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;await&lt;/code&gt; کدمون رو تمیزتر کنیم. اینطوری میتونیم &lt;code class=&quot;highlighter-rouge&quot;&gt;then&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;catch&lt;/code&gt; رو از کدمون حذف کنیم.&lt;/p&gt;

&lt;p&gt;پس چیزی که درنهایت بازنویسی میکنیم در ES7 میشه این:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/* ES7 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//Promise&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;willGetNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//fat arrow&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isMomHappy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;brand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'iPhone X'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'gray'&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Mom is angry.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//2nd promise&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Hey friend, I have a new '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;brand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//call our promise&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'before asking Mom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;willIGetNewPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;showNewPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'after asking mom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;askMom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;هرموقع که نیاز داشتید یه پرامیس return کنید، فقط کافیه متد مورد نظر رو با &lt;code class=&quot;highlighter-rouge&quot;&gt;async&lt;/code&gt; نشانه گذاری کنید.
برای مثال:
&lt;code class=&quot;highlighter-rouge&quot;&gt;async function showNewPhone(phone)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;هرموقع که احتیاج داشتید پرامیس رو فراخوانی کنید، کافیه قبلش با &lt;code class=&quot;highlighter-rouge&quot;&gt;await&lt;/code&gt; نشانه‌گذاری کنید. برای مثال:
&lt;code class=&quot;highlighter-rouge&quot;&gt;let phone = await willIGetNewPhone;&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;let message = await showNewPhone(phone);&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;و در نهایت با استفاده از &lt;code class=&quot;highlighter-rouge&quot;&gt;try { ... } catch(error) { … }&lt;/code&gt; میتونید قضیه &lt;strong&gt;resolved&lt;/strong&gt; و &lt;strong&gt;rejected&lt;/strong&gt; پرامیس رو هم هندل کنید.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;when-and-why-promises&quot;&gt;چرا و چه موقع از Promise استفاده کنیم؟&lt;/h2&gt;

&lt;p&gt;واقعا چرا به پرامیس احتیاج داریم؟ دنیا قبل از پرامیس چه شکلی بود؟ بزارید قبل از جواب دادن به این سوال ها، کمی برگردیم عقب و ببینیم قبلا اوضاع رو چجوری هندل می‌کردیم.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;متد معمولی برای جمع دو عدد&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers normally&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get result = 3 immediately&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;متد Async برای جمع دو عدد&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers remotely&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// get the result by calling an API&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getAddResultFromServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://www.example.com?num1=1&amp;amp;num2=2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// you get result  = &quot;undefined&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگه شما عددهارو با متد معمولی جمع بزنید، همون لحظه جوابشو می‌گیرید. اما برعکس،‌ وقتی میخوایید به یک API ریکوئست بزنید که این دوتا عدد رو براتون جمع بزنه، اونموقع باید صبر کنید تا جواب برگرده،‌و نمی‌تونید همون لحظه به جوابتون برسید.&lt;/p&gt;

&lt;p&gt;مورد دیگه‌ای هم وجود داره، اگه شما به این شکل بخواهید جوابتون رو بگیرید، معلوم نیست که جواب سرور چیه، و ممکنه حتی سایت دان باشه، یا سرعت پاسخگویی خیلی کم باشه، یا هر مشکل دیگه‌ای. و اینو هم میدونیم که شما قرار نیست کل سرویستون رو بلاک یا فریز کنید و منتظر وایستید تا بلکه بلاخره جوابی برسه.&lt;/p&gt;

&lt;p&gt;فراخوانی APIها، دانلود کردن فایل، خواندن فایل و چیزهایی مثل این، مواردی هستند که باید با استفاده از متد های Async باهاشون کار کرد.&lt;/p&gt;

&lt;h2 id=&quot;callback&quot;&gt;دنیا قبل از پرامیس: Callback&lt;/h2&gt;

&lt;p&gt;آیا حتما باید از پرامیس برای فراخوانی متدهای Async استفاده کنیم؟ خیر. قبل از پرامیس، ما از callback استفاده می‌کردیم.
فانکشن callback فقط برای مواقعی که میخواهیم نتیجه بازگشتی رو دریافت کنیم به کار میره. اجازه بدید با توجه به چیزی که حالا راجع به کال‌بک میدونیم، متد قبلی رو بازنویسی کنیم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers remotely&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// get the result by calling an API&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// use the famous jQuery getJSON callback API&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://www.example.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// callback&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get result = 3 here&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب، با این توصیف، پس دیگه به پرامیس چه احتیاجی داریم؟&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;اگر قرارباشه یکسری اکشن‌های متوالی آسنکرون انجام بدید، چیکار می‌کنید؟&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;خب بزارید ببینیم چی داریم، قرار حالا بجای اینکه یه بار عمل جمع رو انجام بدیم، ۳بار اینکارو انجام بدیم. با کد زدن معمولی همچین چیزی میشه:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers normally&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

 &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get resultA = 3 immediately&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get resultB = 6 immediately&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get resultC = 10 immediately&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;حالا اگه بخواهیم همون کارو با callback انجام بدیم چطور؟&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers remotely&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// get the result by calling an API&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// use the famous jQuery getJSON callback API&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://www.example.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// callback 1&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get result = 3 here&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// callback 2&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get result = 6 here&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// callback 3&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// you get result = 10 here&lt;/span&gt;

            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;این syntax اصلا یوزرفرندلی نیست. خیلی دیگه بخواییم خوشبین باشیم، مثل اهرام ثلاثه شده! 😒 اما توسعه دهنده‌های خارجی به همچین چیزی میگن &lt;Callback Hell=&quot;&quot;&gt;، بخاطر اینکه هر کال‌بک در داخل شکم کال‌بک دیگه‌ای قرار گرفته. تصور کنید که ۱۰تا کال‌بک دارید، کدتون ۱۰ بار نِست می‌شد!&lt;/Callback&gt;&lt;/p&gt;

&lt;h2 id=&quot;scape-from-callback-hell&quot;&gt;فرار از Callback Hell&lt;/h2&gt;

&lt;p&gt;و در این لحظه بود که قهرمان داستان ما، Promise وارد شد 👨🏻‍🎤. بزارید ببینیم کدمون حالا چطوری میشه.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// add two numbers remotely using observable&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// use ES6 fetch API, which return a promise&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//www.example.com?num1=${num1}&amp;amp;num2=${num2}`)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total: '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;با استفاده از پرامیس‌ها، ما بجای callback از &lt;code class=&quot;highlighter-rouge&quot;&gt;.then&lt;/code&gt; کمک می‌گیریم. در همین نگاه اول متوجه میشیم که چقدر کدهامون با حذف کال‌بک‌های nested یا تودرتو تروتمیزتر شده. البته که با استفاده از سینکتس &lt;code class=&quot;highlighter-rouge&quot;&gt;asyn&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;await&lt;/code&gt; کدهامون بازم ساده‌تر و تروتمیزتر از چیزی که الان هست میشه. دیگه مثال این رو هم میزارم به عهده خودتون 😬🖐.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-11-27/js-promise-relaxing.gif&quot; alt=&quot;Relaxing&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;observable&quot;&gt;عضو جدید این خانواده: Observables&lt;/h2&gt;

&lt;p&gt;قبل از اینکه خیلی با پرامیس حال کرده و کف خون قاطی کنید، این رو باید اضافه کنم، یه چیزی وجود داره که قضیه مدیریت فانکشن‌های async رو از اینی که هست هم آسونتر کرده، و بهش میگن &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;واضحترین تعریفی که میتونم راجع به Observabale بهتون بگم اینه:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;قابل‌مشاهده یا Observable یک جریانی از رویداد‌های تنبله که میتونه میتونه صفر یا بی‌نهایت رویداد رو منتشر کنه، و این قضیه میتونه پایانی داشته یا نداشته باشه.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;و اگه بخوام ساده‌ترش کنم:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;فانکشن Observable از خودش مقادیری رو منتشر میکنه، و با یک &lt;strong&gt;Observer&lt;/strong&gt; یا مشاهده‌گر میتونیم بشینیم و این مقدار رو رَصَد کنیم. در نتیجه هرموقع این Observabale از خودش چیزی منتشر کرد، سریع متوجه میشیم و متناسب با این مقدار، ری‌اکشن موردنظر رو نشون بدیم.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;فانکشن یا مقادیر Observable از مفهوم  ReactiveX Programming اومده و در همه زبان‌هایی که از RX پشتیبانی میکنن وجود داره، در جاوا اسکریپت بهش میگیم RxJs. برای اطلاعات بیشتر لینک‌های زیر مطالب خوب و کاملی دارند:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://reactivex.io/&quot;&gt;ReactiveX&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://xgrommx.github.io/rx-book/index.html&quot;&gt;RxJS v4.0&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.pusher.com/building-realtime-applications-with-cyclejs-and-rxjs/&quot;&gt;Building realtime applications with CycleJS and RxJS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;و برای آشنایی بیشتر با Observable پیشنهاد میکنم لینک‌های زیر رو مطالعه کنید:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://reactivex.io/documentation/observable.html&quot;&gt;Observable&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://xgrommx.github.io/rx-book/content/observable/index.html&quot;&gt;Observable object&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://egghead.io/lessons/javascript-introducing-the-observable&quot;&gt;Introducing the Observable&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cycle.js.org/streams.html&quot;&gt;Stream: Reactive Programming&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87&quot;&gt;Learning Observable By Building Observable&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;اما برگردیم سر بحث خودمون. یکسری تفاوت‌ها بین Observable و Promise وجود داره:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Observable قابلیت لغو شدن داره (Cancellable)&lt;/li&gt;
  &lt;li&gt;Observable اصولا تنبله (Lazy)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;نترسین، در ادامه یه مثال درباره اینکه از آبزروبل چطوری میتونم استفاده کنیم آوردم. در مثال زیر من از قابلیت‌های RxJs برای پیاده کردن Observable استفاده کردم.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Observable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Rx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// use ES6 fetch API, which return a promise&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//www.example.com?num1=${num1}&amp;amp;num2=${num2}`)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fromPromise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;flatMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;flatMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'total: '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;نکته:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;متد &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable.fromPromise&lt;/code&gt; مقدار Promise ما رو به یه استریم از observable تبدیل می‌کنه.&lt;/li&gt;
  &lt;li&gt;اوپراتورهای &lt;code class=&quot;highlighter-rouge&quot;&gt;.do&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;.flatMap&lt;/code&gt; به ما در مدیریت رویداد‌های منتشره از Observable کمک می‌کنند.&lt;/li&gt;
  &lt;li&gt;استریم‌های Observable تنبل یا lazy هستند. متد &lt;code class=&quot;highlighter-rouge&quot;&gt;addAsync&lt;/code&gt; موقعی اجرا میشه که ما بهش &lt;code class=&quot;highlighter-rouge&quot;&gt;.subscribe&lt;/code&gt; کرده باشیم.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;فانکش‌های Observable امکانات باحالتری هم به ما می‌دن. مثلا در مثال زیر من با استفاده از اوپراتور &lt;code class=&quot;highlighter-rouge&quot;&gt;delay&lt;/code&gt; بهش گفتم در اجرای فانکشن ۳۰۰۰میلی‌ثانیه تاخیر ایجاد کنی و بعد کارتو انجام بده.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;addAsync&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// delay 3 seconds&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resultA&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;تا همین‌جارو داشته باشین، و اجازه بدین راجع به Observable در یه پست دیگه مفصل‌تر صحبت کنم.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;نتیجه گیری&lt;/h2&gt;

&lt;p&gt;سعی کنید با انجام مثال‌های بیشتر یا مطالعه مقاله‌های دیگه با Promiseها و Callbackها بیشتر آشنا بشید. اونهارو کامل درک کنید و واقعا در پروژه‌هاتون استفاده کنید. درباره Observable هم نگران نباشید، این یه موضوع جدیده و حالا حالا وقت هست واسه اینکه توش مهارت پیدا کنید.
دوباره تکرار میکنم، با هرسه این مفاهیم و ابزارها آشنا بشید و ببینید واقعا کجا بدردتون میخوره، تا متناسب با اون ازشون استفاده کنید.&lt;/p&gt;

&lt;p&gt;می‌تونید از لینک‌های زیر هم مثالی که درباره &lt;code class=&quot;highlighter-rouge&quot;&gt;Mom Promise to buy new phone&lt;/code&gt; رو ببینید:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es5-js&quot;&gt;Mom Promise in ES5&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es6-js&quot;&gt;Mom Promise in ES6&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gist.github.com/sadra/60429ffd4d5f1d8e7b0533c66d7f510d#file-mom-promise-in-es7-js&quot;&gt;Mom Promise in ES7&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;خب همش همین بود. امیدوارم مبحث Promise رو ساده توضیح داده باشم و شما هم راحت درک ‌باشینش. اگه سوال یا موردی بود، مثل همیشه در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا در &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; میتونیم باهم در ارتباط باشیم. 😉🍷&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Prmise" /><category term="RxJs" /><category term="JavaScript" /><category term="ES6" /><summary type="html">مقدمه</summary></entry><entry><title type="html">فایربیس ۱: سرویس Firebase Cloud Messaging</title><link href="https://isapanah.com/2017/how-to-fcm-android" rel="alternate" type="text/html" title="فایربیس ۱: سرویس Firebase Cloud Messaging" /><published>2017-10-24T00:00:00+03:30</published><updated>2017-10-24T00:00:00+03:30</updated><id>https://isapanah.com/2017/how-to-fcm-android</id><content type="html" xml:base="https://isapanah.com/2017/how-to-fcm-android">&lt;p&gt;بنا بر قولی که در &lt;a href=&quot;http://isapanah.com/2017/set-fire-into-the-problems-with-firebase&quot;&gt;پست قبلی&lt;/a&gt; داده بودم، میخوام در یک مجموعه نوشته درباره پیاده سازی و استفاده از سرویس‌های مختلف فایربیس (تا جایی که این امکان برای ما در ایران وجود داشته باشه) صحبت کنم. شما می‌تونید پست‌های این بلاگ را، در رابطه با سرویس‌های فایربیس، از این &lt;a href=&quot;http://isapanah.com/tag/firebase&quot;&gt;لینک موضوعی&lt;/a&gt; مطالعه کنید.&lt;/p&gt;

&lt;p&gt;ازونجایی که مطالب زیاد بود و همچنین دسته بندی‌ها تودرتو، در ادامه فهرستی از کل مطالب و تیترهای موجود در این پست رو لیست کردم. با کلیک روی هر تیتر به اون موضوع هدایت می‌شید.&lt;/p&gt;

&lt;h2 id=&quot;فهرست-مطالب&quot;&gt;فهرست مطالب&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;معرفی Firebase Cloud Messaging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#fcm-account&quot;&gt;افتتاح حساب و ایجاد یک پروژه اندروید در فایربیس&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#basic-app-settings-for-fcm&quot;&gt;تنظیمات اولیه اپلیکیشن اندروید&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#node-service&quot;&gt;سرویس پوش‌ناتیفیکیشن با Node.js&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#prepare-node-service&quot;&gt;آماده‌سازی سرویس Node.js&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#using-nodejs&quot;&gt;استفاده از سرویس Node.js&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#node-notification&quot;&gt;Notification&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#node-data&quot;&gt;Data&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#node-combined-message&quot;&gt;Combined Message&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#prepare-app-for-fcm&quot;&gt;آماده سازی اپلیکیشن برای دریافت ناتیفیکیشن&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#receiving-notification&quot;&gt;دریافت ناتیفیکیشن&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#send-and-receive-notification&quot;&gt;ارسال و دریافت ناتیفیکیشن برای گروهی از کاربران&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#user-topics&quot;&gt;ارسال و دریافت ناتیفیکیشن بر اساس Topic یا موضوعی خاص&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#send-message-to-all&quot;&gt;ارسال پیام برای همه‌ی کاربران&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#other-settings&quot;&gt;دیگر تنظیمات ارسال پیام&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#other-settings-priority&quot;&gt;اولویت Priority&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#other-settings-time-to-alive&quot;&gt;زمان اعتبار پیام timeToLive&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#other-settings-collapse-key&quot;&gt;کلید جایگزینی پیام collapse_key&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;نتیجه‌گیری&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;introduction&quot;&gt;معرفی Firebase Cloud Messaging&lt;/h2&gt;

&lt;p&gt;فایربیس کلاد مسیجینگ یا به اختصار FCM یکی از سرویس‌های کاربردی فایربیس هست که به شما کمک میکنه تا بتونین پیام‌هاتون رو در کمترین زمان و بدون هیچ هزینه‌ای به دست کاربرتون در پلتفرم‌های مختلفی مثل Android, iOS, WebApplication, C++, Unituy برسونید.پیام شما می‌تونه به یک کاربر، یا گروهی از کاربران، یا بر اساس یه تاپیک و موضوع ارسال بشه.
ایجاد یک سرویس و ارسال پیام به کاربران شما خیلی ساده‌ست. اول از همه با اضافه کردن SDK فایبربیس به اپلیکیشنتون، کاربرانتون رو در شبکه کلاد فایبربیس رجیستر می‌کنید. و بعد در سمت سرورتون یکسری کد می‌نویسید، تا توسط اون بتونید پیام‌هاتون رو به کاربر یا گروهی از کاربران ارسال کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-13.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;شما می‌تونید ده‌ها، هزاران، یا حتی میلیون‌ها پیام در روز بدون هزینه و با دقت ۹۵٪ در کمتر از ۲۵۰میلی‌ثانیه بدون توجه به پلتفرم کاربر به دستشون برسونید. به همین سادگی، به همین خوشمزگی.😍&lt;/p&gt;

&lt;h2 id=&quot;fcm-account&quot;&gt;افتتاح حساب و ایجاد یک پروژه اندروید در فایربیس&lt;/h2&gt;

&lt;p&gt;پس از ثبت‌نام و ورود به &lt;a href=&quot;https://console.firebase.google.com/&quot;&gt;کنسول فایربیس،&lt;/a&gt; می‌بینید که یک پروژه آماده و البته دمو به اسم &lt;strong&gt;&lt;a href=&quot;https://console.firebase.google.com/project/fir-demo-project/overview&quot;&gt;Firebase Demo Project&lt;/a&gt;&lt;/strong&gt; وجود داره، این پروژه فقط درحالت View Only و تنها برای دیدن امکانات فایربیس ایجاد شده. برای ایجاد اولین پروژه فقط کافیه روی Add Project کلیک کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-0.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در پنجره باز شده اسمی برای پروژه (FirebaseApp) می‌نویسیم. بهتره Country/region روی همون UnitedStates باقی بمونه. توجه کنید که برای استفاده از Firebase محدودیت وجود داره و فقط می‌تونید ۳ پروژه ایجاد کنید! برای ساختن بیشتر از ۳ پروژه یا باید با یه حساب کاربری دیگه وارد بشید یا اینکه هزینه پرداخت کرده و ظرفیت کنسولتون رو افزایش بدید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-1.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;پروژه اولیه ایجاد شده. حالا وقتی وارد پنل می‌شید ۳تا گزینه دارید، ما از بین گزینه‌های پایین، Android App رو انتخاب می‌کنیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-2.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب، در این مرحله باید مشخصات اپ رو ثبت کنیم. اول از همه &lt;strong&gt;Package Address&lt;/strong&gt; اپ رو وارد می‌کنیم، و بعد در &lt;strong&gt;App nickname&lt;/strong&gt; همونطور که از اسمش مشخصه یه اسم برای پروژمون می‌نویسیم. در بخش &lt;strong&gt;SHA-1&lt;/strong&gt; میتونید امضای امنیتی اپتون رو وارد کنید، درصورتی که خواستید امنیت بیشتری لحاظ کنید که فقط روی همون پکیج با همون امضا کار کنه (ما که خالی میزاریم 😇). و بعدش هم که &lt;strong&gt;Register App&lt;/strong&gt; رو می‌زنیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-3.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب پروژه ایجاد شده، فقط کافیه فایل &lt;strong&gt;google-service.json&lt;/strong&gt; رو دانلود کنیم و سپس روی Continue کلیک کنیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-4.png&quot; alt=&quot;fcm-4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;حالا اون فایل JSON رو، مثل تصویر زیر، به پروژه اپلیکیشنمون (که امیدوارم از قبل درسته کرده بوده باشید) در مسیر &lt;code class=&quot;highlighter-rouge&quot;&gt;../Project/app&lt;/code&gt; کپی می‌کنیم.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-5.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب پروژمون ایجاد شده و کار تمومه.با کلیک روی پروژه اپلیکیشن ایجاد شده در کنسول فایربیس، می‌تونیم وارد پنل بشیم و کارهای که لازمه داریم رو انجام بدیم.&lt;/p&gt;

&lt;h2 id=&quot;basic-app-settings-for-fcm&quot;&gt;تنظیمات اولیه اپلیکیشن اندروید&lt;/h2&gt;

&lt;p&gt;قبل شروع همه‌چیز این رو بگم با مراجعه به &lt;a href=&quot;https://github.com/sadra/FirebaseApp&quot;&gt;این ریپوی گیتهاب&lt;/a&gt;، می‌تونید به نمونه اپلیکیشنی که برای همین منظور ایجاد کردم دسترسی داشته باشید.&lt;/p&gt;

&lt;p&gt;اول از همه در فایل build.gradle مربوط به &lt;strong&gt;project&lt;/strong&gt;، خطوط زیر رو اصلاح و اضافه میکنیم.&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Project-level build.gradle (&amp;lt;project&amp;gt;/build.gradle):&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;buildscript&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Add this line&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;classpath&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'com.google.gms:google-services:3.1.0'&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و در فایل build.gradle مربوط به &lt;strong&gt;app.module&lt;/strong&gt; خطوط زیر رو در انتهای محتویات قبلی اضافه می‌کنیم:&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// App-level build.gradle (&amp;lt;project&amp;gt;/&amp;lt;app-module&amp;gt;/build.gradle):&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Add to the bottom of the file&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;apply&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;plugin:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'com.google.gms.google-services'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و همچنین لازمه که لایبرری های مربوط به فایربیس رو هم به &lt;strong&gt;dependencies&lt;/strong&gt; اضافه کنیم.&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Project-level build.gradle (&amp;lt;project&amp;gt;/build.gradle):&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Add this line&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;com.google.firebase:firebase-core:11.+&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;com.google.firebase:firebase-messaging:11.+&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و در نهایت باید گریدل رو Sync کنیم. بعد از اینکه Gradle کتابخونه‌های مد نظرش رو دریافت و آماده استفاده شد میریم سراغ مرحله بعد.&lt;/p&gt;

&lt;p&gt;خب، حالا اول از همه در مسیر اپلیکیشن یک دایرکتوری به اسم &lt;code class=&quot;highlighter-rouge&quot;&gt;PushNotification&lt;/code&gt; ایجاد کرده، و در اون یک کلاس به اسم &lt;code class=&quot;highlighter-rouge&quot;&gt;FCMInstanceIDService&lt;/code&gt;، که از &lt;code class=&quot;highlighter-rouge&quot;&gt;FirebaseInstanceIdService&lt;/code&gt; ارث‌بری میکنه، ایجاد میکنیم. این کلاس وظیفه ساخت توکن و بروزرسانی اون درصورتی که اکسپایر شده رو بر عهده داره.&lt;/p&gt;

&lt;p&gt;وقتی که کاربر یک توکن دریافت کرده یا توکن قبلی وی باطل و توکن جدید صادر شد، تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;onTokenRefresh&lt;/code&gt; در این کلاس صدا فراخونی میشه. (&lt;a href=&quot;https://github.com/sadra/FirebaseApp/blob/master/app/src/main/java/com/isapanah/firebase/PushNotification/FCMInstanceIDService.java&quot;&gt;مشاهده کلاس در گیتهاب&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FCMInstanceIDService&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FirebaseInstanceIdService&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onTokenRefresh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onTokenRefresh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;refreshedToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FirebaseInstanceId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب بعد از اینکه کاربر توکن دریافت کرد میتونه از سرویس FCM استفاده کنه، پس ما هم باید یه کلاس ایجاد کنیم که پیام‌های دریافتی FCM رو مدیریت کنه. برای این منظور کلاسی به نام &lt;code class=&quot;highlighter-rouge&quot;&gt;FCMService&lt;/code&gt; ایجاد کرده و اون رو  &lt;strong&gt;extend&lt;/strong&gt; می‌کنیم از &lt;code class=&quot;highlighter-rouge&quot;&gt;FirebaseMessagingService&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;در این کلاس ما می‌تونیم با استفاده از تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;onMessageReceived&lt;/code&gt; در هنگام دریافت پیامی از FCM اون رو مدیریت کرده و هر بلایی که میخواییم سرش بیاریم 😈 (&lt;a href=&quot;https://github.com/sadra/FirebaseApp/blob/master/app/src/main/java/com/isapanah/firebase/PushNotification/FCMService.java&quot;&gt;مشاهده کلاس در گیتهاب&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FCMService&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FirebaseMessagingService&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RemoteMessage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;FCM&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;New notification from: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getFrom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;بعد از اینکه دو کلاس &lt;strong&gt;FCMInstanceIDService&lt;/strong&gt; و &lt;strong&gt;FCMService&lt;/strong&gt; رو آماده کردیم، وقتشه که اونهارو در &lt;code class=&quot;highlighter-rouge&quot;&gt;AndroidManifest&lt;/code&gt; هم به عنوان سرویس رویداد‌های &lt;code class=&quot;highlighter-rouge&quot;&gt;INSTANCE_ID_EVENT&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;MESSAGING_EVENT&lt;/code&gt; معرفی کنیم.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ADD this lines before &amp;lt;/application&amp;gt; close tag --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;service&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.PushNotification.FCMInstanceIDService&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;intent-filter&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;action&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.google.firebase.INSTANCE_ID_EVENT&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/intent-filter&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/service&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;service&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.PushNotification.FCMService&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;intent-filter&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;action&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.google.firebase.MESSAGING_EVENT&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/intent-filter&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/service&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب در همینجا هم میتونیم آیکون ناتیفیکیشن و رنگ پیش‌زمینه اون رو در منیفست مشخص کنیم. (&lt;a href=&quot;https://github.com/sadra/FirebaseApp/blob/master/app/src/main/AndroidManifest.xml&quot;&gt;مشاهده AndroidManifest در گیتهاب&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ADD this lines before &amp;lt;/application&amp;gt; close tag --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta-data&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.google.firebase.messaging.default_notification_icon&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:resource=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@mipmap/ic_launcher&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta-data&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.google.firebase.messaging.default_notification_color&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:resource=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@color/colorPrimary&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;البته این دو متا دیتا فقط برای ورژن های اندروید 21 یعنی Lolipop به بالا کار میکنه!&lt;/p&gt;

&lt;h2 id=&quot;node-service&quot;&gt;سرویس پوش‌ناتیفیکیشن با Node.js&lt;/h2&gt;

&lt;p&gt;خب قبل از اینکه بریم سراغ تنظیمات بعدی و آماده‌سازی اپلیکیشن، لازمه که یه سرویسی هم فراهم کنیم برای اینکه بتونیم با استفاده از API گوگل برای تلفن‌های همراهی که اپلیکیشن مارو نصب دارند پیام ارسال کنیم.&lt;/p&gt;

&lt;h3 id=&quot;prepare-node-service&quot;&gt;آماده سازی سرویس Node.js&lt;/h3&gt;

&lt;p&gt;من برای اینکه شما درگیر کارهای مربوط به تهیه این سرویس نشید از قبل اون رو با Node.js نوشتم و در &lt;a href=&quot;https://github.com/sadra/FCMPushNotification&quot;&gt;ریپوزیتوری گیتهاب&lt;/a&gt; قرار دادم.
فقط کافیه ترمینال رو باز کرده و با دستور &lt;code class=&quot;highlighter-rouge&quot;&gt;git clone REPO_ADDRESS&lt;/code&gt; اون رو در جایی که میخواهید کلون بگیرید.
بعد از کلون گرفتن (با استفاده از ترمینال یا CMD) وارد دایرکتوری اصلی پروژه node شده و دستور &lt;code class=&quot;highlighter-rouge&quot;&gt;npm install&lt;/code&gt; رو اجرا کنید تا پکیج‌های مورد نیاز رو دانلود کنه. در نهایت بعد از نصب شدن پکیج ها فقط با اجرای دستور &lt;code class=&quot;highlighter-rouge&quot;&gt;npm start&lt;/code&gt; سرویس آماده استفاده ست و با آدرس &lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost:3000&lt;/code&gt; در دسترس شماست. پس:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;➜  git clone git@github.com:sadra/FCMPushNotification.git
➜  &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/FCMPushNotification
➜  FCMPushNotification git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ npm install
➜  FCMPushNotification git:&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;master&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ✗ npm start
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگر فایل &lt;code class=&quot;highlighter-rouge&quot;&gt;app.js&lt;/code&gt; رو در این پروژه باز کنید چند کلید وجود داره، اول از همه لازمه که کلید امنیتی استفاده از FCM رو از کنسول فایربیس پروژتون دریافت کرده و بجای API_KEY قرار بدید. برای دریافت API Key به کنسول فایربیس مراجعه کرده، روی پروژه FirebaseApp، و بعد هم روی منوی پروژه اپ اندروید Firebase کلیک کنید و به Settings این اپ برید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-6.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در پنجره باز شده به سربرگ Cloud Messaging رفته کد Server Key رو کپی کرده و در پروژه Node.js بجای &lt;code class=&quot;highlighter-rouge&quot;&gt;API_KEY&lt;/code&gt; قرار بدید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-7.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در بعد از اون هم لازمه توکن اون اپلیکیشنی برای تست استفاده می‌کنید رو برای &lt;code class=&quot;highlighter-rouge&quot;&gt;USER_KEY&lt;/code&gt; مقدار‌دهی کنید. (این گزینه انتخابیست و الزامی نداره، اما بهتره یک یوزر تست داشته باشیم برای جلوگیری از خطاهای انسانی و تست اپ.)&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;/// PATH: ../FCMPushNotification/app.js&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API_KEY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;key=&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;AAAAr_E2NCM:APA91bEgmznGj0R5PpRg1ek7GKeMmpADJ5Bj...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Your FCM server API key&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;USER_KEY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;eWRAtJC2zTs:APA91bEZ_zgxYiEWFaxpHI_wMDO5IApmEt...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// User FCM Token ID&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;using-nodejs&quot;&gt;استفاده از سرویس پوش Node.js&lt;/h3&gt;

&lt;p&gt;قبل از اینکه به توضیحات استفاده از این سرویس بپردازم لازمه بدونید که ما چند نوع پیام می‌تونیم ارسال کنیم. مطابق با مستندات FCM ما فقط ۲ نوع پیام داریم: &lt;strong&gt;Notification&lt;/strong&gt; و &lt;strong&gt;Data&lt;/strong&gt;. اما هرکدوم چی هستن و چه فرقی باهم دارن؟&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;node-notification&quot;&gt;Notification&lt;/h4&gt;

    &lt;p&gt;این نوع پیام فقط ۲ بخش داره، &lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;body&lt;/code&gt;. شما فقط می‌تونید یه پیام ساده با یک عنوان و یک متن ارسال کنید که محدودیت کارکتر هم دارید. ساختار این پیام به این شکله:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Title of the notification message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;This is Body of the notification message.&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;node-data&quot;&gt;Data&lt;/h4&gt;

    &lt;p&gt;اما اگر پیام شما از نوع Data باشه، شما این امکان رو دارید که پیامتون رو بصورت JSON و با هر ساختار و مقادیری که دوست دارید ارسال کنید، برای مثال:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;850&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2:45&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;node-combined-message&quot;&gt;Combined Message&lt;/h4&gt;

    &lt;p&gt;جالب اینجاست که شما می‌تونید هردو نوع Notification و Data رو باهم یکجا بفرستید. برای مثال یه پیام ناتیفیکیشن دارید که میخواهید هم به کاربر پیامی نشون بده هم مقداری رو در دیتابیس اپلیکیشن تغییر بده:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;$GOOG up 1.43% on the day&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;$GOOG gained 11.80 points to close at 835.67, up 1.43% on the day.&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;stock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;GOOG&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;829.62&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;635.67&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;من در این پروژه با استفاده از Express و بر پایه REST API یکسری Route آماده کردم تا شما بتونید بدون دردسر پیام‌هاتون رو ارسال کنید. ما 4 روت داریم، که هرکدوم به ترتیب وظایف زیر رو برعهده دارند:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;با این روت می‌تونید یک پیام به صورت notification ساده ارسال کنید.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-http highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;POST /send/notification
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;با این روت می‌تونید یک پیام data ساده ارسال کنید.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-http highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;POST /send/data-notification
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;توسط این روت یک پیام data برای یک دسته خاص از کاربرانمون که VIP هستند ارسال می‌کنیم (در ادامه توضیح خواهم داد).&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-http highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;POST /send/data-notification/VIP
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;توسط این روت هم یک پیام combined برای یک دسته خاص از کاربرانمون که VIP هستند ارسال می‌کنیم.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-http highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;POST /send/combined-notification/VIP
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;برای استفاده از این روت‌ها می‌تونید از دستور CURL در ترمینال کمک بگیرید. اما من توصیه میکنم از &lt;a href=&quot;https://www.getpostman.com/&quot;&gt;Postman&lt;/a&gt; برای ریکوئست زدن استفاده کنید. کالکشن این ریکوئست‌هارو هم من از قبل برای شما آماده کردم و در پروژه قرار دادم. فقط کافیه از داخل دایرکتوری پروژه، در فولدر postman-export و یا &lt;a href=&quot;https://github.com/sadra/FCMPushNotification/blob/master/postman-export/Firebase%20Push%20Notification.postman_collection&quot;&gt;از اینجا در ریپوی گیتهاب&lt;/a&gt; اون رو دریافت کرده و به &lt;a href=&quot;https://www.getpostman.com/docs/postman/collections/data_formats&quot;&gt;Postmanتون import&lt;/a&gt; کنید. و یا &lt;a href=&quot;https://www.getpostman.com/collections/3776ad8010e1b7ae2c6e&quot;&gt;از اینجا&lt;/a&gt; بطور مستقیم به پست‌منتون اضافه کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-8.png&quot; alt=&quot;Firebase Cloud Messaging Console&quot; /&gt;&lt;/p&gt;

&lt;p&gt;حالا تنها کاری که لازمه انجام بدید اینه که سرویس رو با &lt;code class=&quot;highlighter-rouge&quot;&gt;npm start&lt;/code&gt; اجرا کرده و با Postman ریکوئست‌هاتون رو ارسال کنید. خب کارمون با سرویس Node.js و Postman تا اینجا تموم شد.&lt;/p&gt;

&lt;h2 id=&quot;prepare-app-for-fcm&quot;&gt;آماده سازی اپلیکیشن برای دریافت ناتیفیکیشن&lt;/h2&gt;

&lt;p&gt;خب رسیدیم به اصل ماجرا، حالا هم اپلیکیشن آماده است هم سرویس Node.js. اگه پیام رو ارسال کنید اپلیکیشن بدون هیچ مشکلی اون رو دریافت می‌کنه اما چیزی نشون نمیده، چون ما هنوز بهش نگفتیم با پیامی که دریافت کرده چه کاری بکنه.&lt;/p&gt;

&lt;h3 id=&quot;receiving-notification&quot;&gt;دریافت ناتیفیکیشن&lt;/h3&gt;

&lt;p&gt;همونطور که در قسمت قبلی گفتم پیام‌ها توسط کلاس &lt;code class=&quot;highlighter-rouge&quot;&gt;FCMService&lt;/code&gt; در تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;onMessageReceived&lt;/code&gt; می‌تونیم دریافت کنیم. و همچنین گفتم که ۲نوع پیام داریم، که یا notification هستند یا data ( و یا هردو باهم ). برای دریافت پیام notification باید تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;getNotification&lt;/code&gt; و برای data از تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;getData&lt;/code&gt; استفاده می‌کنیم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RemoteMessage&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TAG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;New notification from: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getFrom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TAG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Notification message: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;notificationMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getBody&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TAG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Data Payload: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dataMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remoteMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگر پیام که ارسال شده از نوع &lt;strong&gt;notification&lt;/strong&gt; بود، فقط کافیه title و body رو گرفته و با استفاده از &lt;code class=&quot;highlighter-rouge&quot;&gt;NotificationCompat&lt;/code&gt; اون رو نشون بدیم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;notificationMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationBuilder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContentTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContentText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAutoCancel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setSmallIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getNotificationIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setLargeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitmapFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;decodeResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getResources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ic_launcher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ContextCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;colorPrimary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NotificationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NotificationManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getSystemService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NOTIFICATION_SERVICE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;notificationManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getNotify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و اگر پیام از نوع &lt;strong&gt;data&lt;/strong&gt; بود، با کمک &lt;code class=&quot;highlighter-rouge&quot;&gt;getData&lt;/code&gt; محتوی پیام رو گرفته، به فایل &lt;strong&gt;JSONObject&lt;/strong&gt; تبدیل کرده و ازش استفاده می‌کنیم.&lt;/p&gt;

&lt;p&gt;من در این پروژه نمونه برای پیام data یک آبجکت بنام &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; تعریف کردم. و بر اساس &lt;strong&gt;type&lt;/strong&gt; پیامِ دیتا، مشخص میکنم که چه رفتاری باید از اپلیکیشن سر بزنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dataMessageReceived&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;util&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;JSONObject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;JSONObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;banner&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;showNotificationWithBanner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;banner_url&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dialog_message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;broadcastTheMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bodyObjects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;There is a problem&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Exception: &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگه type برابر banner باشه، اول پیام رو دریافت کرده، و بعد یه &lt;code class=&quot;highlighter-rouge&quot;&gt;BigPictureStyle&lt;/code&gt; برای &lt;code class=&quot;highlighter-rouge&quot;&gt;NotificationCompat&lt;/code&gt; میسازیم، و در نهایت اون رو به &lt;code class=&quot;highlighter-rouge&quot;&gt;NotificationCompat.Builder&lt;/code&gt; نسبت‌دهی می‌کنیم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;showNotificationWithBanner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bannerURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//Style for showing notification With Banner&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remote_picture&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BitmapFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;decodeResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getResources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gray_banner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BigPictureStyle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notiStyle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BigPictureStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;remote_picture&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BitmapFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;decodeStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InputStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bannerURL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;notiStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bigPicture&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_picture&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationBuilder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NotificationCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContentTitle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setContentText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAutoCancel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setSmallIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getNotificationIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setLargeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitmapFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;decodeResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getResources&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ic_launcher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ContextCompat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;colorPrimary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notiStyle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;NotificationManager&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NotificationManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getSystemService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NOTIFICATION_SERVICE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;notificationManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getNotify&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notificationBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;مواقعی هست که ما نمی‌خواهیم پیام دریافتی رو بصورت ناتیفیکیشن دریافت کنیم. بلکه میخوایم مثلا اطلاعات دریافتی رو در دیتابیس ذخیره کنیم، یا میخواهیم چیزی رو به کاربر نشون بدیم. من در این نمونه میخواستم که به کاربر یه دیالوگ نشون بدم.
من مقدار &lt;strong&gt;type&lt;/strong&gt; پیام رو برابر &lt;code class=&quot;highlighter-rouge&quot;&gt;dialog_message&lt;/code&gt; گذاشتم. که بعدش تابع &lt;code class=&quot;highlighter-rouge&quot;&gt;broadcastTheMessage&lt;/code&gt; فراخونی میشه، و این تابع دیتای دریافتی رو در داخل اپلیکیشن &lt;strong&gt;BroadCast&lt;/strong&gt; میکنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;broadcastTheMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Intent&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Intent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FCM_ACTION_NEW_NOTIFICATION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putExtra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putExtra&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LocalBroadcastManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sendBroadcast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خوب وقتشه تظیمات مربوط به اونجایی که قراره دیالوگ رو نشون بده هم انجام بدیم. پس در MainActivity اول میام یه &lt;code class=&quot;highlighter-rouge&quot;&gt;BroadcastReceiver&lt;/code&gt; ایجاد میکنم و بهش میگم هرموقع پیامی دریافت کردی که کلید &lt;strong&gt;FCM_ACTION_NEW_NOTIFICATION&lt;/strong&gt; رو داشت، متد مورد نظر من رو صدا کن.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BroadcastReceiver&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mRegistrationBroadcastReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;savedInstanceState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mRegistrationBroadcastReceiver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BroadcastReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onReceive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Context&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Intent&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;FCM_ACTION_NEW_NOTIFICATION:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;showDialog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//Call the method that shows AlertDialog&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و بعدش هم در متد &lt;code class=&quot;highlighter-rouge&quot;&gt;onResume&lt;/code&gt; لازمه که بگم این اکتیویتی رو برای پیام برودکست شده ای که کلیدش &lt;strong&gt;FCM_ACTION_NEW_NOTIFICATION&lt;/strong&gt; هست، رجیستر کن.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;LocalBroadcastManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;registerReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mRegistrationBroadcastReceiver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IntentFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FCM_ACTION_NEW_NOTIFICATION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;نکته:&lt;/strong&gt; توجه کنید که رجیستر کردن برای یک برادکست حتما باید بعد از ساختن BroadcastReceiver باشه.&lt;/p&gt;

&lt;p&gt;همه چی آمادست. اگه پیام معمولی ارسال کنیم یا بصورت دیتای بنری، به راحتی ناتیفیکیشن رو نشون میده.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-9.png&quot; alt=&quot;Firebase Notification&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و اگر هم نوع پیام data بصورت dialog باشه، برادکست به راحتی دریافت شده و دیالوگ نشون داده میشه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-11.jpg&quot; alt=&quot;Firebase Notification&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;send-and-receive-notification&quot;&gt;ارسال و دریافت ناتیفیکیشن برای گروهی از کاربران&lt;/h3&gt;

&lt;p&gt;خب تا الان یاد گرفتیم که برای کاربران اپلیکیشنمون ناتیفیکیشن بفرستیم. اما مواقعی پیش میاد که نمیخواییم برای همه کاربرها پیام ارسال کنیم، بلکه میخوایم فقط گروهی از اونها پیام مارو دریافت کنند. اما چطوری؟&lt;/p&gt;

&lt;p&gt;ما به دو صورت می‌تونیم پیام ارسال کنیم:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ارسال پیام بر اساس توکن کاربر (بصورت فردی یا گروهی)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ارسال پیام بر اساس Topic&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;تا قبل از این ما بر اساس توکن به کاربر پیام می‌فرستادیم. بهتره یه نگاهی به ساختار ریکوئستی که برای FCM ارسال میکنیم بندازیم:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;na&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;s2&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
   &lt;span class=&quot;na&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;USER_KEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// to : TOPIC_GLOBAL,&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// to : TOPIC_VIP_USER,&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// condition : &quot;'onscreen' in topics &amp;amp;&amp;amp; 'vip_user' in topics&quot;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ما در &lt;strong&gt;payload&lt;/strong&gt; (درواقع درخواستی که به سمت FCM ارسال میشه)، دو بخش اصلی داریم، اولی &lt;code class=&quot;highlighter-rouge&quot;&gt;notification&lt;/code&gt; یا &lt;code class=&quot;highlighter-rouge&quot;&gt;data&lt;/code&gt; که حامل پیام ما به کاربر هستند و &lt;code class=&quot;highlighter-rouge&quot;&gt;to&lt;/code&gt; یا &lt;code class=&quot;highlighter-rouge&quot;&gt;condition&lt;/code&gt; که مقصد و دریافت کننده پیام رو مشخص میکنه. اما هرکدوم چیکار می‌کنند:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;مقصد مشخص &lt;strong&gt;to&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;ما با دونستن توکن کاربر می‌تونیم پیام رو به یه کاربر خاص یا مجموعه ای از کاربرها ارسال کنیم. برای مثال:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;XXXXX:YYYYYYYUUUUUIIIIOOOOOO&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//or&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;XXXXX:YYYYYYYUUUUUIIIIAAAAA&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;XXXXX:YYYYYYYUUUUUIIIIBBBBB&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;XXXXX:YYYYYYYUUUUUIIIICCCCC&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;سرویس FCM به ما اجازه می‌ده که کاربرنامون رو در &lt;code class=&quot;highlighter-rouge&quot;&gt;Topic&lt;/code&gt; یا موضوع (و موضوع‌های) خاصی عضو کنیم. و بدین ترتیب پیام فقط برای کاربرانی که در فلان موضوع عضو هستند ارسال بشه. به این منظور مقصد دریافت رو با کلیدواژه &lt;strong&gt;topics&lt;/strong&gt; و نام تاپیک می‌نویسیم. برای مثال در زیر، مقصدِ پیام برای کاربرانی که عضو موضوع &lt;code class=&quot;highlighter-rouge&quot;&gt;vip_user&lt;/code&gt; هستند تعریف شده:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/topics/vip_user&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;مقصد شرطی &lt;strong&gt;condition&lt;/strong&gt;&lt;/p&gt;

    &lt;p&gt;مقصد شرطی یا conditional به ما این امکان رو میده که پیام رو به کاربران بر اساس شرط عضویت اونها در تاپیک‌های خاصی بصورت AND و OR ارسال کنیم. برای مثال در زیر پیام برای کاربرانی که عضو VIP بوده و همچنین خانم هستند ارسال میشه:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;'gender_female' in topics &amp;amp;&amp;amp; 'vip_user' in topics&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;user-topics&quot;&gt;ارسال و دریافت ناتیفیکیشن بر اساس Topic یا موضوعی خاص&lt;/h3&gt;

&lt;p&gt;در این پروژه ای که برای نمونه ساختم، خواستم پیام برای کاربرانی که درحال حاضر صفحه اپلیکیشنشون باز بوده و از نوع VIP بودن ارسال کنم. پس اول از همه موقعی که اپلیکیشن لانچ شد در متد &lt;code class=&quot;highlighter-rouge&quot;&gt;onResume&lt;/code&gt; اونهارو در تاپیک &lt;code class=&quot;highlighter-rouge&quot;&gt;onscreen&lt;/code&gt; عضو کردم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;FirebaseMessaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;subscribeToTopic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;onscreen&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و وقتی هم میره روی &lt;code class=&quot;highlighter-rouge&quot;&gt;onPause&lt;/code&gt; عضویتش رو از اون تاپیک لغو میکنم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;FirebaseMessaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;unsubscribeFromTopic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;onscreen&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و حالا برای عضویت در حالت VIP یه FloatActionButton ساختم که وقتی کاربر روش کلیک میکنه اون رو عضو VIP کرده یا عضویتش رو لغو میکنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setUserVIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;getSharedPreferences&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FCM&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;edit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putBoolean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VIP_USER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;VIPUser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setImageResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isVIP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;special&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;drawable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;not_special&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isVIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;You are a VIP user.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LENGTH_LONG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;FirebaseMessaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;subscribeToTopic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;vip_user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;You are a regular user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LENGTH_LONG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;FirebaseMessaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;unsubscribeFromTopic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;vip_user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب، همه‌چی آمادست، و فقط کافیه از Postman یه ریکئوست روی  &lt;code class=&quot;highlighter-rouge&quot;&gt;/send/data-notification/VIP&lt;/code&gt; بفرستیم، و نتیجه اینکه:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-24/fcm-10.png&quot; alt=&quot;Firebase Notification&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;send-message-to-all&quot;&gt;ارسال پیام برای همه کاربران&lt;/h3&gt;

&lt;p&gt;حالا اگه بخواییم پیام برای همه کاربرا ارسال بشه چی؟ آیا باید توکن همه کابرارو لیست کنیم و بفرستیم؟ نه، نیازی به اینکار نیست! فقط کافیه همون اول که اپلیکیشن کاربر رو عضو تاپیک &lt;code class=&quot;highlighter-rouge&quot;&gt;global&lt;/code&gt; کنید و بدین صورت همه کاربرانتون عضو این تاپیک میشن.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;FirebaseMessaging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;subscribeToTopic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;global&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;وبعد، هرموقع خواستید پیام برای همه کاربران ارسال بشه، فقط کافیه سمت سرور تاپیکِ مقصد رو روی &lt;code class=&quot;highlighter-rouge&quot;&gt;global&lt;/code&gt; ست کنید:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/topics/global&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;other-settings&quot;&gt;دیگر تنظیمات ارسال پیام&lt;/h3&gt;

&lt;p&gt;&lt;b id=&quot;other-settings-priority&quot;&gt;اولویت Priority:&lt;/b&gt; شما میتونید برای پیامی که ارسال می‌کنید اولویت گذاری کنید. ما به ازای هر پیام دو اولویت  &lt;code class=&quot;highlighter-rouge&quot;&gt;normal&lt;/code&gt;  و &lt;code class=&quot;highlighter-rouge&quot;&gt;high&lt;/code&gt; داریم.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;high: این اولویت برای مواقعی‌ست که میخواییم پیام در سریعترین زمان ممکن به دست کاربر برسه،‌و اگر اولویت همین باشه، حتی موقعی که گوشی لاک بوده و اینترنتش برای صرفه‌جویی برق قطع باشه، اینترنت رو وصل میکنه، پیام رو دریافت میکنه و به کاربر نشون میده. این حالت برای اپ‌هایی که پیام‌رسان هستند یا باید پیام همون لحظه به دست کاربر برسه، بیشتر استفاده میشه. در حالت پیشفرض برای پیام‌های notification اولویت روی high قرار داره.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;normal: این اولویت برای مواقعی‌ست که زمان رسیدن پیام اهمیت نداره،‌و به محض اینکه کاربر گوشیشو از لاک در بیاره و اینترنتش وصل بشه پیام رو بهش نشون میده. درحالت پیشفرض برای پیام‌های data اولویت روی normal قرار داره.&lt;/p&gt;

    &lt;p&gt;البته شما‌ می‌تونید خودتون بصورت دستی هم اولویت رو برای اون پیام مشخص کنید.&lt;/p&gt;

    &lt;p&gt;برای این منظور در سرویس Node.js و در بخش options، آیتم مربوط به priority رو اضافه می‌کنیم.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;b id=&quot;other-settings-time-to-alive&quot;&gt;زمان اعتبار پیام timeToLive:&lt;/b&gt; ممکن است شما بخوایید برای پیام خودتون اعتبار زمانی اعمال کنید، و اگه پیام تا فلان موقع رسید دست کاربر که هیچ، اگه نرسید دیگه به درد نمیخوره نرسون بهش. بصورت پیشفرض این مقدار روی ۰ قرار داره. سرویس FCM تمام تلاششو میکنه تا پیامتون حتما به کاربر برسه ولی خب اعتقاد داره “Now or Never”، یعنی پیامتون یا همین الان به دست کاربر میرسه یا اصن نمیرسه! 😎
برای این مورد در سرویس Node.js و در بخش options، آیتم مربوط به timeToLive رو اضافه می‌کنیم.&lt;/p&gt;

&lt;p&gt;&lt;b id=&quot;other-settings-collapse-key&quot;&gt;کلید جایگزینی پیام collapse_key:&lt;/b&gt; البته معنی تحت الفضیه این عبارت میشه (کلید اضمحلال 😐🤣). فرض کنید اولویت پیام درحالت normal قرار داره. یه پیام برای کاربر که میفرستین که مثلا میگه فلان جنس ۲۵٪ تخفیف داره اگه همین الان بخری. بعد نیم‌ساعت تصمیم گرفتین که درصد رو کاهش بدین به ۱۰٪. اونهایی که هنوز پیام رو ندیدن لازم نباشه پیام قبلیو ببینن که گیج بشن، همین ۱۰٪ رو ببینن کافیه. برای اینکار از &lt;code class=&quot;highlighter-rouge&quot;&gt;collapse_key&lt;/code&gt; استفاده می‌کنیم.&lt;/p&gt;

&lt;p&gt;هنگامی که اپلیکیشن در حالت Lock قرار داره، پیام رو به کاربر نشون نمیده تا  موقعی که کاربر گوشیشو unlock کنه، اگر پیام جدید با همون کلید دریافت کرد،‌ پیام قبلی رو discard کرده و بجاش این پیام جدید رو نگه می‌داره تا نشون بده.
برای این مورد در سرویس Node.js و در بخش options، آیتم مربوط به collapse_key رو اضافه می‌کنیم.
پس درنهایت مقادیر آپشن میشه:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'POST'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://fcm.googleapis.com/fcm/send'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'Content-Type'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'application/json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'Authorization'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API_KEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;priority&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;high&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// or set it on -normal- priority&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;timeToLive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// this message has 24hours to be expired&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;collapseKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;discount&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//or what ever you want&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;نتیجه گیری&lt;/h2&gt;

&lt;p&gt;فکر نمیکنم دیگه موردی برای گفتن مونده باشه. سعی کردم تمام چیزهایی که لازمه رو ذکر کرده باشم. فقط میمونه ارسال پیام ناتیفیکیشن از داخل خود کنسول فایربیس که اون بمونه بعد از قسمت Analytics بهش می‌پردازم، چون بخش‌هایی از سرویس Analytics در اون دخیل هستند.&lt;/p&gt;

&lt;p&gt;امیدوارم به راحتی بتونید از این سرویس استفاده کنید. اگه سوال یا مشکلی بود می‌تونید از طریق &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; پیام بدید تا باهم در ارتباط باشیم. 😉&lt;/p&gt;

&lt;p&gt;درصورتی که به موارد جدیدی برخوردم، این پست رو به‌روزرسانی خواهم کرد.&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Google" /><category term="Firebase" /><category term="Android" /><summary type="html">بنا بر قولی که در پست قبلی داده بودم، میخوام در یک مجموعه نوشته درباره پیاده سازی و استفاده از سرویس‌های مختلف فایربیس (تا جایی که این امکان برای ما در ایران وجود داشته باشه) صحبت کنم. شما می‌تونید پست‌های این بلاگ را، در رابطه با سرویس‌های فایربیس، از این لینک موضوعی مطالعه کنید.</summary></entry><entry><title type="html">با Firebase مشکلاتتان را به آتش بکشید!</title><link href="https://isapanah.com/2017/set-fire-into-the-problems-with-firebase" rel="alternate" type="text/html" title="با Firebase مشکلاتتان را به آتش بکشید!" /><published>2017-10-18T00:00:00+03:30</published><updated>2017-10-18T00:00:00+03:30</updated><id>https://isapanah.com/2017/set-fire-into-the-problems-with-firebase</id><content type="html" xml:base="https://isapanah.com/2017/set-fire-into-the-problems-with-firebase">&lt;h2 id=&quot;مصائب-مسیح&quot;&gt;مصائب مسیح!&lt;/h2&gt;

&lt;p&gt;تا به امروز اگر می‌خواستیم از سرویسی جهت جمع آوری اطلاعات و آمار درباره وبسایت یا اپلیکیشنمون استفاده کنیم، بی‌شک اولین انتخابمون &lt;strong&gt;&lt;a href=&quot;https://analytics.google.com/&quot;&gt;Google Analytics&lt;/a&gt;&lt;/strong&gt; بود، در درجه بعد سرویس‌هایی مثل &lt;strong&gt;&lt;a href=&quot;https://fabric.io&quot;&gt;Fabric&lt;/a&gt;&lt;/strong&gt; خودنمایی می‌کردند. وای به روزی که نیاز می‌شد تا از سرویسی برای ارسال &lt;strong&gt;PushNotification&lt;/strong&gt; استفاده کنیم، اونوقت باید از &lt;strong&gt;&lt;a href=&quot;https://developers.google.com/cloud-messaging/&quot;&gt;GCM&lt;/a&gt;&lt;/strong&gt;، &lt;strong&gt;&lt;a href=&quot;&quot;&gt;Parse&lt;/a&gt;&lt;/strong&gt; یا &lt;strong&gt;&lt;a href=&quot;&quot;&gt;پوشه&lt;/a&gt;&lt;/strong&gt; استفاده می‌کردیم. بماند که برای اطلاع از کرش‌های اپلیکیشن باید از &lt;strong&gt;&lt;a href=&quot;https://fabric.io/kits/crashlytics&quot;&gt;CrashLystic&lt;/a&gt;&lt;/strong&gt; استفاده می‌کردیم.&lt;/p&gt;

&lt;p&gt;تنها برای همین ۳سرویس باید ۳ الی ۵ لایبرری مختلف از لایبرریهای گوگل گرفته تا توییتر و فیسبوک نصب می‌شد. چه روزهای طاقت‌فرسایی که برای مدیریت و نَویگِیت کردن بین این سرویس‌ها طی نشد. همه اینها یک‌طرف، اینکه این سرویس‌های اختصاص برای اپلیکیشن‌های موبایلی لانچ نشده و سرویس‌های هزارپاره هستند در طرفی دیگه.&lt;/p&gt;

&lt;h2 id=&quot;شب-برمیآید&quot;&gt;شب برمی‌آید&lt;/h2&gt;

&lt;p&gt;در سال ۲۰۱۱ دو مهندس به نام‌های &lt;a href=&quot;https://angel.co/james-tamplin&quot;&gt;James Tamplin&lt;/a&gt; و &lt;a href=&quot;https://angel.co/andrew-lee&quot;&gt;Andrew Lee&lt;/a&gt; استارتاپی بنام Firebase لانچ کردند. این سرویس در ابتدا یه API چت بود که به توسعه دهنده‌ها این امکان رو میداد تا سرویس چت رو در سایتشون پیاده کنن. بعد از مدتی به اطلاعات زیاد و عجیب منتقل شده بر این بستر مشکوک شدن،‌ و پس از بررسی‌ها معلوم شد که توسعه دهنده‌ها از این سرویس برای ارسال اطلاعات در بازی یا نرم‌افزارهاشون استفاده می‌کردند، درواقع یه سرویس realtime انتقال دیتا.&lt;/p&gt;

&lt;p&gt;در سال ۲۰۱۲ Andrew و James تصمیم گرفتن سرویس چت رو از ساختار RealTime اون جدا کنند، و  اینگونه بود که فایربیس (بگونه‌ای که الان می‌شناسیمش) خلق شد!&lt;/p&gt;

&lt;p&gt;در سال ۲۰۱۴ شرکت گوگل، فایربیس رو خرید. پس از افزودن چند سرویس (مثل Analytics، Crash Report و … ) نهایتا در سال ۲۰۱۵ با خریدن &lt;a href=&quot;https://divshot.com/&quot;&gt;Divshot&lt;/a&gt;  (که یک سرویس کلاد خدمات وب، مثل Storage, CDN, SSL, API و غیره، است) و ادقام آن با سرویس‌های قبلی، اَبَر سرویس فعلی فایبریس رو تشکیل داد.&lt;/p&gt;

&lt;h2 id=&quot;فایربیس-چه-کارهایی-میکند&quot;&gt;فایربیس چه کارهایی می‌کند؟&lt;/h2&gt;

&lt;p&gt;در ادامه به سرویس‌ها و خدمات بی‌شمار، کاربردی و بعضا جالبی که فایربیس ارائه میده اشاره می‌کنم.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-analytics&quot;&gt;Firebase Analytics&lt;/h3&gt;
    &lt;p&gt;سرویس رایگان آنالیتیک فایبرس که مشابه Google Analytics، مُنتهی اختصاصی شده برای اپلیکیشن های موبایلی. این سرویس اطلاعات جالبی مثل تعداد نصب، تعداد Uninstall، نرخ بازگشت به اپ و غیره به ما میده. همچنین میتونیم با ایجاد فانل های آماری و دسته بندی کاربران اطلاعات دقیق، مورد به مورد و هدف گذاری شده نیز داشته باشیم.  (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/analytics&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/8iZpH7O6zXo&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-cloud-messagin&quot;&gt;Firebase Cloud Messagin&lt;/h3&gt;
    &lt;p&gt;اگه با سرویس  آشنایی دارید باید بگم، که &lt;a href=&quot;https://en.wikipedia.org/wiki/Firebase_Cloud_Messaging&quot;&gt;FCM&lt;/a&gt; هم مشابه &lt;a href=&quot;https://en.wikipedia.org/wiki/Google_Cloud_Messaging&quot;&gt;Google Cloud Messaging&lt;/a&gt; یک سرویس کراس پلتفرم و بهینه شده برای اپلیکیشن‌های موبایلی Android, iOA و همچنین WebApplicationها ست، که بطور کاملا رایگان میتونید ازش استفاده کنید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/cloud-messaging&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/sioEY4tWmLI?list=PLl-K7zZEsYLmOF_07IayrTntevxtbUxDL&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-auth&quot;&gt;Firebase Auth&lt;/h3&gt;
    &lt;p&gt;سرویسی‌ست که به شما این امکان رو میده تا از Client-Side کابرتون رو احراز هویت کنید. کاربر میتونه از طریق شبکه‌های اجتماعی مثل Facebook, Github, Twitter و Google به اپ لاگین کنه، همینطور شما می‌تونید فرآیند احراز هویت رو از طریق ایمیل پسورد انجام بدید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/auth/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/8sGY55yxicA?list=PLl-K7zZEsYLmOF_07IayrTntevxtbUxDL&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;realtime-database&quot;&gt;Realtime Database&lt;/h3&gt;
    &lt;p&gt;سرویسی که به شما امکان ایجاد سرویس‌های سمت بک‌اند (بر پایه REST API) و یک پایگاه داده Realtime میده. از این سرویس می‌تونید برای ایجاد بک‌اند خودتون برای استفاده در اپلیکیشن های Android, iOS, JavaScript, Java, Swift, NodeJs و غیره استفاده کنید. از دیتابیس Realtime هم با دسترسی بر پایه RESTP API میتونید در فریم‌ورک‌های جاوااسکریپتی مثل AngulatJs, React, Ember.js و BackBone.js استفاده کنید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/realtime-database/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/U5aeM5dvUpA&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-cloud-store&quot;&gt;Firebase Cloud Store&lt;/h3&gt;
    &lt;p&gt;فایربیس به شما امکان میده تا بتونید از یک فضای کلاد جهت ذخیره فایل‌هاتون مثل Audio, Image,Video و دیگر انواع فایل استفاده کنید. برای مثال اگه یه اپلیکیشن چت داشته باشید می‌تونید اطلاعاتش رو اونجا هاست کنید و کاربر بصورت کلاد به همه دیتاش در همه پلتفرم‌های ممکن سرویستون دسترسی داره. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/firestore/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/QcsAb2RR52c&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-hosting&quot;&gt;Firebase Hosting&lt;/h3&gt;
    &lt;p&gt;این سرویس هم به عنوان یک هاست برای شما عمل می‌کنه. روی این هاست میتونید از CSS, HTML و هرچیز Javascriptی استفاده کنید، در فرانت اند هرچیزی که میشناسین و در بک‌اند تنها Node.js. این سرویس از CDN و SSL پشتیبانی می‌کنه.(بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/hosting&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/jsRVHeQd5kU&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-test-lab-برای-android&quot;&gt;Firebase Test Lab برای Android&lt;/h3&gt;
    &lt;p&gt;این FT‌B یکی از جالبترین بخشهای فایربیسه. با این سرویس می‌تونید اپلیکیشنتون رو در انواع مختلفی از گوش‌های اندروید با برند‌های مختلف تست کنید و نتیجه رو بصورت Log، تصویر یا ویدئو دریافت کنید. فایربیس کلیه مراحل تست رو حتی اگر UnitTest برای اپتون ننوشته باشید انجام میده. با این سرویس شما این امکان رو دارید که علاوه بر UnitTestها، تست‌های CI رو هم مورد آزمایش قرار داده و تست‌ها رو پاس کنید. و در نهایت نتیجه و آنالیز تست‌هارو در اختیار داشته باشید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/test-lab/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/4_ZEEX1x17k&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-crash-reporting&quot;&gt;Firebase Crash Reporting&lt;/h3&gt;
    &lt;p&gt;اگه می‌خواید بدونید اپتون چه مواقعی کرش میکنه یا کاربرانتون معمولا با چه مشکلاتی و به چه دلیل مواجه میشن، این سرویس بهترین کمک رو بهتون میکنه.(بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/crash/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/B7mlLVAkcfU&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-perforamnce-monitoring&quot;&gt;Firebase Perforamnce Monitoring&lt;/h3&gt;
    &lt;p&gt;سرویس FPM به شما کمک میکنه تا از پرفرمنس و عملکرد اپلیکیشن Android یا iOSتون در دستگاه‌های کاربرانتون اطلاعات دقیقی کسب کنید. با استفاده از SDK این سرویس اطلاعات مورد نیازتون جهت سنجش عملکرد اپ از تلفن همراه تک تک کاربرانتون جمع‌اوری میشه و پس آنالیز دیتا‌ها در کنسول فایربیس قابل رویت هست. این سرویس به شما کمک میکنه تا بدونید چه کار‌های باید انجام بدید تا عملکرد یا Perfromance اپ‌تون رو بهبود ببخشید یا اینکه مشکلات حاصله رو رفع کنید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/perf-mon/&quot;&gt;متن&lt;/a&gt; - &lt;a href=&quot;https://youtu.be/0EHSPFvH7vk?list=PLl-K7zZEsYLmOF_07IayrTntevxtbUxDL&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-cloud-function&quot;&gt;Firebase Cloud Function&lt;/h3&gt;
    &lt;p&gt;یکی از امکانات کاربردی فایبریس همین سرویس FCF هست. با این سرویس شما می‌تونید سمت بک اند مورد‌نیازتون رو هم طراحی کنید و درنهایت یکسری API بر بستر پروتوکل HTTPS در دسترس داشته باشید. با استفاده از این سرویس شما دیگه نگران Scale کردن و نگهداری سرویس‌هاتون ندارید، تا موقعی که شما هستین، سرویس‌هاتون بر بستر امن و کلاد در اختیار کاربرانتون قرار داره. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/functions/&quot;&gt;متن&lt;/a&gt; - &lt;a href=&quot;https://youtu.be/vr0Gfvp5v1A&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;سرویسهای-درحال-پیشرفت&quot;&gt;سرویس‌های درحال پیشرفت&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-notifications&quot;&gt;Firebase Notifications&lt;/h3&gt;
    &lt;p&gt;شما می‌تونید بدون استفاده از API و تنها از داخل پنل فایربیس‌تون برای کاربران اپ نوتیفیکیشن بفرستید. این امکان رو دارید که کاربران رو فیلتر کنید و بر اساس User Propertyهایی که در پنل آنالیتیک فایبربیس‌تون ایجاد کردید (مثلا جنسیت فلان) پیام‌هارو ارسال کنید.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-app-indexing&quot;&gt;Firebase App Indexing&lt;/h3&gt;
    &lt;p&gt;از این سرویس برای بهبود رتبه اپ در جست‌جوی گوگل استفاده کنید، این سرویس همچنین بهتون کمک میکنه تا در query search گوگل پلی، پیشنهاد شده و راحت‌تر پیدا بشید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/app-indexing/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/C35OSHlTNwA&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-dynamic-links&quot;&gt;Firebase Dynamic Links&lt;/h3&gt;
    &lt;p&gt;داینامیک لینک‌ها این امکان رو به شما میدن تا بتونید لینک‌های هوشمند بسازید که در مواقع مختلف رفتار متفاوتی از خودشون نشون بدن. برای مثال شما در وبسایتتون یک محصول برای فروش گذاشتید، کاربر بعد از کلیک روی اون لینک (اگر سایت رو در موبایلش باز کرده باشه و بر اساس پلتفرم سیستم عاملش) به سمت اون صفحه از اپلیکیشن هدایت میشه که محصول بهش نشون داده یا همونجا فاکتور برای پرداخت براش صادر میشه تا خریدش رو سریعتر انجام بده. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/dynamic-links/&quot;&gt;متن&lt;/a&gt; - &lt;a href=&quot;https://www.youtube.com/watch?v=LvY1JMcrPF8&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-invites&quot;&gt;Firebase Invites&lt;/h3&gt;
    &lt;p&gt;این سرویس به شما کمک میکنه تا امکانی رو فراهم کنید برای اینکه کاربرانتون با ایمیل، SMS یا پیام در شبکه‌های اجتماعی دیگر دوستناشون رو برای نصب اپلیکیشن دعوت کنن، و البته این امکان رو هم در اختیار دارید تا میزان بازگشت و استفاده کاربران از دعوت‌های انجام شده رو با آمار دقیق در اختیار داشته باشید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/invites/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/LkaIJCZ_HyM?list=PLl-K7zZEsYLmOF_07IayrTntevxtbUxDL&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firebase-remote-config&quot;&gt;Firebase Remote Config&lt;/h3&gt;
    &lt;p&gt;سرویس FRC یکی از امکانات دیگه‌ی فایربیسه، که به شما این توانایی رو میده تا بصورت کلاد امکان تغییر تنظیمات اپلیکیشنتون رو داشته باشید، بدون اینکه نیاز باشه تا اپ رو آپدیت کنید. برای مثال تمامی استرینگ و متن‌هایی که در اپتون استفاده کردید بصورت یک فایل XML درمیارید، پسفردا اگه به مشکلی برخوردید و خواستید متن رو عوض کنید، یا مثلا رنگ دکمه رو عوض کنید یا هر تغییر دیگه‌ای، فقط کافیه در ریموت کانفیگ اطلاعات رو ویرایش کرده و ارسال کنید تا همه اپ‌ها رو عوض کنید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/products/remote-config/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/_CXXVFPO6f0&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;adwords&quot;&gt;Adwords&lt;/h3&gt;
    &lt;p&gt;جالب اینجاست که گوگل سرویس Adwordsش رو هم به فایربیس انتقال داده و شما می‌تونید با استفاده از این سرویس مثل سابق کاربران مورد نظرتون رو هدف قرار داده و نتیجه رو در &lt;strong&gt;Firebase Analytics&lt;/strong&gt; مشاهده کنید.  (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/adwords/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/YTgJjKU9GdQ&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;کسب-درآمد&quot;&gt;کسب درآمد&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;admob&quot;&gt;Admob&lt;/h3&gt;
    &lt;p&gt;از سرویس admob جهت پخش تبلیغات و کسب درآمد در اپ‌تون می‌تونید استفاده کنید. (بیشتر بدانید: &lt;a href=&quot;https://firebase.google.com/docs/admob/&quot;&gt;متن&lt;/a&gt; -‌ &lt;a href=&quot;https://youtu.be/EPKmYheOmiw?list=PLl-K7zZEsYLmOF_07IayrTntevxtbUxDL&quot;&gt;ویدئو&lt;/a&gt; )&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;پروژه-های-متنباز&quot;&gt;پروژه های متن‌باز&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firepad&quot;&gt;Firepad&lt;/h3&gt;
    &lt;p&gt;این یک سرویس ویرایش متن در لحظه و قابل اشتراکه. فایرپد از ادیتور‌های مختلف مثل Altassian Stash Realtime و Koding در خودش استفاده می‌کنه. (&lt;a href=&quot;https://firepad.io/&quot;&gt;وبسایت&lt;/a&gt;)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;firechat&quot;&gt;Firechat&lt;/h3&gt;
    &lt;p&gt;فایرچت هم یه اپلیکیشن چت Realtime و اوپن سورس هست. (&lt;a href=&quot;https://www.opengarden.com/firechat.html&quot;&gt;وبسایت&lt;/a&gt;)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;geofire&quot;&gt;GeoFire&lt;/h3&gt;
    &lt;p&gt;جئوفایر هم بهمون کمک میکنه تا با استفاده از Firebase Databse بتونیم اطلاعات لوکیشن و جئومتریک کاربران اپلیکیشن رو در پایگاه داده آنلاین‌مون ذخیره کرده و نگهداری کنیم. (و احتمالا بعدا ازش استفاده کنیم 😈) (&lt;a href=&quot;https://github.com/firebase/geofire&quot;&gt;وبسایت&lt;/a&gt;)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;نتیجه-گیری&quot;&gt;نتیجه گیری&lt;/h2&gt;

&lt;p&gt;پس بجای استفاده از چندین سرویس، از یک سرویس کامل استفاده کنید. البته امیدوارم این امر برای شرکت گوگل انحصار ایجاد نکنه و استارتاپ‌های مختلف بتونن با ارائه سرویس‌های خلاقانه و کاربردی مارو در مسیر بهبود خدمت و سرویس به کاربران یاری کنن.&lt;/p&gt;

&lt;p&gt;لازمه که این مورد رو یادآور بشم که فقط سرویس FCM کاملا رایگان هست، و باقی سرویس‌های فایبریس یا از پایه پولی‌هستن یا محدودیت دارن در حالت رایگان، پس قبل از برنامه ریزی برای توسعه،‌ به بخش بیزنسیش هم فکر کنید.&lt;/p&gt;

&lt;p&gt;اول که شروع کردم قرار بود راجع به پیاده‌سازی فایبربیس در اپلیکیشمون فایبرنت صحبت کنم. اما خب دلم نیومد راجع به سرویس‌های فایبربیس ننویسم (چون جایی هم در منابع فارسی ندیدم که کامل راجع بهش نوشته باشه). انشالله در پست یا پست‌های بعدی حسابی راجع به پیاده کردن چند سرویسی که استفاده کردم خواهم نوشت.&lt;/p&gt;

&lt;p&gt;پس تا پست بعدی، اگه سوال مورد یا چیزی بود لطفا در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توئیتر&lt;/a&gt; یا &lt;a href=&quot;https://t.me/amlashi&quot;&gt;تلگرام&lt;/a&gt; با هم در ارتباط باشیم.&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Google" /><category term="Firebase" /><category term="Android" /><category term="iOS" /><category term="WebApplication" /><summary type="html">مصائب مسیح!</summary></entry><entry><title type="html">بهبود رابط کاربری با BottomNavigationView</title><link href="https://isapanah.com/2017/bottom-navigation-view-challenges" rel="alternate" type="text/html" title="بهبود رابط کاربری با BottomNavigationView" /><published>2017-10-11T00:00:00+03:30</published><updated>2017-10-11T00:00:00+03:30</updated><id>https://isapanah.com/2017/bottom-navigation-view-challenges</id><content type="html" xml:base="https://isapanah.com/2017/bottom-navigation-view-challenges">&lt;p&gt;اگر پست “&lt;a href=&quot;http://dcamp.ir/hamburger-menu-vs-bottom-navigation&quot;&gt;جایگزینی برای منوی همبرگر&lt;/a&gt;” شایان رو خونده باشید حتما متوجه شدید که ما در پروژمون بجای همبرگر منو از &lt;a href=&quot;https://developer.android.com/reference/android/support/design/widget/BottomNavigationView.html&quot;&gt;BottomNavigationView&lt;/a&gt; استفاده کردیم.&lt;/p&gt;

&lt;p&gt;در این پست قراره به چالش هایی که در روند پیاده سازی این مقوله برخوردیم اشاره کنم و اینکه به چه روشی اونهارو حل کردیم.&lt;/p&gt;

&lt;p&gt;خوشحال میشم اگه شما روش بهتری برای رفع این چالشها داشتین با ما به اشتراک بگذارین.&lt;/p&gt;

&lt;p&gt;اگه دنبال این هستین که چطوری میتونید BottomNavigationView رو در پروژه‌تون پیاده کنید تنها کافیه تو گوگل سرچ کنید کلی آموزش فارسی و انگلیسی پیدا میشه. با اینحال بنظرم کامل‌ترین آموزش برای این قضیه &lt;a href=&quot;https://medium.com/@hitherejoe/exploring-the-android-design-support-library-bottom-navigation-drawer-548de699e8e0&quot;&gt;پست Joe Brich&lt;/a&gt; هست، البته اگه دنبال یه آموزش ویدئویی هستین بنظرم &lt;a href=&quot;https://www.youtube.com/watch?v=wcE7IIHKfRg&quot;&gt;این ویدئو در یوتیوب&lt;/a&gt; هم گزینه خوبیه.&lt;/p&gt;

&lt;h2 id=&quot;چالش-اول-حالت-shiftmode-منوی-انتخابی&quot;&gt;چالش اول: حالت ShiftMode منوی انتخابی&lt;/h2&gt;

&lt;p&gt;اولین چالشی که باهاش مواجه شدیم این بود که موقع کلیک روی یک منو در &lt;strong&gt;BottomNavigationView&lt;/strong&gt; اون منو به اصطلاح مَگنیفاید یا بزرگ شده و متن زیرش پنهان میشد، که به این حالت &lt;code class=&quot;highlighter-rouge&quot;&gt;ShiftMode&lt;/code&gt; میگن . مثل انیمیشن پایین:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-11/bottom-navigation-menu-0.gif&quot; alt=&quot;Bottom Navigation View&quot; /&gt;&lt;/p&gt;

&lt;p&gt;در نظر داشتیم تا همه آیکون و متن منو در زیر نشون داده بشه. تمایلی هم به بزرگ شدن آیکون ها نداشتیم، فقط کافی بود که رنگ آیتم انتخاب شده تغییر کنه و فقط آیکون کمی بالا بیاد که نشون بده انتخاب شده.&lt;/p&gt;

&lt;p&gt;خب برای اینکار اول از همه یه کلاس &lt;code class=&quot;highlighter-rouge&quot;&gt;BottomNavigationViewHelper&lt;/code&gt; درست کردم. در این کلاس با کمک متد &lt;strong&gt;disableShiftMode&lt;/strong&gt; قابلیت ShiftingMode رو از تک تک منو ها گرفته، سپس حذف و جایگزین می‌کنیم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BottomNavigationViewHelper&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;disableShiftMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Field&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shiftingMode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getDeclaredField&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mShiftingMode&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;shiftingMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAccessible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;shiftingMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setBoolean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;shiftingMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAccessible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;BottomNavigationItemView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationItemView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;//noinspection RestrictedApi&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setShiftingMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// set once again checked value, so view will be updated&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;//noinspection RestrictedApi&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setChecked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItemData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isChecked&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NoSuchFieldException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BNVHelper&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Unable to get shift mode field&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IllegalAccessException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;BNVHelper&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Unable to change value of shift mode&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;کلاس BottomNavigationViewHelper رو به پروژه‌تون اضافه کنید. حالا کافیه بعد از کست کردن BottomNavigationView مون، اون رو به کلاس هلپر معرفی کرده تا قابلیت ShiftMode شدن رو ازش صلب کنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findViewById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;BottomNavigationViewHelper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;disableShiftMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;چالش-دوم-تغییر-رنگ-آیکون-انتخاب-شده&quot;&gt;چالش دوم: تغییر رنگ آیکون انتخاب شده&lt;/h2&gt;

&lt;p&gt;ما میخواستیم موقع انتخاب شدن آیتم، آیکون‌ش به شکل یا رنگ خاصی تبدیل بشه. اما این امکان درحال عادی وجود نداشت. پس چیکار کردیم؟&lt;/p&gt;

&lt;p&gt;من یکبار قبل شروع همه چیز برای همه آیتم ها یک آیکون پیشرفض تعریف کرده،‌ سپس یک متد به نام &lt;code class=&quot;highlighter-rouge&quot;&gt;changeIcon&lt;/code&gt; ایجاد کردم، تا هربار که کاربر آیتمی رو انتخاب میکنه این متد صدا زده بشه. این متد ابتدا آیکونِ همه‌ی آیتم‌هارو روی پیشفرض قرار میده و سپس بر اساس &lt;code class=&quot;highlighter-rouge&quot;&gt;ID&lt;/code&gt; آیتم انتخاب شده، آیکون پیشفرض‌ش رو با آیکون اَکتیو شده، تعویض میکنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;changeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_home&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_news&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_support&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_profile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;itemIndex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_home_active&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_news_active&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_support_active&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMenu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mipmap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bnv_menu_ic_profile_active&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;بعدش، یک &lt;strong&gt;listener&lt;/strong&gt; برای bottomNavigationView مون تعریف کردم که هرموقع آیتمی انتخاب شد، این متد رو صدا بزنه تا آیکونش به آیکون مورد نظر ما تغییر کنه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOnNavigationItemSelectedListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;OnNavigationItemSelectedListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onNavigationItemSelected&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@NonNull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MenuItem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getItemId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;action_mainFragments_home&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;changeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;action_mainFragments_news&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;changeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;action_mainFragments_support&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;changeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;action_mainFragments_profile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;changeIcon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و در نهایت با توجه به برداشتن حالت مگنیفای و تغییر آیکون چیزی که انتظار داشتیم این شکلی شد:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-11/bottom-navigation-menu-1.gif&quot; alt=&quot;Bottom Navigation View&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;چالش-سوم-قرار-دادن-badge-در-هنگام-دریافت-ناتیفیکیشن&quot;&gt;چالش سوم: قرار دادن Badge در هنگام دریافت ناتیفیکیشن&lt;/h2&gt;

&lt;p&gt;یکی از پر دردسرترین چیزهایی که باهاش روبرو شدیم، بَج گذاشتن کنار یکی از آیتم‌های BNV بود. در اولین تلاش یه shape قرمز رنگ از نوع oval ساختم، بعدش به این فکر کردم که میخوام برای آیتم دومی یه بج نشون بدم، پس عرض صفحه رو گرفته، تقسیم بر ۴ کرده و سپس صربدر ۲.۵ میکردم تا بیافته در مرکز آيتممون! در نهایت هم ویوو مربوطه رو به BNV اضافه میکردم. همه چی درست کار می‌کرد تا موقعی که قرار نبود در سایزهای غیر موبایلی (مثل تبلت) نشون داده بشه، اونموقع دیگه مثل سابق جاش اونجایی نبود که باید باشه و روی هر اسکرین چندین پیکسل جابجا می‌شد.&lt;/p&gt;

&lt;p&gt;در اقدام بعدی برای حل این مشکل یه کلاس &lt;code class=&quot;highlighter-rouge&quot;&gt;BadgeView&lt;/code&gt; درست کردم که از نوع AppCompatTextView هست، و تمام حالات ممکن رو براش پیاده کردم تا روی اسکرین های مختلف مشکلی نداشته باشیم، حتی مشکل حالت count یا empty بج رو هم براش در نظر گرفتم. لازم نیست خودتون رو درگیر این اینکه این کلاس چطوری کار میکنه بکنید، فقط کافیه کلاس رو &lt;a href=&quot;https://gist.github.com/sadra/d13b354d6205360fc03c80aa2d3fd32b&quot;&gt;از اینجا&lt;/a&gt; دریافت کرده و به پروژتون اضافه کنید.&lt;/p&gt;

&lt;p&gt;حالا برای اضافه کردن Badge اول از همه آیتم منوی مورد نظرتون رو باید انتخاب کنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;targetView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//I' select second menu item&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;سپس، از BadgeView یه نمونه ایجاد کرده و آیتم منوی مورد نظر رو براش تعریف می‌کنیم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BadgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setTargetView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;targetView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگه میخوایین Badge تون شماره داشته باشه (مثلا تعداد پیام‌های دریافتی)، متد &lt;code class=&quot;highlighter-rouge&quot;&gt;setBadgeCount&lt;/code&gt; رو صدا کرده و داخلش مقدار مورد نظرتون رو وارد کنید. اگر نه مثل اینستاگرام یه نقطه کوچیک خالی کنار آیتم مورد نظر خواستین فقط کافیه متد &lt;code class=&quot;highlighter-rouge&quot;&gt;setEmptyBadge&lt;/code&gt; و یا حتی برای سایز کوچیکتر &lt;code class=&quot;highlighter-rouge&quot;&gt;setEmptySmallerBadge&lt;/code&gt; رو صدا کنید.&lt;/p&gt;

&lt;p&gt;بطور پیشفرض بَج در بالا سمت راست قرار میگیره. برای اینکه بَج مورد نظر در همه سایز ها و اسکرین ها یکسان و در یک جا قرار داشته باشه (سمت راست آیتم با فاصله ۵ پیکسل از سمت چپ) اول از همه باید اون رو در مرکز آیتم قرار بدیم، بعدش با استفاده از متد &lt;code class=&quot;highlighter-rouge&quot;&gt;setBadgeMargin&lt;/code&gt; مقدار لازمه رو برای فاصله گرفتن از مرکز به سمت بالا سمت راست، یا هرجایی که شما دوست داشتین وارد می‌کنیم.&lt;/p&gt;

&lt;p&gt;خب درنهایت، چیزی نوشتیم برای یه &lt;em&gt;بج empty&lt;/em&gt; اینه:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;insertBadge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BottomNavigationMenuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomNavigationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;targetView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;menuView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getChildAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BadgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setTargetView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;targetView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setEmptyBadge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setBadgeGravity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Gravity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;CENTER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;badgeView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setBadgeMargin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;اگر از Badge با شمارنده استفاده کردین، برای افزایش مقدار داخل بَج هم میتونید بصورت دستی مقدار جدید بهش بدید، و هم میتونید با صدا زدن متد &lt;code class=&quot;highlighter-rouge&quot;&gt;incrementBadgeCount&lt;/code&gt; یا &lt;code class=&quot;highlighter-rouge&quot;&gt;decrementBadgeCount&lt;/code&gt; اون رو کم یا زیاد کنید.&lt;/p&gt;

&lt;p&gt;برای حذف کردن بج از روی منوی آیتم فقط کافیه متد &lt;code class=&quot;highlighter-rouge&quot;&gt;removeBadge&lt;/code&gt; رو صدا بزنید.&lt;/p&gt;

&lt;p&gt;در نهایت چیزی که انتظارشو داشتیم، به همین سادگی به همین خوشمزگی :)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-11/bottom-navigation-menu-2.png&quot; alt=&quot;Bottom Navigation View&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-11/bottom-navigation-menu-3.png&quot; alt=&quot;Bottom Navigation View&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-10-11/bottom-navigation-menu-4.png&quot; alt=&quot;Bottom Navigation View&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;نتیجه-گیری&quot;&gt;نتیجه گیری&lt;/h2&gt;

&lt;p&gt;نتیجه اینکه کس نخوارد پشت من جز ناخن انگشت من! به هرحال این بندگان خدا در شرکت google خودشون رو به هر دری میزنن تا راه توسعه رو برای ما هموارتر کنن ولی خوب نمیشه در هرچیزی کمال مطلق آفرید، ابزارها آفریده میشن،‌و تکمیل کردنشون وظیفه ما توسعه دهنده‌هاست، مثل همین چالش‌هایی که در این مقوله پیش اومد.&lt;/p&gt;

&lt;p&gt;اگر شما تو استفاده از این BottomNavigationView به چالشی برخوردید و حلش کردید یا برای همین موارد پیش اومده پیشنهاد بهتری داشتین ممنون میشم اگه روی &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; یا &lt;a href=&quot;https://t.me/Amlashi&quot;&gt;تلگرام&lt;/a&gt; با من درمیون بگذارید.&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Android" /><category term="UI" /><category term="BottomNavigationView" /><summary type="html">اگر پست “جایگزینی برای منوی همبرگر” شایان رو خونده باشید حتما متوجه شدید که ما در پروژمون بجای همبرگر منو از BottomNavigationView استفاده کردیم.</summary></entry><entry><title type="html">انیمیشن در اندروید با Lottie</title><link href="https://isapanah.com/2017/oh-my-android-lottie" rel="alternate" type="text/html" title="انیمیشن در اندروید با Lottie" /><published>2017-08-07T00:00:00+04:30</published><updated>2017-08-07T00:00:00+04:30</updated><id>https://isapanah.com/2017/oh-my-android-lottie</id><content type="html" xml:base="https://isapanah.com/2017/oh-my-android-lottie">&lt;p&gt;همونطور که قبلا بهتون در پست  “ &lt;a href=&quot;http://isapanah.com/2017/oh-my-lottie&quot;&gt;استفاده از انیمیشن در توسعه اپلیکیشن&lt;/a&gt; “ قول داده بودم، در این پست قراره به آموزش استفاده از &lt;a href=&quot;https://github.com/airbnb/lottie-android&quot;&gt;لایبرری Lottie&lt;/a&gt; و اضافه کردن منابع بصری انیمه به پروژه اندروید بپردازیم.&lt;/p&gt;

&lt;p&gt;فهرست:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;#bodymovin&quot;&gt;پلاگین BodyMovin&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#bodymovin-install&quot;&gt;نصب پلاگین&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#bodymovin-usage&quot;&gt;گرفتن خروجی JSON از پروژه انیمیشن&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;#lottie&quot;&gt;لایبرری Lottie برای اندروید&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-install&quot;&gt;نصب و آماده‌سازی اولیه&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-basic&quot;&gt;مبانی اولیه و استفاده از یک انیمیشن ساده&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-progress&quot;&gt;انیمیشن با قابلیت کنترل progress&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-animated-button&quot;&gt;پیاده‌سازی دکمه‌های انیمیشنی&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-animated-font&quot;&gt;پیاده سازی فونت انیمیشنی&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lottie-intro&quot;&gt;طراحی صفحه خوش‌آمد گویی با انیمیشن&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;#lottie-tips&quot;&gt;نکات مهم&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;#lottie-final&quot;&gt;صحبت پایانی&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;bodymovin&quot;&gt;پلاگین BodyMovin&lt;/h2&gt;

&lt;h3 id=&quot;bodymovin-install&quot;&gt;1.  نصب پلاگین&lt;/h3&gt;

&lt;p&gt;در اولین گام، فرض میکنیم که شما انیمیشن مورد نظر خودتون رو در AfterEffect طراحی کردین و حالا وقتشه که ازش خروجی بگیرید. خب برای اینکار لازمه که اول پلاگین &lt;a href=&quot;https://github.com/bodymovin/bodymovin&quot;&gt;BodyMovin&lt;/a&gt; روی افترافکت نصب کرده باشید.&lt;/p&gt;

&lt;p&gt;میتونید پلاگین رو از &lt;a href=&quot;http://aescripts.com/bodymovin/&quot;&gt;aescripts&lt;/a&gt; یا &lt;a href=&quot;https://creative.adobe.com/addons/products/12557&quot;&gt;adobe store&lt;/a&gt; دریافت کنید؛ اما چون دانلود کردن از اینجا خیلی دردسر داشت، من گذاشتمش در ریپوی پروژه و میتونید از گیتهاب مستقیما دانلودش کنید. ( &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/repo/plugin/bodymovin_v4.10.2.zip&quot;&gt;دانلود پلاگین BodyMovin&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;فایل دانلودی رو آنزیپ کنید، درون پوشه یک فایل &lt;strong&gt;bodymovin.zxp&lt;/strong&gt; وجود داره. باید اون رو به عنوان اکستنشن به پروژه اضافه کنید، که اونم خیلی دردسر داره! برای راحتتر پیش رفتن این موضوع از ابزاری به نام &lt;strong&gt;zxp&lt;/strong&gt; استفاده میکنیم. نرم‌افزار zxp-installer رو از &lt;a href=&quot;http://aescripts.com/learn/zxp-installer/&quot;&gt;aescripts&lt;/a&gt; دانلود و نصب کنید. بعد از اجرا کردنش کافیه فایل bodymovin.zxp رو به zxp درگ اند دراپ کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/zxp-0.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;حالا اکستنشن نصب شده و فقط لازمه AfterEffect رو ری استارت کنید.&lt;/p&gt;

&lt;p&gt;قبل از استفاده از BodyMovin لطفا به &lt;code class=&quot;highlighter-rouge&quot;&gt;Edit &amp;gt; Preferences &amp;gt; General&lt;/code&gt; رفته، و تیک &lt;strong&gt;Allow Scripts to Write Files and Access Network&lt;/strong&gt; رو فعال کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/zxp-1.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;تمامی این روند در هردو سیستم عامل Windows و MacOS به همین ترتیبی که گفتم انجام میشه.&lt;/p&gt;

&lt;h3 id=&quot;bodymovin-usage&quot;&gt;2.  گرفتن خروجی JSON از پروژه انیمیشن&lt;/h3&gt;

&lt;p&gt;خب حالا وقته خروجی گرفتنه.اول از همه پروژه AfterEffect تون رو باز کنید و بعد کافیه به مسیر &lt;code class=&quot;highlighter-rouge&quot;&gt;Edit &amp;gt; Extionstions &amp;gt; BodyMovin&lt;/code&gt; رفته تا بادی‌مووین آماده خروجی گرفتن بشه.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/bodymovin-0.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;خب حالا باید مسیر خروجی رو مشخص کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/bodymovin-1.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;انمیشین‌ی که میخوایید ازش خروجی بگیرید رو انتخاب کنید‌.&lt;/p&gt;

&lt;p&gt;توجه کنید که میتونید در همینجا Preview انیمیشن رو هم مشاهده کنید، یا میتونید اینکارو با نصب پلیر مخصوص بادی‌مووین انجام بدید، فقط کافیه روی Get the Player کلیک کرده و نصبش کنید.&lt;/p&gt;

&lt;p&gt;و در آخر روی Render کلیک کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/bodymovin-2.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;حالا همه چی تموم شده و روی Done کلیک کنید و تمام.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/bodymovin-3.png&quot; alt=&quot;ZXP Installer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;تمامی مراحل نصب و خروجی گرفتن از BodyMovin رو پشت‌سر گذاشتیم. فقط کافیه فایل json خروجی گرفته شده رو به پروژه اندروید، iOS و یا ReactNative اضافه کنیم.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;lottie&quot;&gt;لایبرری Lottie برای اندروید&lt;/h2&gt;

&lt;h3 id=&quot;lottie-install&quot;&gt;1.  نصب و آماده‌سازی اولیه&lt;/h3&gt;

&lt;p&gt;قبل از شروع همه چیز، من برای نمونه و تمرین یه پروژه اندروید ساخته و در گیتهابم گذاشتم، میتونید به &lt;a href=&quot;https://github.com/sadra/LottieExampleProject&quot;&gt;صفحه گیتهاب این پروژه&lt;/a&gt; مراجعه کرده و به تمامی فایلها مثل پلاگینها، نمونه های انیمیشن و کدهای سمپل در همون ریپوزیتوری دسترسی داشته باشد.&lt;/p&gt;

&lt;p&gt;در اولین گام باید لایبرری &lt;strong&gt;Lottie&lt;/strong&gt; رو به پروژمون اضافه کنیم. کافیه اون رو در Dependencie های پروژه در فایل &lt;code class=&quot;highlighter-rouge&quot;&gt;build.gradle&lt;/code&gt; معرفی کنیم و بعدشم هم پروژه رو یکبار سینک میکنیم.&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'com.airbnb.android:lottie:2.1.0'&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;شما باید فایلهای انیمیشن رو در پوشه &lt;strong&gt;assets&lt;/strong&gt; قرار بدید. اگر قبلا پوشه رو تعریف کردین که هیچ، اما اگه اینکارو نکردین کافیه یه دایرکتوری به اسم assets در مسیر &lt;code class=&quot;highlighter-rouge&quot;&gt;app/src/main&lt;/code&gt; ایجاد کرده و بعد فایلهای json انیمیشن رو بریزید اونجا.&lt;/p&gt;

&lt;p&gt;فایلهای JSON ای که در این پروژه استفاده کردم رو میتونید مستقیما از &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/tree/master/app/src/main/assets&quot;&gt;ریپوی گیتهاب&lt;/a&gt; دریافت کنید.&lt;/p&gt;

&lt;h3 id=&quot;lottie-basic&quot;&gt;2.  مبانی اولیه و استفاده از یک انیمیشن ساده&lt;/h3&gt;

&lt;p&gt;اول باید view مربوط به لاتی رو به Layout مورد نظرتون اضافه کنید.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;com.airbnb.lottie.LottieAnimationView&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;android:id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@+id/animation_view&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;android:layout_width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;android:layout_height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;app:lottie_fileName=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gift.json&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;app:lottie_loop=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;app:lottie_autoPlay=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;قبل از هرچیزی بهتره با پارامتر‌های اصلی که به ویوومون دادیم آشنا بشیم. پارامتر &lt;strong&gt;lottie_fileName&lt;/strong&gt; اشاره به نام و محل فایل json انیمیشنتون داره. توجه کنید که اگه فایل json رو همینجوری در assets قرار دادید که هیچ، فقط کافیه اسم فایل رو نام ببرید؛ اما اگه اون رو در یک پوشه درون assets تجمیع کردین، یادتون نره که حتما نام پوشه رو قبل از فایل ذکر کنید مثلا: &lt;code class=&quot;highlighter-rouge&quot;&gt;myFolder/anim.json&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;پارامتر &lt;strong&gt;lottie_loop&lt;/strong&gt; اشاره به این مورد داره که این انیمیشن بصورت  با یا بدون لوپ (بی پایان) پخش بشه. اگه اشاره ای بهش نکنید بصورت پیشفرض &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt; هست، ولی اگه میخواهید انیمیشنتون لوپ داشته باشه، یادتون نره که به &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; بودنش اشاره کنید.&lt;/p&gt;

&lt;p&gt;و مورد آخر هم &lt;strong&gt;lottie_autoPlay&lt;/strong&gt; هست، که میگه میخوایید همون موقع که ویوو ظاهر شده، شروع کنه به پخش یا نه؟ این هم بصورت پیشفرض &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt; هست.&lt;/p&gt;

&lt;p&gt;خب حالا اگه پروژه رو بیلد کنید، میبینید که به چه آسونی انیمیشن به پروژتون اضافه شده ^_^&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/lottie-anim-0.gif&quot; alt=&quot;Lottie Simple Animation Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;همه این موارد رو در خود کلاستون هم میتونید انجام بدید. اول ویوو رو در کلاستون معرفی و کَست کنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;LottieAnimationView&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LottieAnimationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findViewById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;animation_view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و بعد مورادی مثل محل و نام انیمیشن، لوپ بودنش، و پخش اتوماتیک رو به همون راحتی متیونید واسش تعریف کنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hello-world.json&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;playAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ما در حالت کد، امکانات خیلی زیادی داریم. برای مثال اگه بخوایم سرعت انیمیشن رو کم یا زیاد کنیم کافیه متد &lt;code class=&quot;highlighter-rouge&quot;&gt;.setSpeed(floatValue)&lt;/code&gt; رو صدا بزنیم و مقدار دهی کنیم. مقدار 1.0 یعنی همون سرعت نرمال خودش. حالا هرچی از یک بالاتر یا پایینتر باشه، انیمیشن به همون نسبت سریعتر یا کندتر نمایش داده میشه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setSpeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//normal speed&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setSpeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//2x faster&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setSpeed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//2x slower&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;شما همچنین میتونید انیمیشن رو Pause یا متوقف کنید و سپس اقدام به ادامه پخش اون کنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;pauseAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//Pause the animation&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;resumeAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//and Resume it again&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;توجه کنید که اگر یکبار Pause کنید انیمیشن متوقف میشه، اما مجددا اگر pauseAnimation رو صدا کنید انیمیشن به نمایش خودش ادامه می‌دهد( Resume میشه ). این مورد درباره resumeAnimation هم صادق هست! احساس میکنم مشکلی در خود لایبرریه، و این مورد رو واسشون issue کردم تا بررسی کنن، پس حواستون بهش باشه.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;یکی دیگه از امکاناتی که در کد به ما داده میشه، اینه که بتونیم به انیمشن رنگ دلخواه خودمون رو بدیم. یه &lt;code class=&quot;highlighter-rouge&quot;&gt;PorterDuffColorFilter&lt;/code&gt; ایجاد کرده و رنگ مورد نظرتون رو بهش بدین. این موضوع رو در نظر داشته باشن که &lt;strong&gt;Mode&lt;/strong&gt; رنگ هم روی &lt;code class=&quot;highlighter-rouge&quot;&gt;PorterDuff.Mode.SRC&lt;/code&gt; باشه بهترین حالته، در مودهای دیگه رنگ تغییر میکنه.&lt;/p&gt;

&lt;p&gt;خب، حالا برای اضافه کردن رنگ ۲متد اصلی داریم. برای اینکه به کل ویوو انیمیشنمون رنگ بدیم، باید از متد &lt;code class=&quot;highlighter-rouge&quot;&gt;addColorFilter(colorFilter)&lt;/code&gt; استفاده کنیم. مواقعی پیش میاد که میخواییم به یه لایه خاص از انیمیشنمون رنگ بدیم، برای اینکار از متد &lt;code class=&quot;highlighter-rouge&quot;&gt;addColorFilterToLayer(“layerName”, colorFilter)&lt;/code&gt; استفاده می‌کنیم. لازمه که اول اسم لایه ای که میخواید رنگ بگیره رو نام برده، و سپس فیلتر رنگ خودتون رو مشخص کنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;colorFilter1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#CC0321&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorFilter1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;colorFilter2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilterToLayer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LAYER_NAME&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;colorFilter1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;برای پاک شدن رنگ هم کافیه متد clear رو صدا بزنید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clearColorFilters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;البته شما میتونید فیلتر رنگ رو در خود Layout هم تعریف کنید. البته در اونجا فقط میتونید رنگ رو برای کل ویوو در نظر بگیرید، نه برای یک لایه خاص.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;com.airbnb.lottie.LottieAnimationView&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app:lottie_colorFilter=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@android:color/holo_purple&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@+id/animation_view&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و آدرس تمامی کدهای و نمونه‌هایی که در این قسمت پیاده کردیم:&lt;/p&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;p&gt;&lt;strong&gt;Get it from github:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/SimpleAnimation.java&quot;&gt;Class&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/simple_animation.xml&quot;&gt;Layout&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/gift.json&quot;&gt;JSON Animation&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-progress&quot;&gt;3.  انیمیشن با قابلیت کنترل Progress  &lt;/h3&gt;

&lt;p&gt;یکی از قابلیت های کاربردی که Lottie در اختیار شما میگذاره، اینه که شما بتونید روند یا Progress انیمیشنتون رو کنترل کنید. هر انیمیشنی شامل یک بازه &lt;strong&gt;0.0&lt;/strong&gt; تا &lt;strong&gt;1.0&lt;/strong&gt; میشه (اشاره به همون ۰ تا ۱۰۰ درصد داره)، برای اینکه بتونید مشخص کنید که انیمیشنتون از کجا شروع بشه، یا اینکه الان در کدوم فریم باشه، فقط کافیه متد &lt;code class=&quot;highlighter-rouge&quot;&gt;setProgress(floatValue)&lt;/code&gt; رو صدا زده و مقدار مورد نظر رو بهش بدید.&lt;/p&gt;

&lt;p&gt;من برای اینکه این تمرین رو انجام بدم، یه seekBar در لی‌اَوت‌م گذاشتم، و با &lt;strong&gt;onProgressChanged&lt;/strong&gt; اون رو ردیابی کرده،‌ و به ازای هر تغییر، مقدار &lt;code class=&quot;highlighter-rouge&quot;&gt;((float)progress)/100&lt;/code&gt; رو به progress انیمیشنمون مقداردهی میکنم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;seekBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOnSeekBarChangeListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SeekBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;OnSeekBarChangeListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onProgressChanged&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SeekBar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;seekBar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fromUser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;animation_view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;progress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;و خب، نتیجش میشه این:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/lottie-anim-1.gif&quot; alt=&quot;Lottie Progress Animation Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;شما حتی میتونین برای انیمیشنتون یه رنج هم تعریف کنید. در &lt;a href=&quot;#lottie-animated-button&quot;&gt;بخش بعدی&lt;/a&gt; بصورت عینی در مورد این موضوع مثال زدم.&lt;/p&gt;

&lt;p&gt;و آدرس تمامی کدهای و نمونه‌هایی که در این قسمت پیاده کردیم:&lt;/p&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;p&gt;&lt;strong&gt;Get it from github:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/ProgressAnimation.java&quot;&gt;Class&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/progress_animation.xml&quot;&gt;Layout&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/starwars.json&quot;&gt;JSON Animation&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-animated-button&quot;&gt;4.  پیاده‌سازی دکمه‌های انیمیشنی&lt;/h3&gt;

&lt;p&gt;یکی از مواردی که خیلی در زیبایی و تجربه کاربری لذت‌بخش تاثیر داره و در &lt;a href=&quot;https://material.io/guidelines/motion/material-motion.html&quot;&gt;منابع متریال&lt;/a&gt; هم به اون اشاره شده، استفاده کردن از دکمه‌هاییه که افکت‌های انیمیشنی دارند. برای مثال همبرگر منويي که با کلیک میچرخه و از Hamburger به Back Button تبدیل میشه.&lt;/p&gt;

&lt;p&gt;سوال اینجاست که چطوری باید همچین چیزی رو طراحی کنیم!؟ بگذارید موضوع رو ساده کنیم، ما یه انیمیشن از دکمه سوییچ داریم. این انیمیشن از پراگرس &lt;strong&gt;0.0&lt;/strong&gt; تا &lt;strong&gt;0.5&lt;/strong&gt; نشون میده که سوییچ &lt;code class=&quot;highlighter-rouge&quot;&gt;On&lt;/code&gt; میشه، و از پراگرس &lt;strong&gt;0.5&lt;/strong&gt; تا &lt;strong&gt;1.0&lt;/strong&gt; نشون میده که سوییچ &lt;code class=&quot;highlighter-rouge&quot;&gt;Off&lt;/code&gt; میشه.&lt;/p&gt;

&lt;p&gt;حالا موقعی که کاربر سویچ on رو تپ کرد، انیمیشن رو از پراگرس &lt;strong&gt;0.0&lt;/strong&gt; به &lt;strong&gt;0.5&lt;/strong&gt; انیمیت می‌کنیم. و وقتی سویچ رو off کرد، میتونیم ۲ کار انجام بدیم:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;یا انیمیشن رو از 0.5 به 1.0، انیمیت کنیم.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;یا اینکه انیمیشن رو بصورت &lt;strong&gt;reverse&lt;/strong&gt; پخش کنیم. یعنی پراگرس از 0.5 به 0.0 انیمیت میشه.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;من در نمونه اپلیکیشنی که در گیتهاب گذاشتم، چند مثال در این مورد آوردم:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;دکمه سوییچ:&lt;/strong&gt; در این مثال من یه مقدار بولین به اسم &lt;code class=&quot;highlighter-rouge&quot;&gt;switchIsOn&lt;/code&gt; ایجاد کردم تا باز یا بسته بودن سوییچ رو بتونم دنبال کنم. وقتی که کاربر کلیک کرد یکبار متد &lt;code class=&quot;highlighter-rouge&quot;&gt;playAnimation()&lt;/code&gt; و دفعه بعد &lt;code class=&quot;highlighter-rouge&quot;&gt;reverseAnimation()&lt;/code&gt; رو صدا میزنم.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;switchIsOn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animatedSwitchButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reverseAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;switchIsOn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animatedSwitchButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;playAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;switchIsOn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;همبرگر منو:&lt;/strong&gt; در این مثال بازم هم من یه مقدار بولین برای دنبال کردن باز/بسته بودن منو درست کردم. حالا موقع بازشدن همبرگر منو، با استفاده از کلاس &lt;code class=&quot;highlighter-rouge&quot;&gt;ValueAnimator&lt;/code&gt; یک رنج از پراگرس ایجاد کرده &lt;code class=&quot;highlighter-rouge&quot;&gt;(0.05f, 0.45f)&lt;/code&gt; و مقداری هم برای مدت زمان سپری کردن این انیمیشن تعریف میکنم &lt;code class=&quot;highlighter-rouge&quot;&gt;setDuration(2000)&lt;/code&gt;. برای بسته شدن همبرگر منو هم، یه رنج دیگه با مقادیری بلعکس ایجاد کردم. خب، از الان هربار که کاربر روی دکمه کلیک کنه، انیمیشن نمایش داده میشه و انگار که منو باز و بسته میشه.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//With ValueAnimator&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hamburgerIsOpen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ofFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.45f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setDuration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hamburgerIsOpen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ofFloat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.45f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.05f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setDuration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;hamburgerIsOpen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;animator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addUpdateListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;AnimatorUpdateListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationUpdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;animatedHamburger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;دکمه رادیو:&lt;/strong&gt; در مورد کیس رادیو باتن هم برای اکتیو کردن سلکشن، یکبار انیمیشن کامل به نمایش درمیاد، بار دوم که کاربر کلیک میکنه، پراگرس روی &lt;strong&gt;0.0&lt;/strong&gt; یعنی موقعی که رادیو انتخاب نشده بود سِت میشه. و این روند همینجوری ادامه خواهد داشت.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animatedRadioButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animatedRadioButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;playAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animatedRadioButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.0f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;دنبال کردن انیمیشن:&lt;/strong&gt; ما میتونیم هم &lt;strong&gt;مراحل&lt;/strong&gt; و هم &lt;strong&gt;روند&lt;/strong&gt; انیمیشنمون رو دنبال کنیم. برای مثال من در مورد کیس دکمه قطع صدا، میخواستم وقتی که انیمیشن تموم شد یه Toast نشون بدم و به کاربر بگم که صدا تموم شد. برای همین متد &lt;code class=&quot;highlighter-rouge&quot;&gt;addAnimatorListener&lt;/code&gt; رو برای ویوومون تعریف کردم که به ما ۴تا متد دیگه میده:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;onAnimationStart&lt;/code&gt; هنگام شروع انیمیشن&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;onAnimationEnd&lt;/code&gt; هنگام پایان انیمیشن&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;onAnimationCancel&lt;/code&gt; هنگام لغو شدن انیمیشن&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;onAnimationRepeat&lt;/code&gt; هنگام تکرار انیمیشن&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;پس من هم از &lt;code class=&quot;highlighter-rouge&quot;&gt;onAnimationEnd&lt;/code&gt; استفاده کردم و موقعی که انیمیشن تموم میشه به کاربر میگم که صدا قطع شد یا وصل شد.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Animator Listener&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animatedMuteButton&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAnimatorListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Animator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;AnimatorListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationEnd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Toast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;makeText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InteractionAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isMute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Sound is mute.&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Sound isn't mute.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Toast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationCancel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationRepeat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ایطوری میتونید مراحل و مقاطع انیمیشن رو دنبال کنید. خب یه وقتایی هم هست که نیازه تا روند اپلیکیشن رو دنبال کنیم. برای اینکه این قضیه رو واستون روشن کنم از‌ انیمیشن یه ساعت استفاده کردم، میخوام به فلان تایم یا فلان درصد از پراگرس که رسید، رنگش عوض بشه. وقتی هم که زمان تموم شد، یه اسنک نشون بده که زمانت تموم شده. برای این لازمه که هرلحظه بدونم در چه درصدی از انیمیشن قرار داریم. واسه پیاده کردن این موضو از متدی به اسم &lt;code class=&quot;highlighter-rouge&quot;&gt;addAnimatorUpdateListener&lt;/code&gt; برای ترک کردن هربار آپدیت شدن یا تغییر کرد یکی از مشخصه های انیمیشن استفاده میکنیم (که ساده‌ترینش همین تغییر پراگرس هست). یه سری &lt;strong&gt;if&lt;/strong&gt; هم گذاشتم و با &lt;code class=&quot;highlighter-rouge&quot;&gt;getAnimatedValue()&lt;/code&gt; چک کردم که اگه در فلان بازه ای قرار گرفت، رنگش تغییر کنه یا اسنک نشون بده. که نهایتا شد این:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Animator Update Listener&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;animatedWatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addAnimatorUpdateListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;AnimatorUpdateListener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onAnimationUpdate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValueAnimator&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.25f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;animatedWatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;animatedWatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MAGENTA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.75&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;animatedWatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;CYAN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;animatedWatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuffColorFilter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BLUE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PorterDuff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;SRC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnimatedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.93f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findViewById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;container&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;s&quot;&gt;&quot;Oh My Lottie, your time is finished!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Snackbar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LENGTH_LONG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب فکر میکنم تمام چیزهایی که در این بخش لازم بود رو گفتم. حالا میتونید باقی سناریوهارو بر اساس همین‌ تمرین پیاده کنید.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/lottie-anim-2.gif&quot; alt=&quot;Lottie Interaction With User Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;و آدرس تمامی کدهای و نمونه‌هایی که در این قسمت پیاده کردیم:&lt;/p&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;p&gt;&lt;strong&gt;Get it from github:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/InteractionAnimation.java&quot;&gt;Class&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/interaction_animation.xml&quot;&gt;Layout&lt;/a&gt;&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;JSON Animations:&lt;/strong&gt;&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/radio_button.json&quot;&gt;radio_button&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/switch.json&quot;&gt;switch&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/hamburger.json&quot;&gt;hamburger&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/mute.json&quot;&gt;mute&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/watch.json&quot;&gt;watch&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ul&gt;

&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-animated-font&quot;&gt;5.  پیاده سازی فونت انیمیشنی&lt;/h3&gt;

&lt;p&gt;فونت انیمیشنی، یکی از چیزهای جالبی که لاتی داشت و بنده خیلی درد کشیدم تا پیادش کنم! قبل از شروع این قسمت دعوت میکنم با دیدن انیمیشن زیر، با این پدیده آشنا بشید:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/lottie-anim-3.gif&quot; alt=&quot;Lottie Animation Font Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;اما واقعا چطوری یه همچین چیزیو میشه درست کرد؟ اجازه بدید تا تکنیک این بخش رو تشریح کنم.&lt;/p&gt;

&lt;p&gt;مایه پوشه داریم که درون این پوشه به ازای هر حرف از حروف الفبا، یه انیمیشن وجود داره، مثلا یه انیمیشنی که انیمیت میشه تا حرف A رو نشون بده. ازونور ما گوش میدیم و هروقت که یه حرف از حروف الفبا تایپ شد، ما هم انیمیشنش رو پیدا کرده و به متن نوشته شده قبلی ( درواقع انیمیشن های بهم چسبیده قبلی) اضافه میکنم. یه انیمیشن هم واسه cursor داریم که مثلا نشون میده نشانه نوشتار ما الان کجاست. به همین سادگی.&lt;/p&gt;

&lt;p&gt;خب، اول از همه نیازه که یه کلاس ایجاد کنیم به اسم &lt;strong&gt;LottieFontViewGroup&lt;/strong&gt; که از FrameLayout اکستند شده و نگهدارنده انیمیشن‌های ماست. این کلاس برای ما ۳تا کار انجام میده:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;ایجاد ویوو برای ادیتور متن&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ثبت کردن اکشن ها به عنوان انیمیشن (مثل نشانگر، حروف و خط فاصله)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;نگهدارندی و کنترل کردن انیمیشن ها&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;نمونه ای که الان در گیتهاب خود Lottie هست، با زبان کاتلین نوشته شده &lt;a href=&quot;https://github.com/airbnb/lottie-android/blob/master/LottieSample/src/main/kotlin/com/airbnb/lottie/samples/LottieFontViewGroup.kt&quot;&gt;LottieFontViewGroup.kt&lt;/a&gt; و من همون نمونه رو به جاوا کمی تغییر دادم و سایز فونت‌هارو اصلاح کردم و نهایت گذاشتمش توی گیتهاب همین پروژه که از اینجا میتونید &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/LottieFontViewGroup.java&quot;&gt;LottieFontViewGroup.java&lt;/a&gt; دریافتش کنید.&lt;/p&gt;

&lt;p&gt;خب، فقط کافیه که ویوو مربوطه رو در لایه ای که مد نظرتون هست قرار بدید، بدون اینکه نیاز باشه با چیز دیگه‌ای درگیر بشین.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;com.example.yourproject.LottieFontViewGroup&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@+id/fontView&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ممکنه بپرسین این فونت انیمیشنی به چه دردی میخوره؟ شاید خود ادیتورش بدردتون نخوره، ولی میتونید ازش استفاده کنید و متنی که دلتون میخواد (مثلا اسم شرکت یا پروژه) رو بصورت انیمیشنی به کاربر نمایش بدید.&lt;/p&gt;

&lt;p&gt;میتونید از فونت دیگه ای هم استفاه کنید؟ صد در صد، فقط باید زحمت طراحی انیمیشن برای تمامی حروف رو خودتون بکشید :)) چون غیر از همین نمونه ای که روی وب بود، چیز دیگه ای پیدا نکردم.&lt;/p&gt;

&lt;p&gt;و آدرس تمامی کدهای و نمونه‌هایی که در این قسمت پیاده کردیم:&lt;/p&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;p&gt;&lt;strong&gt;Get it from github:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/LottieFontViewGroup.java&quot;&gt;LottieFontViewGroup&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/AnimatedFont.java&quot;&gt;Class&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/activity_typography_demo.xml&quot;&gt;Layout&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/tree/master/app/src/main/assets/Mobilo&quot;&gt;Animation Font Folder&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-intro&quot;&gt;6.  طراحی صفحه خوش‌آمد گویی با انیمیشن&lt;/h3&gt;

&lt;p&gt;و تمرین آخر، در این قسمت میخواهیم یک صفحه خوش‌آمدی گویی، Intro یا OnBoarding بسازیم.&lt;/p&gt;

&lt;p&gt;اول بیایم منطق قضیه رو باهم بررسی کنیم. در این پروژه به یک فایل انیمیشن که شامل تمامی مراحل Intro باشه نیاز داریم. هر مرحله یک آغاز و پایانی داره و ما باید زمان شروع و پایان تمامی مراحل رو در بیاریم، برای مثال صفحه دوم Intro از پراگرس 0.25 شروع و در 0.42 تموم میشه. حالا موقعی که کاربر Swipe میکنه یا روی دکمه ‘بعدی’ کلیک میکنه ما هم همگام با اسکرول شدن صفحه، پراگرس انیمیشن رو به همون نسبت جلو میبریم.&lt;/p&gt;

&lt;p&gt;در این تمرین برای صفحه خوش‌امدگویی از لایبرری &lt;a href=&quot;https://github.com/MatthewTamlin/SlidingIntroScreen&quot;&gt;SlidingIntroScreen&lt;/a&gt; و انیمیشن &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/services_intro.json&quot;&gt;services_intro&lt;/a&gt; استفاده کردم. و زمان تمامی مراحل انیمیشن رو به ترتیب زیر لیست کردم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ANIMATION_TIMES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]{&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.06f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.25f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.42f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.57f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.71f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.9f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;توجه کنید که ۲ مقدار پایانی باید با پراگرس آخری یکی باشن، تا موقع اسکرول کردن آرایه سرریز نکنه.&lt;/p&gt;

&lt;p&gt;و بعدش هم به تعداد صفحاتی که قرار اسکرول کنیم نمونه ساختم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fragment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generatePages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;savedInstanceState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EmptyFragment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EmptyFragment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;pages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;}};&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;هرموقع که صفحه خوش‌آمدگویی درحال اسکرول شد، متد setAnimationProgress صدا میزنم، در این متد مقدار پاگرس فعلی و بعدی رو میگیرم و مقدار اسکرول رو هم داریم و میزان پراگرس رو به انیمیشنمون اضافه میکنم:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setAnimationProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positionOffset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startProgress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ANIMATION_TIMES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endProgress&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ANIMATION_TIMES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;position&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;animationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lerp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endProgress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;positionOffset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;برای اینکه انیمیشنمون تمیز و زیبا انجام بشه از متدی به نام lerp استفاده میکنیم. این متد بهمون کمک میکنه که زمان انیمیشنمون رو متناسب به مقدار اسکرولی که انجام شده جلو ببریم و این تغییر انیمیشن‌ها با نرمی بیشتری انجام بشه:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lerp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;startValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;خب تمومه. حالا یه صفحه خوش‌امد گویی ترو تمیز داریم. و اینم کاریه که انجام دادیم:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/post/2017-08-10/lottie-anim-4.gif&quot; alt=&quot;Lottie Intro Animation Demo&quot; /&gt;&lt;/p&gt;

&lt;p&gt;از همین متد میتونید توی بقیه لایبرری هایی که کار Intro یا onBoarding رو انجام میدن استفاده کنید.&lt;/p&gt;

&lt;p&gt;و آدرس تمامی کدهای و نمونه‌هایی که در این قسمت پیاده کردیم:&lt;/p&gt;

&lt;div class=&quot;div-ltr&quot;&gt;

  &lt;p&gt;&lt;strong&gt;Get it from github:&lt;/strong&gt; &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/java/com/isapanah/lottieeexampleproject/AppIntroActivity.java&quot;&gt;AppIntroActivity&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/app_intro_animation_view.xml&quot;&gt;app_intro_animation_view&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/res/layout/fragment_empty.xml&quot;&gt;fragment_empty&lt;/a&gt; / &lt;a href=&quot;https://github.com/sadra/LottieExampleProject/blob/master/app/src/main/assets/services_intro.json&quot;&gt;JSON Animation&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-tips&quot;&gt;7.  نکات مهم&lt;/h3&gt;

&lt;p&gt;در ادامه مطلب قصد دارم نکاتی درباره استفاده از لایبرری Lottie به شما یادآور بشم:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;استفاده از انیمیشن‌های آماده:&lt;/strong&gt; همونطور که در بخش‌های ابتدایی ذکر کرده بودم، شما متیونید از انمیمیشن‌های آماده در پروژتون استفاده کنید. توجه کنید که بعضی از این اینیمیشن‌ها ناقص هستند یا مشکلی دارند. فقط چند مورد مثال میزنم.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;فضای خالی دور انیمیشن:&lt;/strong&gt; بعضی از انیمیشن ها مثل &lt;a href=&quot;https://www.lottiefiles.com/425-bold-button&quot;&gt;این&lt;/a&gt;، &lt;a href=&quot;https://www.lottiefiles.com/422-onoff-switch-2&quot;&gt;این&lt;/a&gt; و &lt;a href=&quot;https://www.lottiefiles.com/416-thumbs-up&quot;&gt;این&lt;/a&gt; حدودا به اندازه ۵۰۰پیکسلِ مربع فضای خالیه اطرافشون! خیلی سعی کردم با خود فایل JSON ور برم و از فضای خالیش کم کنم، اما نشد که نشد. وقتی ازینها در پروژه استفاده می‌کنید ممکنه بیش از حد کوچیک به نظر بیان. تنها راه حلی که به ذهنم رسید این بود که ویوو انیمیشن رو اسکیل بدم. متاسفانه این اسکیل دادن در بعضی مواقع باعث میشه که انیمیشن پیکسله بشه.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;com.airbnb.lottie.LottieAnimationView&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;@+id/animatedView&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:scaleX=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.5&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:scaleY=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.5&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;60dp&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;android:layout_height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;60dp&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;تکرار بی‌جهت انیمیشن:&lt;/strong&gt; در بعضی انیمیشن‌ها مثل &lt;a href=&quot;https://www.lottiefiles.com/334-bamburge&quot;&gt;این&lt;/a&gt; و &lt;a href=&quot;https://www.lottiefiles.com/444-mute&quot;&gt;این&lt;/a&gt; دیده شده که انیمیشن بعد از پایان، دوباره تا چند فریم حرکت اضافی داره! دو راه پیش پای ماست، یا اینکه رنج شروع و پایان برای انیمیشن تعریف کنیم. یا اینکه در فایل JSON انیمیشن دست ببریم. اما چطوری. هر فایل JSON انیمیشنی رو که باز کنید، دارای دو پارامتر ip و op هستند. ip نشون دهنده فریم شروع کننده انمیشین و op نشون دهنده فریم پایانی انیمیشن هست. با تغییر این دو فاکتور در فایل JSON میتونید شروع و پایان انیمیشنتون رو دستکاری کنید.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;op&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;27.05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;استفاده از AnimatedVectorDrawable:&lt;/strong&gt; همین چند روز پیش بود که نیک بوچر در &lt;a href=&quot;https://medium.com/google-design/bodymovin-to-android-6e53e5f7a96&quot;&gt;وبلاگش نوشت&lt;/a&gt; که با استفاده از نسخه ۴ پلاگین BodyMovin میتونین برای AVD مستقیما خروجی بگیرین. باین اوصاف یعنی دیگه نیازی به Lottie نیست؟ خیر، شما فعلا فقط میتونید اون خروجی رو نمایش بدید. اما این دلیل نمیشه که تمام امکاناتی که Lottie داره، AVD هم داشته باشه. سعی میکنم در یه پست جداگانه نحوه استفاده از AVD رو هم آموزش بدم اما الان فقط میخوام به خواص هرکدوم اشاره میکنم:&lt;/p&gt;

&lt;p&gt;خوبی‌های Lottie:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;بیشتر از هر لایبرری و پلاگین دیگه از انیمیشن‌های افترافکت پشتیبانی میکنه&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;شما دسترسی کاملا دستی و Manual به انیمیشن دارید و میتونید eventها و کلیک‌هارو مدیریت کنید&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;میتونید خود فایل رو مستقیما از اینترنت دریافت کرده و نمایش بدید&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;میتونید بصورت برعکس پخش کنید و سرعتشو کنترل کنید&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;با در اختیار گذاشتن پراگرس شما میتونید حتی نحوه پخش انیمیشن رو هم مدیریت کنید&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;خوبی AVD:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;انیمیشن با سرعت و پرفرمنس بهتری در &lt;a href=&quot;https://medium.com/@workingkills/understanding-the-renderthread-4dc17bcaf979&quot;&gt;Render Thread&lt;/a&gt; نسبت به Main Thread اجرا میشه.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;پشتیبانی از AfterEffect:&lt;/strong&gt; لایبرری لاتی یه &lt;a href=&quot;http://airbnb.io/lottie/supported-features.html&quot;&gt;لیست&lt;/a&gt; از انیمیشن‌ها و افکت‌هایی از افترافکت که پشتیبانی می‌کنه آماده کرده. قبل از طراحی انیمیشن در AfterEffect حتما این &lt;a href=&quot;http://airbnb.io/lottie/supported-features.html&quot;&gt;فیچر‌ها&lt;/a&gt; رو بررسی کنید تا خدای نکرده انیمیشنتون ناقص اجرا نشه.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;سایز انیمیشن:&lt;/strong&gt; اگه براتون سوال بوجود اومد که سایز انیمیشن هارو چطوری ست کنم؟ بهتون پیشنهاد میکنم این &lt;a href=&quot;https://material.io/devices/&quot;&gt;چیت شیت&lt;/a&gt; از متریال رو مطالعه کنید تا دستتون بیاد که چه سایز px رو باید برای انیمیشنهاتون تا در اندروید با سایز dp همخونی داشته باشه.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;کش کردن انیمیشن:&lt;/strong&gt; ممکنه بعضی از انیمیشن‌ها به کَرّات استفاده بشه. برای اینکار حتما برای انیمیشنتون CacheStartegy رو فعال کنید. CacheStrategy رو بر اساس میزان استفاده‌تون میتونید روی ۳ حالت &lt;code class=&quot;highlighter-rouge&quot;&gt;Strong&lt;/code&gt; ، &lt;code class=&quot;highlighter-rouge&quot;&gt;Weak&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;None&lt;/code&gt; قرار بدید.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;lottieView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LottieAnimationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;findViewById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;simpleAnimation_lottieView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lottieView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setAnimation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;gift.json&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LottieAnimationView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;CacheStrategy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Strong&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;رنگ دادن به یک لایه خاص از انیمیشن&lt;/strong&gt;: مشابه مثالی که در بخش اول زدم، ممکنه شما بخوایید رنگ یک لایه خاص از انیمیشنتون رو تغییر بدید. مثلا در همون مثال ما رنگ بدنه و درپوش جعبه کادو رو تغییر دادیم. اما برای این کار، اگر انیمیشنتون رو خودتون طراحی کردین، میدونید که اسم لایه‌هاتون چیه و اسم لایه مورد نظر رو میبرید و رنگ بهش الصاق میشه. اما اگر از فایل آماده برای انیمیشنتون استفاده کردین، باید فایل JSON رو باز کرده و ببنید کدوم پارامتر‌ها با لیبل &lt;code class=&quot;highlighter-rouge&quot;&gt;nm&lt;/code&gt; مشخص شدن و دونه دونه اونهارو سعی و خطا تست کنید تا معلوم بشه کدومشون لایه مورد نظر شماست. برای مثال همین جعه دو لایه به نام های &lt;code class=&quot;highlighter-rouge&quot;&gt;body Konturen&lt;/code&gt; و &lt;code class=&quot;highlighter-rouge&quot;&gt;top Konturen&lt;/code&gt; اشاره به درپوش و بدنه جعبه داشت که پیدا کرده و رنگ رو بهش الصاق کردیم.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;//gift.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ddd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ty&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;nm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;body Konturen&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ddd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ty&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;nm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;top Konturen&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;زمان بندی در انیمیشن خوش‌آمدگویی:&lt;/strong&gt; اگه یادتون باشه در اون بخش گفتم که انیمیشن به نسبت اسکرول جلو و عقب میره. میدونیم که میزان فاصله دو صفحه از یک Viepager همیشه یکتا و بین همه صفحات مساویه. پس شما هم سعی کنید در انیمیشنی که طراحی میکنید این قانون رو نظر داشته باشید. اگه به همین انیمیشن دقت کنید  در بعضی بخشها سریع و در بعضی دیگه کند به نمایش درمیومد، دلیلش هم عدم توازن زمانی بین دو تغییر انیمیشن بود.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;آپدیت: این بخش در صورت مواجه شدن با مسايل جدید ممکنه به‌روزرسانی بشه.&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;lottie-final&quot;&gt;8.  صحبت پایانی&lt;/h3&gt;

&lt;p&gt;این بلندترین پستی بود که تا به امروز نوشتم. چیزی نزدیک به 29هزار کَرکتر. امیدوارم این پست بدردتون خورده باشه. متن خیلی طولانیه، برای همین در بالای صفحه فهرستی از عنوانها آماده کردم تا شما به راحتی تونید به بخش‌های که میخوایید مراجعه کنید.&lt;/p&gt;

&lt;p&gt;اگه قصد داشتین از این پست در وبلاگتون استفاده کنید، درخواست میکنم حتما به همین پست و بخش مربوطه رفرنس بدید ^_^&lt;/p&gt;

&lt;p&gt;و در آخر من کامنت‌های وبلاگ رو بستم و دوست دارم با شما در شبکه‌های اجتماعی تعامل داشته باشم. اگر سوال یا موردی بود در &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;توییتر&lt;/a&gt; مطرح کرده و من رو با آیدی &lt;a href=&quot;https://twitter.com/sadra_amlashi&quot;&gt;@sadra_amlashi&lt;/a&gt; منشن کنید. متشکرم.&lt;/p&gt;</content><author><name>صدرا املشی</name></author><category term="Android" /><category term="UI" /><category term="Animation" /><category term="Lottie" /><summary type="html">همونطور که قبلا بهتون در پست “ استفاده از انیمیشن در توسعه اپلیکیشن “ قول داده بودم، در این پست قراره به آموزش استفاده از لایبرری Lottie و اضافه کردن منابع بصری انیمه به پروژه اندروید بپردازیم.</summary></entry></feed>